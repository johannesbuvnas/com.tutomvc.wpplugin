/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ({

/***/ 0:
/***/ function(module, exports, __webpack_require__) {

	module.exports = __webpack_require__(70);


/***/ },

/***/ 70:
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	__webpack_require__(71);
	__webpack_require__(78);
	__webpack_require__(81);
	(function ($) {
	    $(document).ready(function () {
	        // Select2FormInput
	        $(".tutomvc-form-element .select2").each(function () {
	            $(this).select2($(this).data());
	        });
	    });
	})(jQuery);


/***/ },

/***/ 71:
/***/ function(module, exports) {

	// removed by extract-text-webpack-plugin

/***/ },

/***/ 78:
/***/ function(module, exports, __webpack_require__) {

	__webpack_require__(79)(__webpack_require__(80)+"\n\n// SCRIPT-LOADER FOOTER\n//# sourceURL=script:///Users/johannesbuvnas/Development/PHP/tutomvc/node_modules/source-map-loader/index.js!/Users/johannesbuvnas/Development/PHP/tutomvc/node_modules/select2/dist/js/select2.js")

/***/ },

/***/ 79:
/***/ function(module, exports) {

	/*
		MIT License http://www.opensource.org/licenses/mit-license.php
		Author Tobias Koppers @sokra
	*/
	module.exports = function(src) {
		if (typeof execScript !== "undefined")
			execScript(src);
		else
			eval.call(null, src);
	}


/***/ },

/***/ 80:
/***/ function(module, exports) {

	module.exports = "/*!\r\n * Select2 4.0.3\r\n * https://select2.github.io\r\n *\r\n * Released under the MIT license\r\n * https://github.com/select2/select2/blob/master/LICENSE.md\r\n */\r\n(function (factory) {\r\n  if (typeof define === 'function' && define.amd) {\r\n    // AMD. Register as an anonymous module.\r\n    define(['jquery'], factory);\r\n  } else if (typeof exports === 'object') {\r\n    // Node/CommonJS\r\n    factory(require('jquery'));\r\n  } else {\r\n    // Browser globals\r\n    factory(jQuery);\r\n  }\r\n}(function (jQuery) {\r\n  // This is needed so we can catch the AMD loader configuration and use it\r\n  // The inner file should be wrapped (by `banner.start.js`) in a function that\r\n  // returns the AMD loader references.\r\n  var S2 =\r\n(function () {\r\n  // Restore the Select2 AMD loader so it can be used\r\n  // Needed mostly in the language files, where the loader is not inserted\r\n  if (jQuery && jQuery.fn && jQuery.fn.select2 && jQuery.fn.select2.amd) {\r\n    var S2 = jQuery.fn.select2.amd;\r\n  }\r\nvar S2;(function () { if (!S2 || !S2.requirejs) {\nif (!S2) { S2 = {}; } else { require = S2; }\n/**\n * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.\n * Available via the MIT or new BSD license.\n * see: http://github.com/jrburke/almond for details\n */\n//Going sloppy to avoid 'use strict' string cost, but strict practices should\n//be followed.\n/*jslint sloppy: true */\n/*global setTimeout: false */\n\nvar requirejs, require, define;\n(function (undef) {\n    var main, req, makeMap, handlers,\n        defined = {},\n        waiting = {},\n        config = {},\n        defining = {},\n        hasOwn = Object.prototype.hasOwnProperty,\n        aps = [].slice,\n        jsSuffixRegExp = /\\.js$/;\n\n    function hasProp(obj, prop) {\n        return hasOwn.call(obj, prop);\n    }\n\n    /**\n     * Given a relative module name, like ./something, normalize it to\n     * a real name that can be mapped to a path.\n     * @param {String} name the relative name\n     * @param {String} baseName a real name that the name arg is relative\n     * to.\n     * @returns {String} normalized name\n     */\n    function normalize(name, baseName) {\n        var nameParts, nameSegment, mapValue, foundMap, lastIndex,\n            foundI, foundStarMap, starI, i, j, part,\n            baseParts = baseName && baseName.split(\"/\"),\n            map = config.map,\n            starMap = (map && map['*']) || {};\n\n        //Adjust any relative paths.\n        if (name && name.charAt(0) === \".\") {\n            //If have a base name, try to normalize against it,\n            //otherwise, assume it is a top-level require that will\n            //be relative to baseUrl in the end.\n            if (baseName) {\n                name = name.split('/');\n                lastIndex = name.length - 1;\n\n                // Node .js allowance:\n                if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {\n                    name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');\n                }\n\n                //Lop off the last part of baseParts, so that . matches the\n                //\"directory\" and not name of the baseName's module. For instance,\n                //baseName of \"one/two/three\", maps to \"one/two/three.js\", but we\n                //want the directory, \"one/two\" for this normalization.\n                name = baseParts.slice(0, baseParts.length - 1).concat(name);\n\n                //start trimDots\n                for (i = 0; i < name.length; i += 1) {\n                    part = name[i];\n                    if (part === \".\") {\n                        name.splice(i, 1);\n                        i -= 1;\n                    } else if (part === \"..\") {\n                        if (i === 1 && (name[2] === '..' || name[0] === '..')) {\n                            //End of the line. Keep at least one non-dot\n                            //path segment at the front so it can be mapped\n                            //correctly to disk. Otherwise, there is likely\n                            //no path mapping for a path starting with '..'.\n                            //This can still fail, but catches the most reasonable\n                            //uses of ..\n                            break;\n                        } else if (i > 0) {\n                            name.splice(i - 1, 2);\n                            i -= 2;\n                        }\n                    }\n                }\n                //end trimDots\n\n                name = name.join(\"/\");\n            } else if (name.indexOf('./') === 0) {\n                // No baseName, so this is ID is resolved relative\n                // to baseUrl, pull off the leading dot.\n                name = name.substring(2);\n            }\n        }\n\n        //Apply map config if available.\n        if ((baseParts || starMap) && map) {\n            nameParts = name.split('/');\n\n            for (i = nameParts.length; i > 0; i -= 1) {\n                nameSegment = nameParts.slice(0, i).join(\"/\");\n\n                if (baseParts) {\n                    //Find the longest baseName segment match in the config.\n                    //So, do joins on the biggest to smallest lengths of baseParts.\n                    for (j = baseParts.length; j > 0; j -= 1) {\n                        mapValue = map[baseParts.slice(0, j).join('/')];\n\n                        //baseName segment has  config, find if it has one for\n                        //this name.\n                        if (mapValue) {\n                            mapValue = mapValue[nameSegment];\n                            if (mapValue) {\n                                //Match, update name to the new value.\n                                foundMap = mapValue;\n                                foundI = i;\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                if (foundMap) {\n                    break;\n                }\n\n                //Check for a star map match, but just hold on to it,\n                //if there is a shorter segment match later in a matching\n                //config, then favor over this star map.\n                if (!foundStarMap && starMap && starMap[nameSegment]) {\n                    foundStarMap = starMap[nameSegment];\n                    starI = i;\n                }\n            }\n\n            if (!foundMap && foundStarMap) {\n                foundMap = foundStarMap;\n                foundI = starI;\n            }\n\n            if (foundMap) {\n                nameParts.splice(0, foundI, foundMap);\n                name = nameParts.join('/');\n            }\n        }\n\n        return name;\n    }\n\n    function makeRequire(relName, forceSync) {\n        return function () {\n            //A version of a require function that passes a moduleName\n            //value for items that may need to\n            //look up paths relative to the moduleName\n            var args = aps.call(arguments, 0);\n\n            //If first arg is not require('string'), and there is only\n            //one arg, it is the array form without a callback. Insert\n            //a null so that the following concat is correct.\n            if (typeof args[0] !== 'string' && args.length === 1) {\n                args.push(null);\n            }\n            return req.apply(undef, args.concat([relName, forceSync]));\n        };\n    }\n\n    function makeNormalize(relName) {\n        return function (name) {\n            return normalize(name, relName);\n        };\n    }\n\n    function makeLoad(depName) {\n        return function (value) {\n            defined[depName] = value;\n        };\n    }\n\n    function callDep(name) {\n        if (hasProp(waiting, name)) {\n            var args = waiting[name];\n            delete waiting[name];\n            defining[name] = true;\n            main.apply(undef, args);\n        }\n\n        if (!hasProp(defined, name) && !hasProp(defining, name)) {\n            throw new Error('No ' + name);\n        }\n        return defined[name];\n    }\n\n    //Turns a plugin!resource to [plugin, resource]\n    //with the plugin being undefined if the name\n    //did not have a plugin prefix.\n    function splitPrefix(name) {\n        var prefix,\n            index = name ? name.indexOf('!') : -1;\n        if (index > -1) {\n            prefix = name.substring(0, index);\n            name = name.substring(index + 1, name.length);\n        }\n        return [prefix, name];\n    }\n\n    /**\n     * Makes a name map, normalizing the name, and using a plugin\n     * for normalization if necessary. Grabs a ref to plugin\n     * too, as an optimization.\n     */\n    makeMap = function (name, relName) {\n        var plugin,\n            parts = splitPrefix(name),\n            prefix = parts[0];\n\n        name = parts[1];\n\n        if (prefix) {\n            prefix = normalize(prefix, relName);\n            plugin = callDep(prefix);\n        }\n\n        //Normalize according\n        if (prefix) {\n            if (plugin && plugin.normalize) {\n                name = plugin.normalize(name, makeNormalize(relName));\n            } else {\n                name = normalize(name, relName);\n            }\n        } else {\n            name = normalize(name, relName);\n            parts = splitPrefix(name);\n            prefix = parts[0];\n            name = parts[1];\n            if (prefix) {\n                plugin = callDep(prefix);\n            }\n        }\n\n        //Using ridiculous property names for space reasons\n        return {\n            f: prefix ? prefix + '!' + name : name, //fullName\n            n: name,\n            pr: prefix,\n            p: plugin\n        };\n    };\n\n    function makeConfig(name) {\n        return function () {\n            return (config && config.config && config.config[name]) || {};\n        };\n    }\n\n    handlers = {\n        require: function (name) {\n            return makeRequire(name);\n        },\n        exports: function (name) {\n            var e = defined[name];\n            if (typeof e !== 'undefined') {\n                return e;\n            } else {\n                return (defined[name] = {});\n            }\n        },\n        module: function (name) {\n            return {\n                id: name,\n                uri: '',\n                exports: defined[name],\n                config: makeConfig(name)\n            };\n        }\n    };\n\n    main = function (name, deps, callback, relName) {\n        var cjsModule, depName, ret, map, i,\n            args = [],\n            callbackType = typeof callback,\n            usingExports;\n\n        //Use name if no relName\n        relName = relName || name;\n\n        //Call the callback to define the module, if necessary.\n        if (callbackType === 'undefined' || callbackType === 'function') {\n            //Pull out the defined dependencies and pass the ordered\n            //values to the callback.\n            //Default to [require, exports, module] if no deps\n            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;\n            for (i = 0; i < deps.length; i += 1) {\n                map = makeMap(deps[i], relName);\n                depName = map.f;\n\n                //Fast path CommonJS standard dependencies.\n                if (depName === \"require\") {\n                    args[i] = handlers.require(name);\n                } else if (depName === \"exports\") {\n                    //CommonJS module spec 1.1\n                    args[i] = handlers.exports(name);\n                    usingExports = true;\n                } else if (depName === \"module\") {\n                    //CommonJS module spec 1.1\n                    cjsModule = args[i] = handlers.module(name);\n                } else if (hasProp(defined, depName) ||\n                           hasProp(waiting, depName) ||\n                           hasProp(defining, depName)) {\n                    args[i] = callDep(depName);\n                } else if (map.p) {\n                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});\n                    args[i] = defined[depName];\n                } else {\n                    throw new Error(name + ' missing ' + depName);\n                }\n            }\n\n            ret = callback ? callback.apply(defined[name], args) : undefined;\n\n            if (name) {\n                //If setting exports via \"module\" is in play,\n                //favor that over return value and exports. After that,\n                //favor a non-undefined return value over exports use.\n                if (cjsModule && cjsModule.exports !== undef &&\n                        cjsModule.exports !== defined[name]) {\n                    defined[name] = cjsModule.exports;\n                } else if (ret !== undef || !usingExports) {\n                    //Use the return value from the function.\n                    defined[name] = ret;\n                }\n            }\n        } else if (name) {\n            //May just be an object definition for the module. Only\n            //worry about defining if have a module name.\n            defined[name] = callback;\n        }\n    };\n\n    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {\n        if (typeof deps === \"string\") {\n            if (handlers[deps]) {\n                //callback in this case is really relName\n                return handlers[deps](callback);\n            }\n            //Just return the module wanted. In this scenario, the\n            //deps arg is the module name, and second arg (if passed)\n            //is just the relName.\n            //Normalize module name, if it contains . or ..\n            return callDep(makeMap(deps, callback).f);\n        } else if (!deps.splice) {\n            //deps is a config object, not an array.\n            config = deps;\n            if (config.deps) {\n                req(config.deps, config.callback);\n            }\n            if (!callback) {\n                return;\n            }\n\n            if (callback.splice) {\n                //callback is an array, which means it is a dependency list.\n                //Adjust args if there are dependencies\n                deps = callback;\n                callback = relName;\n                relName = null;\n            } else {\n                deps = undef;\n            }\n        }\n\n        //Support require(['a'])\n        callback = callback || function () {};\n\n        //If relName is a function, it is an errback handler,\n        //so remove it.\n        if (typeof relName === 'function') {\n            relName = forceSync;\n            forceSync = alt;\n        }\n\n        //Simulate async callback;\n        if (forceSync) {\n            main(undef, deps, callback, relName);\n        } else {\n            //Using a non-zero value because of concern for what old browsers\n            //do, and latest browsers \"upgrade\" to 4 if lower value is used:\n            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:\n            //If want a value immediately, use require('id') instead -- something\n            //that works in almond on the global level, but not guaranteed and\n            //unlikely to work in other AMD implementations.\n            setTimeout(function () {\n                main(undef, deps, callback, relName);\n            }, 4);\n        }\n\n        return req;\n    };\n\n    /**\n     * Just drops the config on the floor, but returns req in case\n     * the config return value is used.\n     */\n    req.config = function (cfg) {\n        return req(cfg);\n    };\n\n    /**\n     * Expose module registry for debugging and tooling\n     */\n    requirejs._defined = defined;\n\n    define = function (name, deps, callback) {\n        if (typeof name !== 'string') {\n            throw new Error('See almond README: incorrect module build, no module name');\n        }\n\n        //This module may not have dependencies\n        if (!deps.splice) {\n            //deps is not an array, so probably means\n            //an object literal or factory function for\n            //the value. Adjust args.\n            callback = deps;\n            deps = [];\n        }\n\n        if (!hasProp(defined, name) && !hasProp(waiting, name)) {\n            waiting[name] = [name, deps, callback];\n        }\n    };\n\n    define.amd = {\n        jQuery: true\n    };\n}());\n\nS2.requirejs = requirejs;S2.require = require;S2.define = define;\n}\n}());\nS2.define(\"almond\", function(){});\n\n/* global jQuery:false, $:false */\r\nS2.define('jquery',[],function () {\r\n  var _$ = jQuery || $;\r\n\r\n  if (_$ == null && console && console.error) {\r\n    console.error(\r\n      'Select2: An instance of jQuery or a jQuery-compatible library was not ' +\r\n      'found. Make sure that you are including jQuery before Select2 on your ' +\r\n      'web page.'\r\n    );\r\n  }\r\n\r\n  return _$;\r\n});\r\n\nS2.define('select2/utils',[\r\n  'jquery'\r\n], function ($) {\r\n  var Utils = {};\r\n\r\n  Utils.Extend = function (ChildClass, SuperClass) {\r\n    var __hasProp = {}.hasOwnProperty;\r\n\r\n    function BaseConstructor () {\r\n      this.constructor = ChildClass;\r\n    }\r\n\r\n    for (var key in SuperClass) {\r\n      if (__hasProp.call(SuperClass, key)) {\r\n        ChildClass[key] = SuperClass[key];\r\n      }\r\n    }\r\n\r\n    BaseConstructor.prototype = SuperClass.prototype;\r\n    ChildClass.prototype = new BaseConstructor();\r\n    ChildClass.__super__ = SuperClass.prototype;\r\n\r\n    return ChildClass;\r\n  };\r\n\r\n  function getMethods (theClass) {\r\n    var proto = theClass.prototype;\r\n\r\n    var methods = [];\r\n\r\n    for (var methodName in proto) {\r\n      var m = proto[methodName];\r\n\r\n      if (typeof m !== 'function') {\r\n        continue;\r\n      }\r\n\r\n      if (methodName === 'constructor') {\r\n        continue;\r\n      }\r\n\r\n      methods.push(methodName);\r\n    }\r\n\r\n    return methods;\r\n  }\r\n\r\n  Utils.Decorate = function (SuperClass, DecoratorClass) {\r\n    var decoratedMethods = getMethods(DecoratorClass);\r\n    var superMethods = getMethods(SuperClass);\r\n\r\n    function DecoratedClass () {\r\n      var unshift = Array.prototype.unshift;\r\n\r\n      var argCount = DecoratorClass.prototype.constructor.length;\r\n\r\n      var calledConstructor = SuperClass.prototype.constructor;\r\n\r\n      if (argCount > 0) {\r\n        unshift.call(arguments, SuperClass.prototype.constructor);\r\n\r\n        calledConstructor = DecoratorClass.prototype.constructor;\r\n      }\r\n\r\n      calledConstructor.apply(this, arguments);\r\n    }\r\n\r\n    DecoratorClass.displayName = SuperClass.displayName;\r\n\r\n    function ctr () {\r\n      this.constructor = DecoratedClass;\r\n    }\r\n\r\n    DecoratedClass.prototype = new ctr();\r\n\r\n    for (var m = 0; m < superMethods.length; m++) {\r\n        var superMethod = superMethods[m];\r\n\r\n        DecoratedClass.prototype[superMethod] =\r\n          SuperClass.prototype[superMethod];\r\n    }\r\n\r\n    var calledMethod = function (methodName) {\r\n      // Stub out the original method if it's not decorating an actual method\r\n      var originalMethod = function () {};\r\n\r\n      if (methodName in DecoratedClass.prototype) {\r\n        originalMethod = DecoratedClass.prototype[methodName];\r\n      }\r\n\r\n      var decoratedMethod = DecoratorClass.prototype[methodName];\r\n\r\n      return function () {\r\n        var unshift = Array.prototype.unshift;\r\n\r\n        unshift.call(arguments, originalMethod);\r\n\r\n        return decoratedMethod.apply(this, arguments);\r\n      };\r\n    };\r\n\r\n    for (var d = 0; d < decoratedMethods.length; d++) {\r\n      var decoratedMethod = decoratedMethods[d];\r\n\r\n      DecoratedClass.prototype[decoratedMethod] = calledMethod(decoratedMethod);\r\n    }\r\n\r\n    return DecoratedClass;\r\n  };\r\n\r\n  var Observable = function () {\r\n    this.listeners = {};\r\n  };\r\n\r\n  Observable.prototype.on = function (event, callback) {\r\n    this.listeners = this.listeners || {};\r\n\r\n    if (event in this.listeners) {\r\n      this.listeners[event].push(callback);\r\n    } else {\r\n      this.listeners[event] = [callback];\r\n    }\r\n  };\r\n\r\n  Observable.prototype.trigger = function (event) {\r\n    var slice = Array.prototype.slice;\r\n    var params = slice.call(arguments, 1);\r\n\r\n    this.listeners = this.listeners || {};\r\n\r\n    // Params should always come in as an array\r\n    if (params == null) {\r\n      params = [];\r\n    }\r\n\r\n    // If there are no arguments to the event, use a temporary object\r\n    if (params.length === 0) {\r\n      params.push({});\r\n    }\r\n\r\n    // Set the `_type` of the first object to the event\r\n    params[0]._type = event;\r\n\r\n    if (event in this.listeners) {\r\n      this.invoke(this.listeners[event], slice.call(arguments, 1));\r\n    }\r\n\r\n    if ('*' in this.listeners) {\r\n      this.invoke(this.listeners['*'], arguments);\r\n    }\r\n  };\r\n\r\n  Observable.prototype.invoke = function (listeners, params) {\r\n    for (var i = 0, len = listeners.length; i < len; i++) {\r\n      listeners[i].apply(this, params);\r\n    }\r\n  };\r\n\r\n  Utils.Observable = Observable;\r\n\r\n  Utils.generateChars = function (length) {\r\n    var chars = '';\r\n\r\n    for (var i = 0; i < length; i++) {\r\n      var randomChar = Math.floor(Math.random() * 36);\r\n      chars += randomChar.toString(36);\r\n    }\r\n\r\n    return chars;\r\n  };\r\n\r\n  Utils.bind = function (func, context) {\r\n    return function () {\r\n      func.apply(context, arguments);\r\n    };\r\n  };\r\n\r\n  Utils._convertData = function (data) {\r\n    for (var originalKey in data) {\r\n      var keys = originalKey.split('-');\r\n\r\n      var dataLevel = data;\r\n\r\n      if (keys.length === 1) {\r\n        continue;\r\n      }\r\n\r\n      for (var k = 0; k < keys.length; k++) {\r\n        var key = keys[k];\r\n\r\n        // Lowercase the first letter\r\n        // By default, dash-separated becomes camelCase\r\n        key = key.substring(0, 1).toLowerCase() + key.substring(1);\r\n\r\n        if (!(key in dataLevel)) {\r\n          dataLevel[key] = {};\r\n        }\r\n\r\n        if (k == keys.length - 1) {\r\n          dataLevel[key] = data[originalKey];\r\n        }\r\n\r\n        dataLevel = dataLevel[key];\r\n      }\r\n\r\n      delete data[originalKey];\r\n    }\r\n\r\n    return data;\r\n  };\r\n\r\n  Utils.hasScroll = function (index, el) {\r\n    // Adapted from the function created by @ShadowScripter\r\n    // and adapted by @BillBarry on the Stack Exchange Code Review website.\r\n    // The original code can be found at\r\n    // http://codereview.stackexchange.com/q/13338\r\n    // and was designed to be used with the Sizzle selector engine.\r\n\r\n    var $el = $(el);\r\n    var overflowX = el.style.overflowX;\r\n    var overflowY = el.style.overflowY;\r\n\r\n    //Check both x and y declarations\r\n    if (overflowX === overflowY &&\r\n        (overflowY === 'hidden' || overflowY === 'visible')) {\r\n      return false;\r\n    }\r\n\r\n    if (overflowX === 'scroll' || overflowY === 'scroll') {\r\n      return true;\r\n    }\r\n\r\n    return ($el.innerHeight() < el.scrollHeight ||\r\n      $el.innerWidth() < el.scrollWidth);\r\n  };\r\n\r\n  Utils.escapeMarkup = function (markup) {\r\n    var replaceMap = {\r\n      '\\\\': '&#92;',\r\n      '&': '&amp;',\r\n      '<': '&lt;',\r\n      '>': '&gt;',\r\n      '\"': '&quot;',\r\n      '\\'': '&#39;',\r\n      '/': '&#47;'\r\n    };\r\n\r\n    // Do not try to escape the markup if it's not a string\r\n    if (typeof markup !== 'string') {\r\n      return markup;\r\n    }\r\n\r\n    return String(markup).replace(/[&<>\"'\\/\\\\]/g, function (match) {\r\n      return replaceMap[match];\r\n    });\r\n  };\r\n\r\n  // Append an array of jQuery nodes to a given element.\r\n  Utils.appendMany = function ($element, $nodes) {\r\n    // jQuery 1.7.x does not support $.fn.append() with an array\r\n    // Fall back to a jQuery object collection using $.fn.add()\r\n    if ($.fn.jquery.substr(0, 3) === '1.7') {\r\n      var $jqNodes = $();\r\n\r\n      $.map($nodes, function (node) {\r\n        $jqNodes = $jqNodes.add(node);\r\n      });\r\n\r\n      $nodes = $jqNodes;\r\n    }\r\n\r\n    $element.append($nodes);\r\n  };\r\n\r\n  return Utils;\r\n});\r\n\nS2.define('select2/results',[\r\n  'jquery',\r\n  './utils'\r\n], function ($, Utils) {\r\n  function Results ($element, options, dataAdapter) {\r\n    this.$element = $element;\r\n    this.data = dataAdapter;\r\n    this.options = options;\r\n\r\n    Results.__super__.constructor.call(this);\r\n  }\r\n\r\n  Utils.Extend(Results, Utils.Observable);\r\n\r\n  Results.prototype.render = function () {\r\n    var $results = $(\r\n      '<ul class=\"select2-results__options\" role=\"tree\"></ul>'\r\n    );\r\n\r\n    if (this.options.get('multiple')) {\r\n      $results.attr('aria-multiselectable', 'true');\r\n    }\r\n\r\n    this.$results = $results;\r\n\r\n    return $results;\r\n  };\r\n\r\n  Results.prototype.clear = function () {\r\n    this.$results.empty();\r\n  };\r\n\r\n  Results.prototype.displayMessage = function (params) {\r\n    var escapeMarkup = this.options.get('escapeMarkup');\r\n\r\n    this.clear();\r\n    this.hideLoading();\r\n\r\n    var $message = $(\r\n      '<li role=\"treeitem\" aria-live=\"assertive\"' +\r\n      ' class=\"select2-results__option\"></li>'\r\n    );\r\n\r\n    var message = this.options.get('translations').get(params.message);\r\n\r\n    $message.append(\r\n      escapeMarkup(\r\n        message(params.args)\r\n      )\r\n    );\r\n\r\n    $message[0].className += ' select2-results__message';\r\n\r\n    this.$results.append($message);\r\n  };\r\n\r\n  Results.prototype.hideMessages = function () {\r\n    this.$results.find('.select2-results__message').remove();\r\n  };\r\n\r\n  Results.prototype.append = function (data) {\r\n    this.hideLoading();\r\n\r\n    var $options = [];\r\n\r\n    if (data.results == null || data.results.length === 0) {\r\n      if (this.$results.children().length === 0) {\r\n        this.trigger('results:message', {\r\n          message: 'noResults'\r\n        });\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    data.results = this.sort(data.results);\r\n\r\n    for (var d = 0; d < data.results.length; d++) {\r\n      var item = data.results[d];\r\n\r\n      var $option = this.option(item);\r\n\r\n      $options.push($option);\r\n    }\r\n\r\n    this.$results.append($options);\r\n  };\r\n\r\n  Results.prototype.position = function ($results, $dropdown) {\r\n    var $resultsContainer = $dropdown.find('.select2-results');\r\n    $resultsContainer.append($results);\r\n  };\r\n\r\n  Results.prototype.sort = function (data) {\r\n    var sorter = this.options.get('sorter');\r\n\r\n    return sorter(data);\r\n  };\r\n\r\n  Results.prototype.highlightFirstItem = function () {\r\n    var $options = this.$results\r\n      .find('.select2-results__option[aria-selected]');\r\n\r\n    var $selected = $options.filter('[aria-selected=true]');\r\n\r\n    // Check if there are any selected options\r\n    if ($selected.length > 0) {\r\n      // If there are selected options, highlight the first\r\n      $selected.first().trigger('mouseenter');\r\n    } else {\r\n      // If there are no selected options, highlight the first option\r\n      // in the dropdown\r\n      $options.first().trigger('mouseenter');\r\n    }\r\n\r\n    this.ensureHighlightVisible();\r\n  };\r\n\r\n  Results.prototype.setClasses = function () {\r\n    var self = this;\r\n\r\n    this.data.current(function (selected) {\r\n      var selectedIds = $.map(selected, function (s) {\r\n        return s.id.toString();\r\n      });\r\n\r\n      var $options = self.$results\r\n        .find('.select2-results__option[aria-selected]');\r\n\r\n      $options.each(function () {\r\n        var $option = $(this);\r\n\r\n        var item = $.data(this, 'data');\r\n\r\n        // id needs to be converted to a string when comparing\r\n        var id = '' + item.id;\r\n\r\n        if ((item.element != null && item.element.selected) ||\r\n            (item.element == null && $.inArray(id, selectedIds) > -1)) {\r\n          $option.attr('aria-selected', 'true');\r\n        } else {\r\n          $option.attr('aria-selected', 'false');\r\n        }\r\n      });\r\n\r\n    });\r\n  };\r\n\r\n  Results.prototype.showLoading = function (params) {\r\n    this.hideLoading();\r\n\r\n    var loadingMore = this.options.get('translations').get('searching');\r\n\r\n    var loading = {\r\n      disabled: true,\r\n      loading: true,\r\n      text: loadingMore(params)\r\n    };\r\n    var $loading = this.option(loading);\r\n    $loading.className += ' loading-results';\r\n\r\n    this.$results.prepend($loading);\r\n  };\r\n\r\n  Results.prototype.hideLoading = function () {\r\n    this.$results.find('.loading-results').remove();\r\n  };\r\n\r\n  Results.prototype.option = function (data) {\r\n    var option = document.createElement('li');\r\n    option.className = 'select2-results__option';\r\n\r\n    var attrs = {\r\n      'role': 'treeitem',\r\n      'aria-selected': 'false'\r\n    };\r\n\r\n    if (data.disabled) {\r\n      delete attrs['aria-selected'];\r\n      attrs['aria-disabled'] = 'true';\r\n    }\r\n\r\n    if (data.id == null) {\r\n      delete attrs['aria-selected'];\r\n    }\r\n\r\n    if (data._resultId != null) {\r\n      option.id = data._resultId;\r\n    }\r\n\r\n    if (data.title) {\r\n      option.title = data.title;\r\n    }\r\n\r\n    if (data.children) {\r\n      attrs.role = 'group';\r\n      attrs['aria-label'] = data.text;\r\n      delete attrs['aria-selected'];\r\n    }\r\n\r\n    for (var attr in attrs) {\r\n      var val = attrs[attr];\r\n\r\n      option.setAttribute(attr, val);\r\n    }\r\n\r\n    if (data.children) {\r\n      var $option = $(option);\r\n\r\n      var label = document.createElement('strong');\r\n      label.className = 'select2-results__group';\r\n\r\n      var $label = $(label);\r\n      this.template(data, label);\r\n\r\n      var $children = [];\r\n\r\n      for (var c = 0; c < data.children.length; c++) {\r\n        var child = data.children[c];\r\n\r\n        var $child = this.option(child);\r\n\r\n        $children.push($child);\r\n      }\r\n\r\n      var $childrenContainer = $('<ul></ul>', {\r\n        'class': 'select2-results__options select2-results__options--nested'\r\n      });\r\n\r\n      $childrenContainer.append($children);\r\n\r\n      $option.append(label);\r\n      $option.append($childrenContainer);\r\n    } else {\r\n      this.template(data, option);\r\n    }\r\n\r\n    $.data(option, 'data', data);\r\n\r\n    return option;\r\n  };\r\n\r\n  Results.prototype.bind = function (container, $container) {\r\n    var self = this;\r\n\r\n    var id = container.id + '-results';\r\n\r\n    this.$results.attr('id', id);\r\n\r\n    container.on('results:all', function (params) {\r\n      self.clear();\r\n      self.append(params.data);\r\n\r\n      if (container.isOpen()) {\r\n        self.setClasses();\r\n        self.highlightFirstItem();\r\n      }\r\n    });\r\n\r\n    container.on('results:append', function (params) {\r\n      self.append(params.data);\r\n\r\n      if (container.isOpen()) {\r\n        self.setClasses();\r\n      }\r\n    });\r\n\r\n    container.on('query', function (params) {\r\n      self.hideMessages();\r\n      self.showLoading(params);\r\n    });\r\n\r\n    container.on('select', function () {\r\n      if (!container.isOpen()) {\r\n        return;\r\n      }\r\n\r\n      self.setClasses();\r\n      self.highlightFirstItem();\r\n    });\r\n\r\n    container.on('unselect', function () {\r\n      if (!container.isOpen()) {\r\n        return;\r\n      }\r\n\r\n      self.setClasses();\r\n      self.highlightFirstItem();\r\n    });\r\n\r\n    container.on('open', function () {\r\n      // When the dropdown is open, aria-expended=\"true\"\r\n      self.$results.attr('aria-expanded', 'true');\r\n      self.$results.attr('aria-hidden', 'false');\r\n\r\n      self.setClasses();\r\n      self.ensureHighlightVisible();\r\n    });\r\n\r\n    container.on('close', function () {\r\n      // When the dropdown is closed, aria-expended=\"false\"\r\n      self.$results.attr('aria-expanded', 'false');\r\n      self.$results.attr('aria-hidden', 'true');\r\n      self.$results.removeAttr('aria-activedescendant');\r\n    });\r\n\r\n    container.on('results:toggle', function () {\r\n      var $highlighted = self.getHighlightedResults();\r\n\r\n      if ($highlighted.length === 0) {\r\n        return;\r\n      }\r\n\r\n      $highlighted.trigger('mouseup');\r\n    });\r\n\r\n    container.on('results:select', function () {\r\n      var $highlighted = self.getHighlightedResults();\r\n\r\n      if ($highlighted.length === 0) {\r\n        return;\r\n      }\r\n\r\n      var data = $highlighted.data('data');\r\n\r\n      if ($highlighted.attr('aria-selected') == 'true') {\r\n        self.trigger('close', {});\r\n      } else {\r\n        self.trigger('select', {\r\n          data: data\r\n        });\r\n      }\r\n    });\r\n\r\n    container.on('results:previous', function () {\r\n      var $highlighted = self.getHighlightedResults();\r\n\r\n      var $options = self.$results.find('[aria-selected]');\r\n\r\n      var currentIndex = $options.index($highlighted);\r\n\r\n      // If we are already at te top, don't move further\r\n      if (currentIndex === 0) {\r\n        return;\r\n      }\r\n\r\n      var nextIndex = currentIndex - 1;\r\n\r\n      // If none are highlighted, highlight the first\r\n      if ($highlighted.length === 0) {\r\n        nextIndex = 0;\r\n      }\r\n\r\n      var $next = $options.eq(nextIndex);\r\n\r\n      $next.trigger('mouseenter');\r\n\r\n      var currentOffset = self.$results.offset().top;\r\n      var nextTop = $next.offset().top;\r\n      var nextOffset = self.$results.scrollTop() + (nextTop - currentOffset);\r\n\r\n      if (nextIndex === 0) {\r\n        self.$results.scrollTop(0);\r\n      } else if (nextTop - currentOffset < 0) {\r\n        self.$results.scrollTop(nextOffset);\r\n      }\r\n    });\r\n\r\n    container.on('results:next', function () {\r\n      var $highlighted = self.getHighlightedResults();\r\n\r\n      var $options = self.$results.find('[aria-selected]');\r\n\r\n      var currentIndex = $options.index($highlighted);\r\n\r\n      var nextIndex = currentIndex + 1;\r\n\r\n      // If we are at the last option, stay there\r\n      if (nextIndex >= $options.length) {\r\n        return;\r\n      }\r\n\r\n      var $next = $options.eq(nextIndex);\r\n\r\n      $next.trigger('mouseenter');\r\n\r\n      var currentOffset = self.$results.offset().top +\r\n        self.$results.outerHeight(false);\r\n      var nextBottom = $next.offset().top + $next.outerHeight(false);\r\n      var nextOffset = self.$results.scrollTop() + nextBottom - currentOffset;\r\n\r\n      if (nextIndex === 0) {\r\n        self.$results.scrollTop(0);\r\n      } else if (nextBottom > currentOffset) {\r\n        self.$results.scrollTop(nextOffset);\r\n      }\r\n    });\r\n\r\n    container.on('results:focus', function (params) {\r\n      params.element.addClass('select2-results__option--highlighted');\r\n    });\r\n\r\n    container.on('results:message', function (params) {\r\n      self.displayMessage(params);\r\n    });\r\n\r\n    if ($.fn.mousewheel) {\r\n      this.$results.on('mousewheel', function (e) {\r\n        var top = self.$results.scrollTop();\r\n\r\n        var bottom = self.$results.get(0).scrollHeight - top + e.deltaY;\r\n\r\n        var isAtTop = e.deltaY > 0 && top - e.deltaY <= 0;\r\n        var isAtBottom = e.deltaY < 0 && bottom <= self.$results.height();\r\n\r\n        if (isAtTop) {\r\n          self.$results.scrollTop(0);\r\n\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        } else if (isAtBottom) {\r\n          self.$results.scrollTop(\r\n            self.$results.get(0).scrollHeight - self.$results.height()\r\n          );\r\n\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        }\r\n      });\r\n    }\r\n\r\n    this.$results.on('mouseup', '.select2-results__option[aria-selected]',\r\n      function (evt) {\r\n      var $this = $(this);\r\n\r\n      var data = $this.data('data');\r\n\r\n      if ($this.attr('aria-selected') === 'true') {\r\n        if (self.options.get('multiple')) {\r\n          self.trigger('unselect', {\r\n            originalEvent: evt,\r\n            data: data\r\n          });\r\n        } else {\r\n          self.trigger('close', {});\r\n        }\r\n\r\n        return;\r\n      }\r\n\r\n      self.trigger('select', {\r\n        originalEvent: evt,\r\n        data: data\r\n      });\r\n    });\r\n\r\n    this.$results.on('mouseenter', '.select2-results__option[aria-selected]',\r\n      function (evt) {\r\n      var data = $(this).data('data');\r\n\r\n      self.getHighlightedResults()\r\n          .removeClass('select2-results__option--highlighted');\r\n\r\n      self.trigger('results:focus', {\r\n        data: data,\r\n        element: $(this)\r\n      });\r\n    });\r\n  };\r\n\r\n  Results.prototype.getHighlightedResults = function () {\r\n    var $highlighted = this.$results\r\n    .find('.select2-results__option--highlighted');\r\n\r\n    return $highlighted;\r\n  };\r\n\r\n  Results.prototype.destroy = function () {\r\n    this.$results.remove();\r\n  };\r\n\r\n  Results.prototype.ensureHighlightVisible = function () {\r\n    var $highlighted = this.getHighlightedResults();\r\n\r\n    if ($highlighted.length === 0) {\r\n      return;\r\n    }\r\n\r\n    var $options = this.$results.find('[aria-selected]');\r\n\r\n    var currentIndex = $options.index($highlighted);\r\n\r\n    var currentOffset = this.$results.offset().top;\r\n    var nextTop = $highlighted.offset().top;\r\n    var nextOffset = this.$results.scrollTop() + (nextTop - currentOffset);\r\n\r\n    var offsetDelta = nextTop - currentOffset;\r\n    nextOffset -= $highlighted.outerHeight(false) * 2;\r\n\r\n    if (currentIndex <= 2) {\r\n      this.$results.scrollTop(0);\r\n    } else if (offsetDelta > this.$results.outerHeight() || offsetDelta < 0) {\r\n      this.$results.scrollTop(nextOffset);\r\n    }\r\n  };\r\n\r\n  Results.prototype.template = function (result, container) {\r\n    var template = this.options.get('templateResult');\r\n    var escapeMarkup = this.options.get('escapeMarkup');\r\n\r\n    var content = template(result, container);\r\n\r\n    if (content == null) {\r\n      container.style.display = 'none';\r\n    } else if (typeof content === 'string') {\r\n      container.innerHTML = escapeMarkup(content);\r\n    } else {\r\n      $(container).append(content);\r\n    }\r\n  };\r\n\r\n  return Results;\r\n});\r\n\nS2.define('select2/keys',[\r\n\r\n], function () {\r\n  var KEYS = {\r\n    BACKSPACE: 8,\r\n    TAB: 9,\r\n    ENTER: 13,\r\n    SHIFT: 16,\r\n    CTRL: 17,\r\n    ALT: 18,\r\n    ESC: 27,\r\n    SPACE: 32,\r\n    PAGE_UP: 33,\r\n    PAGE_DOWN: 34,\r\n    END: 35,\r\n    HOME: 36,\r\n    LEFT: 37,\r\n    UP: 38,\r\n    RIGHT: 39,\r\n    DOWN: 40,\r\n    DELETE: 46\r\n  };\r\n\r\n  return KEYS;\r\n});\r\n\nS2.define('select2/selection/base',[\r\n  'jquery',\r\n  '../utils',\r\n  '../keys'\r\n], function ($, Utils, KEYS) {\r\n  function BaseSelection ($element, options) {\r\n    this.$element = $element;\r\n    this.options = options;\r\n\r\n    BaseSelection.__super__.constructor.call(this);\r\n  }\r\n\r\n  Utils.Extend(BaseSelection, Utils.Observable);\r\n\r\n  BaseSelection.prototype.render = function () {\r\n    var $selection = $(\r\n      '<span class=\"select2-selection\" role=\"combobox\" ' +\r\n      ' aria-haspopup=\"true\" aria-expanded=\"false\">' +\r\n      '</span>'\r\n    );\r\n\r\n    this._tabindex = 0;\r\n\r\n    if (this.$element.data('old-tabindex') != null) {\r\n      this._tabindex = this.$element.data('old-tabindex');\r\n    } else if (this.$element.attr('tabindex') != null) {\r\n      this._tabindex = this.$element.attr('tabindex');\r\n    }\r\n\r\n    $selection.attr('title', this.$element.attr('title'));\r\n    $selection.attr('tabindex', this._tabindex);\r\n\r\n    this.$selection = $selection;\r\n\r\n    return $selection;\r\n  };\r\n\r\n  BaseSelection.prototype.bind = function (container, $container) {\r\n    var self = this;\r\n\r\n    var id = container.id + '-container';\r\n    var resultsId = container.id + '-results';\r\n\r\n    this.container = container;\r\n\r\n    this.$selection.on('focus', function (evt) {\r\n      self.trigger('focus', evt);\r\n    });\r\n\r\n    this.$selection.on('blur', function (evt) {\r\n      self._handleBlur(evt);\r\n    });\r\n\r\n    this.$selection.on('keydown', function (evt) {\r\n      self.trigger('keypress', evt);\r\n\r\n      if (evt.which === KEYS.SPACE) {\r\n        evt.preventDefault();\r\n      }\r\n    });\r\n\r\n    container.on('results:focus', function (params) {\r\n      self.$selection.attr('aria-activedescendant', params.data._resultId);\r\n    });\r\n\r\n    container.on('selection:update', function (params) {\r\n      self.update(params.data);\r\n    });\r\n\r\n    container.on('open', function () {\r\n      // When the dropdown is open, aria-expanded=\"true\"\r\n      self.$selection.attr('aria-expanded', 'true');\r\n      self.$selection.attr('aria-owns', resultsId);\r\n\r\n      self._attachCloseHandler(container);\r\n    });\r\n\r\n    container.on('close', function () {\r\n      // When the dropdown is closed, aria-expanded=\"false\"\r\n      self.$selection.attr('aria-expanded', 'false');\r\n      self.$selection.removeAttr('aria-activedescendant');\r\n      self.$selection.removeAttr('aria-owns');\r\n\r\n      self.$selection.focus();\r\n\r\n      self._detachCloseHandler(container);\r\n    });\r\n\r\n    container.on('enable', function () {\r\n      self.$selection.attr('tabindex', self._tabindex);\r\n    });\r\n\r\n    container.on('disable', function () {\r\n      self.$selection.attr('tabindex', '-1');\r\n    });\r\n  };\r\n\r\n  BaseSelection.prototype._handleBlur = function (evt) {\r\n    var self = this;\r\n\r\n    // This needs to be delayed as the active element is the body when the tab\r\n    // key is pressed, possibly along with others.\r\n    window.setTimeout(function () {\r\n      // Don't trigger `blur` if the focus is still in the selection\r\n      if (\r\n        (document.activeElement == self.$selection[0]) ||\r\n        ($.contains(self.$selection[0], document.activeElement))\r\n      ) {\r\n        return;\r\n      }\r\n\r\n      self.trigger('blur', evt);\r\n    }, 1);\r\n  };\r\n\r\n  BaseSelection.prototype._attachCloseHandler = function (container) {\r\n    var self = this;\r\n\r\n    $(document.body).on('mousedown.select2.' + container.id, function (e) {\r\n      var $target = $(e.target);\r\n\r\n      var $select = $target.closest('.select2');\r\n\r\n      var $all = $('.select2.select2-container--open');\r\n\r\n      $all.each(function () {\r\n        var $this = $(this);\r\n\r\n        if (this == $select[0]) {\r\n          return;\r\n        }\r\n\r\n        var $element = $this.data('element');\r\n\r\n        $element.select2('close');\r\n      });\r\n    });\r\n  };\r\n\r\n  BaseSelection.prototype._detachCloseHandler = function (container) {\r\n    $(document.body).off('mousedown.select2.' + container.id);\r\n  };\r\n\r\n  BaseSelection.prototype.position = function ($selection, $container) {\r\n    var $selectionContainer = $container.find('.selection');\r\n    $selectionContainer.append($selection);\r\n  };\r\n\r\n  BaseSelection.prototype.destroy = function () {\r\n    this._detachCloseHandler(this.container);\r\n  };\r\n\r\n  BaseSelection.prototype.update = function (data) {\r\n    throw new Error('The `update` method must be defined in child classes.');\r\n  };\r\n\r\n  return BaseSelection;\r\n});\r\n\nS2.define('select2/selection/single',[\r\n  'jquery',\r\n  './base',\r\n  '../utils',\r\n  '../keys'\r\n], function ($, BaseSelection, Utils, KEYS) {\r\n  function SingleSelection () {\r\n    SingleSelection.__super__.constructor.apply(this, arguments);\r\n  }\r\n\r\n  Utils.Extend(SingleSelection, BaseSelection);\r\n\r\n  SingleSelection.prototype.render = function () {\r\n    var $selection = SingleSelection.__super__.render.call(this);\r\n\r\n    $selection.addClass('select2-selection--single');\r\n\r\n    $selection.html(\r\n      '<span class=\"select2-selection__rendered\"></span>' +\r\n      '<span class=\"select2-selection__arrow\" role=\"presentation\">' +\r\n        '<b role=\"presentation\"></b>' +\r\n      '</span>'\r\n    );\r\n\r\n    return $selection;\r\n  };\r\n\r\n  SingleSelection.prototype.bind = function (container, $container) {\r\n    var self = this;\r\n\r\n    SingleSelection.__super__.bind.apply(this, arguments);\r\n\r\n    var id = container.id + '-container';\r\n\r\n    this.$selection.find('.select2-selection__rendered').attr('id', id);\r\n    this.$selection.attr('aria-labelledby', id);\r\n\r\n    this.$selection.on('mousedown', function (evt) {\r\n      // Only respond to left clicks\r\n      if (evt.which !== 1) {\r\n        return;\r\n      }\r\n\r\n      self.trigger('toggle', {\r\n        originalEvent: evt\r\n      });\r\n    });\r\n\r\n    this.$selection.on('focus', function (evt) {\r\n      // User focuses on the container\r\n    });\r\n\r\n    this.$selection.on('blur', function (evt) {\r\n      // User exits the container\r\n    });\r\n\r\n    container.on('focus', function (evt) {\r\n      if (!container.isOpen()) {\r\n        self.$selection.focus();\r\n      }\r\n    });\r\n\r\n    container.on('selection:update', function (params) {\r\n      self.update(params.data);\r\n    });\r\n  };\r\n\r\n  SingleSelection.prototype.clear = function () {\r\n    this.$selection.find('.select2-selection__rendered').empty();\r\n  };\r\n\r\n  SingleSelection.prototype.display = function (data, container) {\r\n    var template = this.options.get('templateSelection');\r\n    var escapeMarkup = this.options.get('escapeMarkup');\r\n\r\n    return escapeMarkup(template(data, container));\r\n  };\r\n\r\n  SingleSelection.prototype.selectionContainer = function () {\r\n    return $('<span></span>');\r\n  };\r\n\r\n  SingleSelection.prototype.update = function (data) {\r\n    if (data.length === 0) {\r\n      this.clear();\r\n      return;\r\n    }\r\n\r\n    var selection = data[0];\r\n\r\n    var $rendered = this.$selection.find('.select2-selection__rendered');\r\n    var formatted = this.display(selection, $rendered);\r\n\r\n    $rendered.empty().append(formatted);\r\n    $rendered.prop('title', selection.title || selection.text);\r\n  };\r\n\r\n  return SingleSelection;\r\n});\r\n\nS2.define('select2/selection/multiple',[\r\n  'jquery',\r\n  './base',\r\n  '../utils'\r\n], function ($, BaseSelection, Utils) {\r\n  function MultipleSelection ($element, options) {\r\n    MultipleSelection.__super__.constructor.apply(this, arguments);\r\n  }\r\n\r\n  Utils.Extend(MultipleSelection, BaseSelection);\r\n\r\n  MultipleSelection.prototype.render = function () {\r\n    var $selection = MultipleSelection.__super__.render.call(this);\r\n\r\n    $selection.addClass('select2-selection--multiple');\r\n\r\n    $selection.html(\r\n      '<ul class=\"select2-selection__rendered\"></ul>'\r\n    );\r\n\r\n    return $selection;\r\n  };\r\n\r\n  MultipleSelection.prototype.bind = function (container, $container) {\r\n    var self = this;\r\n\r\n    MultipleSelection.__super__.bind.apply(this, arguments);\r\n\r\n    this.$selection.on('click', function (evt) {\r\n      self.trigger('toggle', {\r\n        originalEvent: evt\r\n      });\r\n    });\r\n\r\n    this.$selection.on(\r\n      'click',\r\n      '.select2-selection__choice__remove',\r\n      function (evt) {\r\n        // Ignore the event if it is disabled\r\n        if (self.options.get('disabled')) {\r\n          return;\r\n        }\r\n\r\n        var $remove = $(this);\r\n        var $selection = $remove.parent();\r\n\r\n        var data = $selection.data('data');\r\n\r\n        self.trigger('unselect', {\r\n          originalEvent: evt,\r\n          data: data\r\n        });\r\n      }\r\n    );\r\n  };\r\n\r\n  MultipleSelection.prototype.clear = function () {\r\n    this.$selection.find('.select2-selection__rendered').empty();\r\n  };\r\n\r\n  MultipleSelection.prototype.display = function (data, container) {\r\n    var template = this.options.get('templateSelection');\r\n    var escapeMarkup = this.options.get('escapeMarkup');\r\n\r\n    return escapeMarkup(template(data, container));\r\n  };\r\n\r\n  MultipleSelection.prototype.selectionContainer = function () {\r\n    var $container = $(\r\n      '<li class=\"select2-selection__choice\">' +\r\n        '<span class=\"select2-selection__choice__remove\" role=\"presentation\">' +\r\n          '&times;' +\r\n        '</span>' +\r\n      '</li>'\r\n    );\r\n\r\n    return $container;\r\n  };\r\n\r\n  MultipleSelection.prototype.update = function (data) {\r\n    this.clear();\r\n\r\n    if (data.length === 0) {\r\n      return;\r\n    }\r\n\r\n    var $selections = [];\r\n\r\n    for (var d = 0; d < data.length; d++) {\r\n      var selection = data[d];\r\n\r\n      var $selection = this.selectionContainer();\r\n      var formatted = this.display(selection, $selection);\r\n\r\n      $selection.append(formatted);\r\n      $selection.prop('title', selection.title || selection.text);\r\n\r\n      $selection.data('data', selection);\r\n\r\n      $selections.push($selection);\r\n    }\r\n\r\n    var $rendered = this.$selection.find('.select2-selection__rendered');\r\n\r\n    Utils.appendMany($rendered, $selections);\r\n  };\r\n\r\n  return MultipleSelection;\r\n});\r\n\nS2.define('select2/selection/placeholder',[\r\n  '../utils'\r\n], function (Utils) {\r\n  function Placeholder (decorated, $element, options) {\r\n    this.placeholder = this.normalizePlaceholder(options.get('placeholder'));\r\n\r\n    decorated.call(this, $element, options);\r\n  }\r\n\r\n  Placeholder.prototype.normalizePlaceholder = function (_, placeholder) {\r\n    if (typeof placeholder === 'string') {\r\n      placeholder = {\r\n        id: '',\r\n        text: placeholder\r\n      };\r\n    }\r\n\r\n    return placeholder;\r\n  };\r\n\r\n  Placeholder.prototype.createPlaceholder = function (decorated, placeholder) {\r\n    var $placeholder = this.selectionContainer();\r\n\r\n    $placeholder.html(this.display(placeholder));\r\n    $placeholder.addClass('select2-selection__placeholder')\r\n                .removeClass('select2-selection__choice');\r\n\r\n    return $placeholder;\r\n  };\r\n\r\n  Placeholder.prototype.update = function (decorated, data) {\r\n    var singlePlaceholder = (\r\n      data.length == 1 && data[0].id != this.placeholder.id\r\n    );\r\n    var multipleSelections = data.length > 1;\r\n\r\n    if (multipleSelections || singlePlaceholder) {\r\n      return decorated.call(this, data);\r\n    }\r\n\r\n    this.clear();\r\n\r\n    var $placeholder = this.createPlaceholder(this.placeholder);\r\n\r\n    this.$selection.find('.select2-selection__rendered').append($placeholder);\r\n  };\r\n\r\n  return Placeholder;\r\n});\r\n\nS2.define('select2/selection/allowClear',[\r\n  'jquery',\r\n  '../keys'\r\n], function ($, KEYS) {\r\n  function AllowClear () { }\r\n\r\n  AllowClear.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    if (this.placeholder == null) {\r\n      if (this.options.get('debug') && window.console && console.error) {\r\n        console.error(\r\n          'Select2: The `allowClear` option should be used in combination ' +\r\n          'with the `placeholder` option.'\r\n        );\r\n      }\r\n    }\r\n\r\n    this.$selection.on('mousedown', '.select2-selection__clear',\r\n      function (evt) {\r\n        self._handleClear(evt);\r\n    });\r\n\r\n    container.on('keypress', function (evt) {\r\n      self._handleKeyboardClear(evt, container);\r\n    });\r\n  };\r\n\r\n  AllowClear.prototype._handleClear = function (_, evt) {\r\n    // Ignore the event if it is disabled\r\n    if (this.options.get('disabled')) {\r\n      return;\r\n    }\r\n\r\n    var $clear = this.$selection.find('.select2-selection__clear');\r\n\r\n    // Ignore the event if nothing has been selected\r\n    if ($clear.length === 0) {\r\n      return;\r\n    }\r\n\r\n    evt.stopPropagation();\r\n\r\n    var data = $clear.data('data');\r\n\r\n    for (var d = 0; d < data.length; d++) {\r\n      var unselectData = {\r\n        data: data[d]\r\n      };\r\n\r\n      // Trigger the `unselect` event, so people can prevent it from being\r\n      // cleared.\r\n      this.trigger('unselect', unselectData);\r\n\r\n      // If the event was prevented, don't clear it out.\r\n      if (unselectData.prevented) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.$element.val(this.placeholder.id).trigger('change');\r\n\r\n    this.trigger('toggle', {});\r\n  };\r\n\r\n  AllowClear.prototype._handleKeyboardClear = function (_, evt, container) {\r\n    if (container.isOpen()) {\r\n      return;\r\n    }\r\n\r\n    if (evt.which == KEYS.DELETE || evt.which == KEYS.BACKSPACE) {\r\n      this._handleClear(evt);\r\n    }\r\n  };\r\n\r\n  AllowClear.prototype.update = function (decorated, data) {\r\n    decorated.call(this, data);\r\n\r\n    if (this.$selection.find('.select2-selection__placeholder').length > 0 ||\r\n        data.length === 0) {\r\n      return;\r\n    }\r\n\r\n    var $remove = $(\r\n      '<span class=\"select2-selection__clear\">' +\r\n        '&times;' +\r\n      '</span>'\r\n    );\r\n    $remove.data('data', data);\r\n\r\n    this.$selection.find('.select2-selection__rendered').prepend($remove);\r\n  };\r\n\r\n  return AllowClear;\r\n});\r\n\nS2.define('select2/selection/search',[\r\n  'jquery',\r\n  '../utils',\r\n  '../keys'\r\n], function ($, Utils, KEYS) {\r\n  function Search (decorated, $element, options) {\r\n    decorated.call(this, $element, options);\r\n  }\r\n\r\n  Search.prototype.render = function (decorated) {\r\n    var $search = $(\r\n      '<li class=\"select2-search select2-search--inline\">' +\r\n        '<input class=\"select2-search__field\" type=\"search\" tabindex=\"-1\"' +\r\n        ' autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\"' +\r\n        ' spellcheck=\"false\" role=\"textbox\" aria-autocomplete=\"list\" />' +\r\n      '</li>'\r\n    );\r\n\r\n    this.$searchContainer = $search;\r\n    this.$search = $search.find('input');\r\n\r\n    var $rendered = decorated.call(this);\r\n\r\n    this._transferTabIndex();\r\n\r\n    return $rendered;\r\n  };\r\n\r\n  Search.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    container.on('open', function () {\r\n      self.$search.trigger('focus');\r\n    });\r\n\r\n    container.on('close', function () {\r\n      self.$search.val('');\r\n      self.$search.removeAttr('aria-activedescendant');\r\n      self.$search.trigger('focus');\r\n    });\r\n\r\n    container.on('enable', function () {\r\n      self.$search.prop('disabled', false);\r\n\r\n      self._transferTabIndex();\r\n    });\r\n\r\n    container.on('disable', function () {\r\n      self.$search.prop('disabled', true);\r\n    });\r\n\r\n    container.on('focus', function (evt) {\r\n      self.$search.trigger('focus');\r\n    });\r\n\r\n    container.on('results:focus', function (params) {\r\n      self.$search.attr('aria-activedescendant', params.id);\r\n    });\r\n\r\n    this.$selection.on('focusin', '.select2-search--inline', function (evt) {\r\n      self.trigger('focus', evt);\r\n    });\r\n\r\n    this.$selection.on('focusout', '.select2-search--inline', function (evt) {\r\n      self._handleBlur(evt);\r\n    });\r\n\r\n    this.$selection.on('keydown', '.select2-search--inline', function (evt) {\r\n      evt.stopPropagation();\r\n\r\n      self.trigger('keypress', evt);\r\n\r\n      self._keyUpPrevented = evt.isDefaultPrevented();\r\n\r\n      var key = evt.which;\r\n\r\n      if (key === KEYS.BACKSPACE && self.$search.val() === '') {\r\n        var $previousChoice = self.$searchContainer\r\n          .prev('.select2-selection__choice');\r\n\r\n        if ($previousChoice.length > 0) {\r\n          var item = $previousChoice.data('data');\r\n\r\n          self.searchRemoveChoice(item);\r\n\r\n          evt.preventDefault();\r\n        }\r\n      }\r\n    });\r\n\r\n    // Try to detect the IE version should the `documentMode` property that\r\n    // is stored on the document. This is only implemented in IE and is\r\n    // slightly cleaner than doing a user agent check.\r\n    // This property is not available in Edge, but Edge also doesn't have\r\n    // this bug.\r\n    var msie = document.documentMode;\r\n    var disableInputEvents = msie && msie <= 11;\r\n\r\n    // Workaround for browsers which do not support the `input` event\r\n    // This will prevent double-triggering of events for browsers which support\r\n    // both the `keyup` and `input` events.\r\n    this.$selection.on(\r\n      'input.searchcheck',\r\n      '.select2-search--inline',\r\n      function (evt) {\r\n        // IE will trigger the `input` event when a placeholder is used on a\r\n        // search box. To get around this issue, we are forced to ignore all\r\n        // `input` events in IE and keep using `keyup`.\r\n        if (disableInputEvents) {\r\n          self.$selection.off('input.search input.searchcheck');\r\n          return;\r\n        }\r\n\r\n        // Unbind the duplicated `keyup` event\r\n        self.$selection.off('keyup.search');\r\n      }\r\n    );\r\n\r\n    this.$selection.on(\r\n      'keyup.search input.search',\r\n      '.select2-search--inline',\r\n      function (evt) {\r\n        // IE will trigger the `input` event when a placeholder is used on a\r\n        // search box. To get around this issue, we are forced to ignore all\r\n        // `input` events in IE and keep using `keyup`.\r\n        if (disableInputEvents && evt.type === 'input') {\r\n          self.$selection.off('input.search input.searchcheck');\r\n          return;\r\n        }\r\n\r\n        var key = evt.which;\r\n\r\n        // We can freely ignore events from modifier keys\r\n        if (key == KEYS.SHIFT || key == KEYS.CTRL || key == KEYS.ALT) {\r\n          return;\r\n        }\r\n\r\n        // Tabbing will be handled during the `keydown` phase\r\n        if (key == KEYS.TAB) {\r\n          return;\r\n        }\r\n\r\n        self.handleSearch(evt);\r\n      }\r\n    );\r\n  };\r\n\r\n  /**\r\n   * This method will transfer the tabindex attribute from the rendered\r\n   * selection to the search box. This allows for the search box to be used as\r\n   * the primary focus instead of the selection container.\r\n   *\r\n   * @private\r\n   */\r\n  Search.prototype._transferTabIndex = function (decorated) {\r\n    this.$search.attr('tabindex', this.$selection.attr('tabindex'));\r\n    this.$selection.attr('tabindex', '-1');\r\n  };\r\n\r\n  Search.prototype.createPlaceholder = function (decorated, placeholder) {\r\n    this.$search.attr('placeholder', placeholder.text);\r\n  };\r\n\r\n  Search.prototype.update = function (decorated, data) {\r\n    var searchHadFocus = this.$search[0] == document.activeElement;\r\n\r\n    this.$search.attr('placeholder', '');\r\n\r\n    decorated.call(this, data);\r\n\r\n    this.$selection.find('.select2-selection__rendered')\r\n                   .append(this.$searchContainer);\r\n\r\n    this.resizeSearch();\r\n    if (searchHadFocus) {\r\n      this.$search.focus();\r\n    }\r\n  };\r\n\r\n  Search.prototype.handleSearch = function () {\r\n    this.resizeSearch();\r\n\r\n    if (!this._keyUpPrevented) {\r\n      var input = this.$search.val();\r\n\r\n      this.trigger('query', {\r\n        term: input\r\n      });\r\n    }\r\n\r\n    this._keyUpPrevented = false;\r\n  };\r\n\r\n  Search.prototype.searchRemoveChoice = function (decorated, item) {\r\n    this.trigger('unselect', {\r\n      data: item\r\n    });\r\n\r\n    this.$search.val(item.text);\r\n    this.handleSearch();\r\n  };\r\n\r\n  Search.prototype.resizeSearch = function () {\r\n    this.$search.css('width', '25px');\r\n\r\n    var width = '';\r\n\r\n    if (this.$search.attr('placeholder') !== '') {\r\n      width = this.$selection.find('.select2-selection__rendered').innerWidth();\r\n    } else {\r\n      var minimumWidth = this.$search.val().length + 1;\r\n\r\n      width = (minimumWidth * 0.75) + 'em';\r\n    }\r\n\r\n    this.$search.css('width', width);\r\n  };\r\n\r\n  return Search;\r\n});\r\n\nS2.define('select2/selection/eventRelay',[\r\n  'jquery'\r\n], function ($) {\r\n  function EventRelay () { }\r\n\r\n  EventRelay.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n    var relayEvents = [\r\n      'open', 'opening',\r\n      'close', 'closing',\r\n      'select', 'selecting',\r\n      'unselect', 'unselecting'\r\n    ];\r\n\r\n    var preventableEvents = ['opening', 'closing', 'selecting', 'unselecting'];\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    container.on('*', function (name, params) {\r\n      // Ignore events that should not be relayed\r\n      if ($.inArray(name, relayEvents) === -1) {\r\n        return;\r\n      }\r\n\r\n      // The parameters should always be an object\r\n      params = params || {};\r\n\r\n      // Generate the jQuery event for the Select2 event\r\n      var evt = $.Event('select2:' + name, {\r\n        params: params\r\n      });\r\n\r\n      self.$element.trigger(evt);\r\n\r\n      // Only handle preventable events if it was one\r\n      if ($.inArray(name, preventableEvents) === -1) {\r\n        return;\r\n      }\r\n\r\n      params.prevented = evt.isDefaultPrevented();\r\n    });\r\n  };\r\n\r\n  return EventRelay;\r\n});\r\n\nS2.define('select2/translation',[\r\n  'jquery',\r\n  'require'\r\n], function ($, require) {\r\n  function Translation (dict) {\r\n    this.dict = dict || {};\r\n  }\r\n\r\n  Translation.prototype.all = function () {\r\n    return this.dict;\r\n  };\r\n\r\n  Translation.prototype.get = function (key) {\r\n    return this.dict[key];\r\n  };\r\n\r\n  Translation.prototype.extend = function (translation) {\r\n    this.dict = $.extend({}, translation.all(), this.dict);\r\n  };\r\n\r\n  // Static functions\r\n\r\n  Translation._cache = {};\r\n\r\n  Translation.loadPath = function (path) {\r\n    if (!(path in Translation._cache)) {\r\n      var translations = require(path);\r\n\r\n      Translation._cache[path] = translations;\r\n    }\r\n\r\n    return new Translation(Translation._cache[path]);\r\n  };\r\n\r\n  return Translation;\r\n});\r\n\nS2.define('select2/diacritics',[\r\n\r\n], function () {\r\n  var diacritics = {\r\n    '\\u24B6': 'A',\r\n    '\\uFF21': 'A',\r\n    '\\u00C0': 'A',\r\n    '\\u00C1': 'A',\r\n    '\\u00C2': 'A',\r\n    '\\u1EA6': 'A',\r\n    '\\u1EA4': 'A',\r\n    '\\u1EAA': 'A',\r\n    '\\u1EA8': 'A',\r\n    '\\u00C3': 'A',\r\n    '\\u0100': 'A',\r\n    '\\u0102': 'A',\r\n    '\\u1EB0': 'A',\r\n    '\\u1EAE': 'A',\r\n    '\\u1EB4': 'A',\r\n    '\\u1EB2': 'A',\r\n    '\\u0226': 'A',\r\n    '\\u01E0': 'A',\r\n    '\\u00C4': 'A',\r\n    '\\u01DE': 'A',\r\n    '\\u1EA2': 'A',\r\n    '\\u00C5': 'A',\r\n    '\\u01FA': 'A',\r\n    '\\u01CD': 'A',\r\n    '\\u0200': 'A',\r\n    '\\u0202': 'A',\r\n    '\\u1EA0': 'A',\r\n    '\\u1EAC': 'A',\r\n    '\\u1EB6': 'A',\r\n    '\\u1E00': 'A',\r\n    '\\u0104': 'A',\r\n    '\\u023A': 'A',\r\n    '\\u2C6F': 'A',\r\n    '\\uA732': 'AA',\r\n    '\\u00C6': 'AE',\r\n    '\\u01FC': 'AE',\r\n    '\\u01E2': 'AE',\r\n    '\\uA734': 'AO',\r\n    '\\uA736': 'AU',\r\n    '\\uA738': 'AV',\r\n    '\\uA73A': 'AV',\r\n    '\\uA73C': 'AY',\r\n    '\\u24B7': 'B',\r\n    '\\uFF22': 'B',\r\n    '\\u1E02': 'B',\r\n    '\\u1E04': 'B',\r\n    '\\u1E06': 'B',\r\n    '\\u0243': 'B',\r\n    '\\u0182': 'B',\r\n    '\\u0181': 'B',\r\n    '\\u24B8': 'C',\r\n    '\\uFF23': 'C',\r\n    '\\u0106': 'C',\r\n    '\\u0108': 'C',\r\n    '\\u010A': 'C',\r\n    '\\u010C': 'C',\r\n    '\\u00C7': 'C',\r\n    '\\u1E08': 'C',\r\n    '\\u0187': 'C',\r\n    '\\u023B': 'C',\r\n    '\\uA73E': 'C',\r\n    '\\u24B9': 'D',\r\n    '\\uFF24': 'D',\r\n    '\\u1E0A': 'D',\r\n    '\\u010E': 'D',\r\n    '\\u1E0C': 'D',\r\n    '\\u1E10': 'D',\r\n    '\\u1E12': 'D',\r\n    '\\u1E0E': 'D',\r\n    '\\u0110': 'D',\r\n    '\\u018B': 'D',\r\n    '\\u018A': 'D',\r\n    '\\u0189': 'D',\r\n    '\\uA779': 'D',\r\n    '\\u01F1': 'DZ',\r\n    '\\u01C4': 'DZ',\r\n    '\\u01F2': 'Dz',\r\n    '\\u01C5': 'Dz',\r\n    '\\u24BA': 'E',\r\n    '\\uFF25': 'E',\r\n    '\\u00C8': 'E',\r\n    '\\u00C9': 'E',\r\n    '\\u00CA': 'E',\r\n    '\\u1EC0': 'E',\r\n    '\\u1EBE': 'E',\r\n    '\\u1EC4': 'E',\r\n    '\\u1EC2': 'E',\r\n    '\\u1EBC': 'E',\r\n    '\\u0112': 'E',\r\n    '\\u1E14': 'E',\r\n    '\\u1E16': 'E',\r\n    '\\u0114': 'E',\r\n    '\\u0116': 'E',\r\n    '\\u00CB': 'E',\r\n    '\\u1EBA': 'E',\r\n    '\\u011A': 'E',\r\n    '\\u0204': 'E',\r\n    '\\u0206': 'E',\r\n    '\\u1EB8': 'E',\r\n    '\\u1EC6': 'E',\r\n    '\\u0228': 'E',\r\n    '\\u1E1C': 'E',\r\n    '\\u0118': 'E',\r\n    '\\u1E18': 'E',\r\n    '\\u1E1A': 'E',\r\n    '\\u0190': 'E',\r\n    '\\u018E': 'E',\r\n    '\\u24BB': 'F',\r\n    '\\uFF26': 'F',\r\n    '\\u1E1E': 'F',\r\n    '\\u0191': 'F',\r\n    '\\uA77B': 'F',\r\n    '\\u24BC': 'G',\r\n    '\\uFF27': 'G',\r\n    '\\u01F4': 'G',\r\n    '\\u011C': 'G',\r\n    '\\u1E20': 'G',\r\n    '\\u011E': 'G',\r\n    '\\u0120': 'G',\r\n    '\\u01E6': 'G',\r\n    '\\u0122': 'G',\r\n    '\\u01E4': 'G',\r\n    '\\u0193': 'G',\r\n    '\\uA7A0': 'G',\r\n    '\\uA77D': 'G',\r\n    '\\uA77E': 'G',\r\n    '\\u24BD': 'H',\r\n    '\\uFF28': 'H',\r\n    '\\u0124': 'H',\r\n    '\\u1E22': 'H',\r\n    '\\u1E26': 'H',\r\n    '\\u021E': 'H',\r\n    '\\u1E24': 'H',\r\n    '\\u1E28': 'H',\r\n    '\\u1E2A': 'H',\r\n    '\\u0126': 'H',\r\n    '\\u2C67': 'H',\r\n    '\\u2C75': 'H',\r\n    '\\uA78D': 'H',\r\n    '\\u24BE': 'I',\r\n    '\\uFF29': 'I',\r\n    '\\u00CC': 'I',\r\n    '\\u00CD': 'I',\r\n    '\\u00CE': 'I',\r\n    '\\u0128': 'I',\r\n    '\\u012A': 'I',\r\n    '\\u012C': 'I',\r\n    '\\u0130': 'I',\r\n    '\\u00CF': 'I',\r\n    '\\u1E2E': 'I',\r\n    '\\u1EC8': 'I',\r\n    '\\u01CF': 'I',\r\n    '\\u0208': 'I',\r\n    '\\u020A': 'I',\r\n    '\\u1ECA': 'I',\r\n    '\\u012E': 'I',\r\n    '\\u1E2C': 'I',\r\n    '\\u0197': 'I',\r\n    '\\u24BF': 'J',\r\n    '\\uFF2A': 'J',\r\n    '\\u0134': 'J',\r\n    '\\u0248': 'J',\r\n    '\\u24C0': 'K',\r\n    '\\uFF2B': 'K',\r\n    '\\u1E30': 'K',\r\n    '\\u01E8': 'K',\r\n    '\\u1E32': 'K',\r\n    '\\u0136': 'K',\r\n    '\\u1E34': 'K',\r\n    '\\u0198': 'K',\r\n    '\\u2C69': 'K',\r\n    '\\uA740': 'K',\r\n    '\\uA742': 'K',\r\n    '\\uA744': 'K',\r\n    '\\uA7A2': 'K',\r\n    '\\u24C1': 'L',\r\n    '\\uFF2C': 'L',\r\n    '\\u013F': 'L',\r\n    '\\u0139': 'L',\r\n    '\\u013D': 'L',\r\n    '\\u1E36': 'L',\r\n    '\\u1E38': 'L',\r\n    '\\u013B': 'L',\r\n    '\\u1E3C': 'L',\r\n    '\\u1E3A': 'L',\r\n    '\\u0141': 'L',\r\n    '\\u023D': 'L',\r\n    '\\u2C62': 'L',\r\n    '\\u2C60': 'L',\r\n    '\\uA748': 'L',\r\n    '\\uA746': 'L',\r\n    '\\uA780': 'L',\r\n    '\\u01C7': 'LJ',\r\n    '\\u01C8': 'Lj',\r\n    '\\u24C2': 'M',\r\n    '\\uFF2D': 'M',\r\n    '\\u1E3E': 'M',\r\n    '\\u1E40': 'M',\r\n    '\\u1E42': 'M',\r\n    '\\u2C6E': 'M',\r\n    '\\u019C': 'M',\r\n    '\\u24C3': 'N',\r\n    '\\uFF2E': 'N',\r\n    '\\u01F8': 'N',\r\n    '\\u0143': 'N',\r\n    '\\u00D1': 'N',\r\n    '\\u1E44': 'N',\r\n    '\\u0147': 'N',\r\n    '\\u1E46': 'N',\r\n    '\\u0145': 'N',\r\n    '\\u1E4A': 'N',\r\n    '\\u1E48': 'N',\r\n    '\\u0220': 'N',\r\n    '\\u019D': 'N',\r\n    '\\uA790': 'N',\r\n    '\\uA7A4': 'N',\r\n    '\\u01CA': 'NJ',\r\n    '\\u01CB': 'Nj',\r\n    '\\u24C4': 'O',\r\n    '\\uFF2F': 'O',\r\n    '\\u00D2': 'O',\r\n    '\\u00D3': 'O',\r\n    '\\u00D4': 'O',\r\n    '\\u1ED2': 'O',\r\n    '\\u1ED0': 'O',\r\n    '\\u1ED6': 'O',\r\n    '\\u1ED4': 'O',\r\n    '\\u00D5': 'O',\r\n    '\\u1E4C': 'O',\r\n    '\\u022C': 'O',\r\n    '\\u1E4E': 'O',\r\n    '\\u014C': 'O',\r\n    '\\u1E50': 'O',\r\n    '\\u1E52': 'O',\r\n    '\\u014E': 'O',\r\n    '\\u022E': 'O',\r\n    '\\u0230': 'O',\r\n    '\\u00D6': 'O',\r\n    '\\u022A': 'O',\r\n    '\\u1ECE': 'O',\r\n    '\\u0150': 'O',\r\n    '\\u01D1': 'O',\r\n    '\\u020C': 'O',\r\n    '\\u020E': 'O',\r\n    '\\u01A0': 'O',\r\n    '\\u1EDC': 'O',\r\n    '\\u1EDA': 'O',\r\n    '\\u1EE0': 'O',\r\n    '\\u1EDE': 'O',\r\n    '\\u1EE2': 'O',\r\n    '\\u1ECC': 'O',\r\n    '\\u1ED8': 'O',\r\n    '\\u01EA': 'O',\r\n    '\\u01EC': 'O',\r\n    '\\u00D8': 'O',\r\n    '\\u01FE': 'O',\r\n    '\\u0186': 'O',\r\n    '\\u019F': 'O',\r\n    '\\uA74A': 'O',\r\n    '\\uA74C': 'O',\r\n    '\\u01A2': 'OI',\r\n    '\\uA74E': 'OO',\r\n    '\\u0222': 'OU',\r\n    '\\u24C5': 'P',\r\n    '\\uFF30': 'P',\r\n    '\\u1E54': 'P',\r\n    '\\u1E56': 'P',\r\n    '\\u01A4': 'P',\r\n    '\\u2C63': 'P',\r\n    '\\uA750': 'P',\r\n    '\\uA752': 'P',\r\n    '\\uA754': 'P',\r\n    '\\u24C6': 'Q',\r\n    '\\uFF31': 'Q',\r\n    '\\uA756': 'Q',\r\n    '\\uA758': 'Q',\r\n    '\\u024A': 'Q',\r\n    '\\u24C7': 'R',\r\n    '\\uFF32': 'R',\r\n    '\\u0154': 'R',\r\n    '\\u1E58': 'R',\r\n    '\\u0158': 'R',\r\n    '\\u0210': 'R',\r\n    '\\u0212': 'R',\r\n    '\\u1E5A': 'R',\r\n    '\\u1E5C': 'R',\r\n    '\\u0156': 'R',\r\n    '\\u1E5E': 'R',\r\n    '\\u024C': 'R',\r\n    '\\u2C64': 'R',\r\n    '\\uA75A': 'R',\r\n    '\\uA7A6': 'R',\r\n    '\\uA782': 'R',\r\n    '\\u24C8': 'S',\r\n    '\\uFF33': 'S',\r\n    '\\u1E9E': 'S',\r\n    '\\u015A': 'S',\r\n    '\\u1E64': 'S',\r\n    '\\u015C': 'S',\r\n    '\\u1E60': 'S',\r\n    '\\u0160': 'S',\r\n    '\\u1E66': 'S',\r\n    '\\u1E62': 'S',\r\n    '\\u1E68': 'S',\r\n    '\\u0218': 'S',\r\n    '\\u015E': 'S',\r\n    '\\u2C7E': 'S',\r\n    '\\uA7A8': 'S',\r\n    '\\uA784': 'S',\r\n    '\\u24C9': 'T',\r\n    '\\uFF34': 'T',\r\n    '\\u1E6A': 'T',\r\n    '\\u0164': 'T',\r\n    '\\u1E6C': 'T',\r\n    '\\u021A': 'T',\r\n    '\\u0162': 'T',\r\n    '\\u1E70': 'T',\r\n    '\\u1E6E': 'T',\r\n    '\\u0166': 'T',\r\n    '\\u01AC': 'T',\r\n    '\\u01AE': 'T',\r\n    '\\u023E': 'T',\r\n    '\\uA786': 'T',\r\n    '\\uA728': 'TZ',\r\n    '\\u24CA': 'U',\r\n    '\\uFF35': 'U',\r\n    '\\u00D9': 'U',\r\n    '\\u00DA': 'U',\r\n    '\\u00DB': 'U',\r\n    '\\u0168': 'U',\r\n    '\\u1E78': 'U',\r\n    '\\u016A': 'U',\r\n    '\\u1E7A': 'U',\r\n    '\\u016C': 'U',\r\n    '\\u00DC': 'U',\r\n    '\\u01DB': 'U',\r\n    '\\u01D7': 'U',\r\n    '\\u01D5': 'U',\r\n    '\\u01D9': 'U',\r\n    '\\u1EE6': 'U',\r\n    '\\u016E': 'U',\r\n    '\\u0170': 'U',\r\n    '\\u01D3': 'U',\r\n    '\\u0214': 'U',\r\n    '\\u0216': 'U',\r\n    '\\u01AF': 'U',\r\n    '\\u1EEA': 'U',\r\n    '\\u1EE8': 'U',\r\n    '\\u1EEE': 'U',\r\n    '\\u1EEC': 'U',\r\n    '\\u1EF0': 'U',\r\n    '\\u1EE4': 'U',\r\n    '\\u1E72': 'U',\r\n    '\\u0172': 'U',\r\n    '\\u1E76': 'U',\r\n    '\\u1E74': 'U',\r\n    '\\u0244': 'U',\r\n    '\\u24CB': 'V',\r\n    '\\uFF36': 'V',\r\n    '\\u1E7C': 'V',\r\n    '\\u1E7E': 'V',\r\n    '\\u01B2': 'V',\r\n    '\\uA75E': 'V',\r\n    '\\u0245': 'V',\r\n    '\\uA760': 'VY',\r\n    '\\u24CC': 'W',\r\n    '\\uFF37': 'W',\r\n    '\\u1E80': 'W',\r\n    '\\u1E82': 'W',\r\n    '\\u0174': 'W',\r\n    '\\u1E86': 'W',\r\n    '\\u1E84': 'W',\r\n    '\\u1E88': 'W',\r\n    '\\u2C72': 'W',\r\n    '\\u24CD': 'X',\r\n    '\\uFF38': 'X',\r\n    '\\u1E8A': 'X',\r\n    '\\u1E8C': 'X',\r\n    '\\u24CE': 'Y',\r\n    '\\uFF39': 'Y',\r\n    '\\u1EF2': 'Y',\r\n    '\\u00DD': 'Y',\r\n    '\\u0176': 'Y',\r\n    '\\u1EF8': 'Y',\r\n    '\\u0232': 'Y',\r\n    '\\u1E8E': 'Y',\r\n    '\\u0178': 'Y',\r\n    '\\u1EF6': 'Y',\r\n    '\\u1EF4': 'Y',\r\n    '\\u01B3': 'Y',\r\n    '\\u024E': 'Y',\r\n    '\\u1EFE': 'Y',\r\n    '\\u24CF': 'Z',\r\n    '\\uFF3A': 'Z',\r\n    '\\u0179': 'Z',\r\n    '\\u1E90': 'Z',\r\n    '\\u017B': 'Z',\r\n    '\\u017D': 'Z',\r\n    '\\u1E92': 'Z',\r\n    '\\u1E94': 'Z',\r\n    '\\u01B5': 'Z',\r\n    '\\u0224': 'Z',\r\n    '\\u2C7F': 'Z',\r\n    '\\u2C6B': 'Z',\r\n    '\\uA762': 'Z',\r\n    '\\u24D0': 'a',\r\n    '\\uFF41': 'a',\r\n    '\\u1E9A': 'a',\r\n    '\\u00E0': 'a',\r\n    '\\u00E1': 'a',\r\n    '\\u00E2': 'a',\r\n    '\\u1EA7': 'a',\r\n    '\\u1EA5': 'a',\r\n    '\\u1EAB': 'a',\r\n    '\\u1EA9': 'a',\r\n    '\\u00E3': 'a',\r\n    '\\u0101': 'a',\r\n    '\\u0103': 'a',\r\n    '\\u1EB1': 'a',\r\n    '\\u1EAF': 'a',\r\n    '\\u1EB5': 'a',\r\n    '\\u1EB3': 'a',\r\n    '\\u0227': 'a',\r\n    '\\u01E1': 'a',\r\n    '\\u00E4': 'a',\r\n    '\\u01DF': 'a',\r\n    '\\u1EA3': 'a',\r\n    '\\u00E5': 'a',\r\n    '\\u01FB': 'a',\r\n    '\\u01CE': 'a',\r\n    '\\u0201': 'a',\r\n    '\\u0203': 'a',\r\n    '\\u1EA1': 'a',\r\n    '\\u1EAD': 'a',\r\n    '\\u1EB7': 'a',\r\n    '\\u1E01': 'a',\r\n    '\\u0105': 'a',\r\n    '\\u2C65': 'a',\r\n    '\\u0250': 'a',\r\n    '\\uA733': 'aa',\r\n    '\\u00E6': 'ae',\r\n    '\\u01FD': 'ae',\r\n    '\\u01E3': 'ae',\r\n    '\\uA735': 'ao',\r\n    '\\uA737': 'au',\r\n    '\\uA739': 'av',\r\n    '\\uA73B': 'av',\r\n    '\\uA73D': 'ay',\r\n    '\\u24D1': 'b',\r\n    '\\uFF42': 'b',\r\n    '\\u1E03': 'b',\r\n    '\\u1E05': 'b',\r\n    '\\u1E07': 'b',\r\n    '\\u0180': 'b',\r\n    '\\u0183': 'b',\r\n    '\\u0253': 'b',\r\n    '\\u24D2': 'c',\r\n    '\\uFF43': 'c',\r\n    '\\u0107': 'c',\r\n    '\\u0109': 'c',\r\n    '\\u010B': 'c',\r\n    '\\u010D': 'c',\r\n    '\\u00E7': 'c',\r\n    '\\u1E09': 'c',\r\n    '\\u0188': 'c',\r\n    '\\u023C': 'c',\r\n    '\\uA73F': 'c',\r\n    '\\u2184': 'c',\r\n    '\\u24D3': 'd',\r\n    '\\uFF44': 'd',\r\n    '\\u1E0B': 'd',\r\n    '\\u010F': 'd',\r\n    '\\u1E0D': 'd',\r\n    '\\u1E11': 'd',\r\n    '\\u1E13': 'd',\r\n    '\\u1E0F': 'd',\r\n    '\\u0111': 'd',\r\n    '\\u018C': 'd',\r\n    '\\u0256': 'd',\r\n    '\\u0257': 'd',\r\n    '\\uA77A': 'd',\r\n    '\\u01F3': 'dz',\r\n    '\\u01C6': 'dz',\r\n    '\\u24D4': 'e',\r\n    '\\uFF45': 'e',\r\n    '\\u00E8': 'e',\r\n    '\\u00E9': 'e',\r\n    '\\u00EA': 'e',\r\n    '\\u1EC1': 'e',\r\n    '\\u1EBF': 'e',\r\n    '\\u1EC5': 'e',\r\n    '\\u1EC3': 'e',\r\n    '\\u1EBD': 'e',\r\n    '\\u0113': 'e',\r\n    '\\u1E15': 'e',\r\n    '\\u1E17': 'e',\r\n    '\\u0115': 'e',\r\n    '\\u0117': 'e',\r\n    '\\u00EB': 'e',\r\n    '\\u1EBB': 'e',\r\n    '\\u011B': 'e',\r\n    '\\u0205': 'e',\r\n    '\\u0207': 'e',\r\n    '\\u1EB9': 'e',\r\n    '\\u1EC7': 'e',\r\n    '\\u0229': 'e',\r\n    '\\u1E1D': 'e',\r\n    '\\u0119': 'e',\r\n    '\\u1E19': 'e',\r\n    '\\u1E1B': 'e',\r\n    '\\u0247': 'e',\r\n    '\\u025B': 'e',\r\n    '\\u01DD': 'e',\r\n    '\\u24D5': 'f',\r\n    '\\uFF46': 'f',\r\n    '\\u1E1F': 'f',\r\n    '\\u0192': 'f',\r\n    '\\uA77C': 'f',\r\n    '\\u24D6': 'g',\r\n    '\\uFF47': 'g',\r\n    '\\u01F5': 'g',\r\n    '\\u011D': 'g',\r\n    '\\u1E21': 'g',\r\n    '\\u011F': 'g',\r\n    '\\u0121': 'g',\r\n    '\\u01E7': 'g',\r\n    '\\u0123': 'g',\r\n    '\\u01E5': 'g',\r\n    '\\u0260': 'g',\r\n    '\\uA7A1': 'g',\r\n    '\\u1D79': 'g',\r\n    '\\uA77F': 'g',\r\n    '\\u24D7': 'h',\r\n    '\\uFF48': 'h',\r\n    '\\u0125': 'h',\r\n    '\\u1E23': 'h',\r\n    '\\u1E27': 'h',\r\n    '\\u021F': 'h',\r\n    '\\u1E25': 'h',\r\n    '\\u1E29': 'h',\r\n    '\\u1E2B': 'h',\r\n    '\\u1E96': 'h',\r\n    '\\u0127': 'h',\r\n    '\\u2C68': 'h',\r\n    '\\u2C76': 'h',\r\n    '\\u0265': 'h',\r\n    '\\u0195': 'hv',\r\n    '\\u24D8': 'i',\r\n    '\\uFF49': 'i',\r\n    '\\u00EC': 'i',\r\n    '\\u00ED': 'i',\r\n    '\\u00EE': 'i',\r\n    '\\u0129': 'i',\r\n    '\\u012B': 'i',\r\n    '\\u012D': 'i',\r\n    '\\u00EF': 'i',\r\n    '\\u1E2F': 'i',\r\n    '\\u1EC9': 'i',\r\n    '\\u01D0': 'i',\r\n    '\\u0209': 'i',\r\n    '\\u020B': 'i',\r\n    '\\u1ECB': 'i',\r\n    '\\u012F': 'i',\r\n    '\\u1E2D': 'i',\r\n    '\\u0268': 'i',\r\n    '\\u0131': 'i',\r\n    '\\u24D9': 'j',\r\n    '\\uFF4A': 'j',\r\n    '\\u0135': 'j',\r\n    '\\u01F0': 'j',\r\n    '\\u0249': 'j',\r\n    '\\u24DA': 'k',\r\n    '\\uFF4B': 'k',\r\n    '\\u1E31': 'k',\r\n    '\\u01E9': 'k',\r\n    '\\u1E33': 'k',\r\n    '\\u0137': 'k',\r\n    '\\u1E35': 'k',\r\n    '\\u0199': 'k',\r\n    '\\u2C6A': 'k',\r\n    '\\uA741': 'k',\r\n    '\\uA743': 'k',\r\n    '\\uA745': 'k',\r\n    '\\uA7A3': 'k',\r\n    '\\u24DB': 'l',\r\n    '\\uFF4C': 'l',\r\n    '\\u0140': 'l',\r\n    '\\u013A': 'l',\r\n    '\\u013E': 'l',\r\n    '\\u1E37': 'l',\r\n    '\\u1E39': 'l',\r\n    '\\u013C': 'l',\r\n    '\\u1E3D': 'l',\r\n    '\\u1E3B': 'l',\r\n    '\\u017F': 'l',\r\n    '\\u0142': 'l',\r\n    '\\u019A': 'l',\r\n    '\\u026B': 'l',\r\n    '\\u2C61': 'l',\r\n    '\\uA749': 'l',\r\n    '\\uA781': 'l',\r\n    '\\uA747': 'l',\r\n    '\\u01C9': 'lj',\r\n    '\\u24DC': 'm',\r\n    '\\uFF4D': 'm',\r\n    '\\u1E3F': 'm',\r\n    '\\u1E41': 'm',\r\n    '\\u1E43': 'm',\r\n    '\\u0271': 'm',\r\n    '\\u026F': 'm',\r\n    '\\u24DD': 'n',\r\n    '\\uFF4E': 'n',\r\n    '\\u01F9': 'n',\r\n    '\\u0144': 'n',\r\n    '\\u00F1': 'n',\r\n    '\\u1E45': 'n',\r\n    '\\u0148': 'n',\r\n    '\\u1E47': 'n',\r\n    '\\u0146': 'n',\r\n    '\\u1E4B': 'n',\r\n    '\\u1E49': 'n',\r\n    '\\u019E': 'n',\r\n    '\\u0272': 'n',\r\n    '\\u0149': 'n',\r\n    '\\uA791': 'n',\r\n    '\\uA7A5': 'n',\r\n    '\\u01CC': 'nj',\r\n    '\\u24DE': 'o',\r\n    '\\uFF4F': 'o',\r\n    '\\u00F2': 'o',\r\n    '\\u00F3': 'o',\r\n    '\\u00F4': 'o',\r\n    '\\u1ED3': 'o',\r\n    '\\u1ED1': 'o',\r\n    '\\u1ED7': 'o',\r\n    '\\u1ED5': 'o',\r\n    '\\u00F5': 'o',\r\n    '\\u1E4D': 'o',\r\n    '\\u022D': 'o',\r\n    '\\u1E4F': 'o',\r\n    '\\u014D': 'o',\r\n    '\\u1E51': 'o',\r\n    '\\u1E53': 'o',\r\n    '\\u014F': 'o',\r\n    '\\u022F': 'o',\r\n    '\\u0231': 'o',\r\n    '\\u00F6': 'o',\r\n    '\\u022B': 'o',\r\n    '\\u1ECF': 'o',\r\n    '\\u0151': 'o',\r\n    '\\u01D2': 'o',\r\n    '\\u020D': 'o',\r\n    '\\u020F': 'o',\r\n    '\\u01A1': 'o',\r\n    '\\u1EDD': 'o',\r\n    '\\u1EDB': 'o',\r\n    '\\u1EE1': 'o',\r\n    '\\u1EDF': 'o',\r\n    '\\u1EE3': 'o',\r\n    '\\u1ECD': 'o',\r\n    '\\u1ED9': 'o',\r\n    '\\u01EB': 'o',\r\n    '\\u01ED': 'o',\r\n    '\\u00F8': 'o',\r\n    '\\u01FF': 'o',\r\n    '\\u0254': 'o',\r\n    '\\uA74B': 'o',\r\n    '\\uA74D': 'o',\r\n    '\\u0275': 'o',\r\n    '\\u01A3': 'oi',\r\n    '\\u0223': 'ou',\r\n    '\\uA74F': 'oo',\r\n    '\\u24DF': 'p',\r\n    '\\uFF50': 'p',\r\n    '\\u1E55': 'p',\r\n    '\\u1E57': 'p',\r\n    '\\u01A5': 'p',\r\n    '\\u1D7D': 'p',\r\n    '\\uA751': 'p',\r\n    '\\uA753': 'p',\r\n    '\\uA755': 'p',\r\n    '\\u24E0': 'q',\r\n    '\\uFF51': 'q',\r\n    '\\u024B': 'q',\r\n    '\\uA757': 'q',\r\n    '\\uA759': 'q',\r\n    '\\u24E1': 'r',\r\n    '\\uFF52': 'r',\r\n    '\\u0155': 'r',\r\n    '\\u1E59': 'r',\r\n    '\\u0159': 'r',\r\n    '\\u0211': 'r',\r\n    '\\u0213': 'r',\r\n    '\\u1E5B': 'r',\r\n    '\\u1E5D': 'r',\r\n    '\\u0157': 'r',\r\n    '\\u1E5F': 'r',\r\n    '\\u024D': 'r',\r\n    '\\u027D': 'r',\r\n    '\\uA75B': 'r',\r\n    '\\uA7A7': 'r',\r\n    '\\uA783': 'r',\r\n    '\\u24E2': 's',\r\n    '\\uFF53': 's',\r\n    '\\u00DF': 's',\r\n    '\\u015B': 's',\r\n    '\\u1E65': 's',\r\n    '\\u015D': 's',\r\n    '\\u1E61': 's',\r\n    '\\u0161': 's',\r\n    '\\u1E67': 's',\r\n    '\\u1E63': 's',\r\n    '\\u1E69': 's',\r\n    '\\u0219': 's',\r\n    '\\u015F': 's',\r\n    '\\u023F': 's',\r\n    '\\uA7A9': 's',\r\n    '\\uA785': 's',\r\n    '\\u1E9B': 's',\r\n    '\\u24E3': 't',\r\n    '\\uFF54': 't',\r\n    '\\u1E6B': 't',\r\n    '\\u1E97': 't',\r\n    '\\u0165': 't',\r\n    '\\u1E6D': 't',\r\n    '\\u021B': 't',\r\n    '\\u0163': 't',\r\n    '\\u1E71': 't',\r\n    '\\u1E6F': 't',\r\n    '\\u0167': 't',\r\n    '\\u01AD': 't',\r\n    '\\u0288': 't',\r\n    '\\u2C66': 't',\r\n    '\\uA787': 't',\r\n    '\\uA729': 'tz',\r\n    '\\u24E4': 'u',\r\n    '\\uFF55': 'u',\r\n    '\\u00F9': 'u',\r\n    '\\u00FA': 'u',\r\n    '\\u00FB': 'u',\r\n    '\\u0169': 'u',\r\n    '\\u1E79': 'u',\r\n    '\\u016B': 'u',\r\n    '\\u1E7B': 'u',\r\n    '\\u016D': 'u',\r\n    '\\u00FC': 'u',\r\n    '\\u01DC': 'u',\r\n    '\\u01D8': 'u',\r\n    '\\u01D6': 'u',\r\n    '\\u01DA': 'u',\r\n    '\\u1EE7': 'u',\r\n    '\\u016F': 'u',\r\n    '\\u0171': 'u',\r\n    '\\u01D4': 'u',\r\n    '\\u0215': 'u',\r\n    '\\u0217': 'u',\r\n    '\\u01B0': 'u',\r\n    '\\u1EEB': 'u',\r\n    '\\u1EE9': 'u',\r\n    '\\u1EEF': 'u',\r\n    '\\u1EED': 'u',\r\n    '\\u1EF1': 'u',\r\n    '\\u1EE5': 'u',\r\n    '\\u1E73': 'u',\r\n    '\\u0173': 'u',\r\n    '\\u1E77': 'u',\r\n    '\\u1E75': 'u',\r\n    '\\u0289': 'u',\r\n    '\\u24E5': 'v',\r\n    '\\uFF56': 'v',\r\n    '\\u1E7D': 'v',\r\n    '\\u1E7F': 'v',\r\n    '\\u028B': 'v',\r\n    '\\uA75F': 'v',\r\n    '\\u028C': 'v',\r\n    '\\uA761': 'vy',\r\n    '\\u24E6': 'w',\r\n    '\\uFF57': 'w',\r\n    '\\u1E81': 'w',\r\n    '\\u1E83': 'w',\r\n    '\\u0175': 'w',\r\n    '\\u1E87': 'w',\r\n    '\\u1E85': 'w',\r\n    '\\u1E98': 'w',\r\n    '\\u1E89': 'w',\r\n    '\\u2C73': 'w',\r\n    '\\u24E7': 'x',\r\n    '\\uFF58': 'x',\r\n    '\\u1E8B': 'x',\r\n    '\\u1E8D': 'x',\r\n    '\\u24E8': 'y',\r\n    '\\uFF59': 'y',\r\n    '\\u1EF3': 'y',\r\n    '\\u00FD': 'y',\r\n    '\\u0177': 'y',\r\n    '\\u1EF9': 'y',\r\n    '\\u0233': 'y',\r\n    '\\u1E8F': 'y',\r\n    '\\u00FF': 'y',\r\n    '\\u1EF7': 'y',\r\n    '\\u1E99': 'y',\r\n    '\\u1EF5': 'y',\r\n    '\\u01B4': 'y',\r\n    '\\u024F': 'y',\r\n    '\\u1EFF': 'y',\r\n    '\\u24E9': 'z',\r\n    '\\uFF5A': 'z',\r\n    '\\u017A': 'z',\r\n    '\\u1E91': 'z',\r\n    '\\u017C': 'z',\r\n    '\\u017E': 'z',\r\n    '\\u1E93': 'z',\r\n    '\\u1E95': 'z',\r\n    '\\u01B6': 'z',\r\n    '\\u0225': 'z',\r\n    '\\u0240': 'z',\r\n    '\\u2C6C': 'z',\r\n    '\\uA763': 'z',\r\n    '\\u0386': '\\u0391',\r\n    '\\u0388': '\\u0395',\r\n    '\\u0389': '\\u0397',\r\n    '\\u038A': '\\u0399',\r\n    '\\u03AA': '\\u0399',\r\n    '\\u038C': '\\u039F',\r\n    '\\u038E': '\\u03A5',\r\n    '\\u03AB': '\\u03A5',\r\n    '\\u038F': '\\u03A9',\r\n    '\\u03AC': '\\u03B1',\r\n    '\\u03AD': '\\u03B5',\r\n    '\\u03AE': '\\u03B7',\r\n    '\\u03AF': '\\u03B9',\r\n    '\\u03CA': '\\u03B9',\r\n    '\\u0390': '\\u03B9',\r\n    '\\u03CC': '\\u03BF',\r\n    '\\u03CD': '\\u03C5',\r\n    '\\u03CB': '\\u03C5',\r\n    '\\u03B0': '\\u03C5',\r\n    '\\u03C9': '\\u03C9',\r\n    '\\u03C2': '\\u03C3'\r\n  };\r\n\r\n  return diacritics;\r\n});\r\n\nS2.define('select2/data/base',[\r\n  '../utils'\r\n], function (Utils) {\r\n  function BaseAdapter ($element, options) {\r\n    BaseAdapter.__super__.constructor.call(this);\r\n  }\r\n\r\n  Utils.Extend(BaseAdapter, Utils.Observable);\r\n\r\n  BaseAdapter.prototype.current = function (callback) {\r\n    throw new Error('The `current` method must be defined in child classes.');\r\n  };\r\n\r\n  BaseAdapter.prototype.query = function (params, callback) {\r\n    throw new Error('The `query` method must be defined in child classes.');\r\n  };\r\n\r\n  BaseAdapter.prototype.bind = function (container, $container) {\r\n    // Can be implemented in subclasses\r\n  };\r\n\r\n  BaseAdapter.prototype.destroy = function () {\r\n    // Can be implemented in subclasses\r\n  };\r\n\r\n  BaseAdapter.prototype.generateResultId = function (container, data) {\r\n    var id = container.id + '-result-';\r\n\r\n    id += Utils.generateChars(4);\r\n\r\n    if (data.id != null) {\r\n      id += '-' + data.id.toString();\r\n    } else {\r\n      id += '-' + Utils.generateChars(4);\r\n    }\r\n    return id;\r\n  };\r\n\r\n  return BaseAdapter;\r\n});\r\n\nS2.define('select2/data/select',[\r\n  './base',\r\n  '../utils',\r\n  'jquery'\r\n], function (BaseAdapter, Utils, $) {\r\n  function SelectAdapter ($element, options) {\r\n    this.$element = $element;\r\n    this.options = options;\r\n\r\n    SelectAdapter.__super__.constructor.call(this);\r\n  }\r\n\r\n  Utils.Extend(SelectAdapter, BaseAdapter);\r\n\r\n  SelectAdapter.prototype.current = function (callback) {\r\n    var data = [];\r\n    var self = this;\r\n\r\n    this.$element.find(':selected').each(function () {\r\n      var $option = $(this);\r\n\r\n      var option = self.item($option);\r\n\r\n      data.push(option);\r\n    });\r\n\r\n    callback(data);\r\n  };\r\n\r\n  SelectAdapter.prototype.select = function (data) {\r\n    var self = this;\r\n\r\n    data.selected = true;\r\n\r\n    // If data.element is a DOM node, use it instead\r\n    if ($(data.element).is('option')) {\r\n      data.element.selected = true;\r\n\r\n      this.$element.trigger('change');\r\n\r\n      return;\r\n    }\r\n\r\n    if (this.$element.prop('multiple')) {\r\n      this.current(function (currentData) {\r\n        var val = [];\r\n\r\n        data = [data];\r\n        data.push.apply(data, currentData);\r\n\r\n        for (var d = 0; d < data.length; d++) {\r\n          var id = data[d].id;\r\n\r\n          if ($.inArray(id, val) === -1) {\r\n            val.push(id);\r\n          }\r\n        }\r\n\r\n        self.$element.val(val);\r\n        self.$element.trigger('change');\r\n      });\r\n    } else {\r\n      var val = data.id;\r\n\r\n      this.$element.val(val);\r\n      this.$element.trigger('change');\r\n    }\r\n  };\r\n\r\n  SelectAdapter.prototype.unselect = function (data) {\r\n    var self = this;\r\n\r\n    if (!this.$element.prop('multiple')) {\r\n      return;\r\n    }\r\n\r\n    data.selected = false;\r\n\r\n    if ($(data.element).is('option')) {\r\n      data.element.selected = false;\r\n\r\n      this.$element.trigger('change');\r\n\r\n      return;\r\n    }\r\n\r\n    this.current(function (currentData) {\r\n      var val = [];\r\n\r\n      for (var d = 0; d < currentData.length; d++) {\r\n        var id = currentData[d].id;\r\n\r\n        if (id !== data.id && $.inArray(id, val) === -1) {\r\n          val.push(id);\r\n        }\r\n      }\r\n\r\n      self.$element.val(val);\r\n\r\n      self.$element.trigger('change');\r\n    });\r\n  };\r\n\r\n  SelectAdapter.prototype.bind = function (container, $container) {\r\n    var self = this;\r\n\r\n    this.container = container;\r\n\r\n    container.on('select', function (params) {\r\n      self.select(params.data);\r\n    });\r\n\r\n    container.on('unselect', function (params) {\r\n      self.unselect(params.data);\r\n    });\r\n  };\r\n\r\n  SelectAdapter.prototype.destroy = function () {\r\n    // Remove anything added to child elements\r\n    this.$element.find('*').each(function () {\r\n      // Remove any custom data set by Select2\r\n      $.removeData(this, 'data');\r\n    });\r\n  };\r\n\r\n  SelectAdapter.prototype.query = function (params, callback) {\r\n    var data = [];\r\n    var self = this;\r\n\r\n    var $options = this.$element.children();\r\n\r\n    $options.each(function () {\r\n      var $option = $(this);\r\n\r\n      if (!$option.is('option') && !$option.is('optgroup')) {\r\n        return;\r\n      }\r\n\r\n      var option = self.item($option);\r\n\r\n      var matches = self.matches(params, option);\r\n\r\n      if (matches !== null) {\r\n        data.push(matches);\r\n      }\r\n    });\r\n\r\n    callback({\r\n      results: data\r\n    });\r\n  };\r\n\r\n  SelectAdapter.prototype.addOptions = function ($options) {\r\n    Utils.appendMany(this.$element, $options);\r\n  };\r\n\r\n  SelectAdapter.prototype.option = function (data) {\r\n    var option;\r\n\r\n    if (data.children) {\r\n      option = document.createElement('optgroup');\r\n      option.label = data.text;\r\n    } else {\r\n      option = document.createElement('option');\r\n\r\n      if (option.textContent !== undefined) {\r\n        option.textContent = data.text;\r\n      } else {\r\n        option.innerText = data.text;\r\n      }\r\n    }\r\n\r\n    if (data.id) {\r\n      option.value = data.id;\r\n    }\r\n\r\n    if (data.disabled) {\r\n      option.disabled = true;\r\n    }\r\n\r\n    if (data.selected) {\r\n      option.selected = true;\r\n    }\r\n\r\n    if (data.title) {\r\n      option.title = data.title;\r\n    }\r\n\r\n    var $option = $(option);\r\n\r\n    var normalizedData = this._normalizeItem(data);\r\n    normalizedData.element = option;\r\n\r\n    // Override the option's data with the combined data\r\n    $.data(option, 'data', normalizedData);\r\n\r\n    return $option;\r\n  };\r\n\r\n  SelectAdapter.prototype.item = function ($option) {\r\n    var data = {};\r\n\r\n    data = $.data($option[0], 'data');\r\n\r\n    if (data != null) {\r\n      return data;\r\n    }\r\n\r\n    if ($option.is('option')) {\r\n      data = {\r\n        id: $option.val(),\r\n        text: $option.text(),\r\n        disabled: $option.prop('disabled'),\r\n        selected: $option.prop('selected'),\r\n        title: $option.prop('title')\r\n      };\r\n    } else if ($option.is('optgroup')) {\r\n      data = {\r\n        text: $option.prop('label'),\r\n        children: [],\r\n        title: $option.prop('title')\r\n      };\r\n\r\n      var $children = $option.children('option');\r\n      var children = [];\r\n\r\n      for (var c = 0; c < $children.length; c++) {\r\n        var $child = $($children[c]);\r\n\r\n        var child = this.item($child);\r\n\r\n        children.push(child);\r\n      }\r\n\r\n      data.children = children;\r\n    }\r\n\r\n    data = this._normalizeItem(data);\r\n    data.element = $option[0];\r\n\r\n    $.data($option[0], 'data', data);\r\n\r\n    return data;\r\n  };\r\n\r\n  SelectAdapter.prototype._normalizeItem = function (item) {\r\n    if (!$.isPlainObject(item)) {\r\n      item = {\r\n        id: item,\r\n        text: item\r\n      };\r\n    }\r\n\r\n    item = $.extend({}, {\r\n      text: ''\r\n    }, item);\r\n\r\n    var defaults = {\r\n      selected: false,\r\n      disabled: false\r\n    };\r\n\r\n    if (item.id != null) {\r\n      item.id = item.id.toString();\r\n    }\r\n\r\n    if (item.text != null) {\r\n      item.text = item.text.toString();\r\n    }\r\n\r\n    if (item._resultId == null && item.id && this.container != null) {\r\n      item._resultId = this.generateResultId(this.container, item);\r\n    }\r\n\r\n    return $.extend({}, defaults, item);\r\n  };\r\n\r\n  SelectAdapter.prototype.matches = function (params, data) {\r\n    var matcher = this.options.get('matcher');\r\n\r\n    return matcher(params, data);\r\n  };\r\n\r\n  return SelectAdapter;\r\n});\r\n\nS2.define('select2/data/array',[\r\n  './select',\r\n  '../utils',\r\n  'jquery'\r\n], function (SelectAdapter, Utils, $) {\r\n  function ArrayAdapter ($element, options) {\r\n    var data = options.get('data') || [];\r\n\r\n    ArrayAdapter.__super__.constructor.call(this, $element, options);\r\n\r\n    this.addOptions(this.convertToOptions(data));\r\n  }\r\n\r\n  Utils.Extend(ArrayAdapter, SelectAdapter);\r\n\r\n  ArrayAdapter.prototype.select = function (data) {\r\n    var $option = this.$element.find('option').filter(function (i, elm) {\r\n      return elm.value == data.id.toString();\r\n    });\r\n\r\n    if ($option.length === 0) {\r\n      $option = this.option(data);\r\n\r\n      this.addOptions($option);\r\n    }\r\n\r\n    ArrayAdapter.__super__.select.call(this, data);\r\n  };\r\n\r\n  ArrayAdapter.prototype.convertToOptions = function (data) {\r\n    var self = this;\r\n\r\n    var $existing = this.$element.find('option');\r\n    var existingIds = $existing.map(function () {\r\n      return self.item($(this)).id;\r\n    }).get();\r\n\r\n    var $options = [];\r\n\r\n    // Filter out all items except for the one passed in the argument\r\n    function onlyItem (item) {\r\n      return function () {\r\n        return $(this).val() == item.id;\r\n      };\r\n    }\r\n\r\n    for (var d = 0; d < data.length; d++) {\r\n      var item = this._normalizeItem(data[d]);\r\n\r\n      // Skip items which were pre-loaded, only merge the data\r\n      if ($.inArray(item.id, existingIds) >= 0) {\r\n        var $existingOption = $existing.filter(onlyItem(item));\r\n\r\n        var existingData = this.item($existingOption);\r\n        var newData = $.extend(true, {}, item, existingData);\r\n\r\n        var $newOption = this.option(newData);\r\n\r\n        $existingOption.replaceWith($newOption);\r\n\r\n        continue;\r\n      }\r\n\r\n      var $option = this.option(item);\r\n\r\n      if (item.children) {\r\n        var $children = this.convertToOptions(item.children);\r\n\r\n        Utils.appendMany($option, $children);\r\n      }\r\n\r\n      $options.push($option);\r\n    }\r\n\r\n    return $options;\r\n  };\r\n\r\n  return ArrayAdapter;\r\n});\r\n\nS2.define('select2/data/ajax',[\r\n  './array',\r\n  '../utils',\r\n  'jquery'\r\n], function (ArrayAdapter, Utils, $) {\r\n  function AjaxAdapter ($element, options) {\r\n    this.ajaxOptions = this._applyDefaults(options.get('ajax'));\r\n\r\n    if (this.ajaxOptions.processResults != null) {\r\n      this.processResults = this.ajaxOptions.processResults;\r\n    }\r\n\r\n    AjaxAdapter.__super__.constructor.call(this, $element, options);\r\n  }\r\n\r\n  Utils.Extend(AjaxAdapter, ArrayAdapter);\r\n\r\n  AjaxAdapter.prototype._applyDefaults = function (options) {\r\n    var defaults = {\r\n      data: function (params) {\r\n        return $.extend({}, params, {\r\n          q: params.term\r\n        });\r\n      },\r\n      transport: function (params, success, failure) {\r\n        var $request = $.ajax(params);\r\n\r\n        $request.then(success);\r\n        $request.fail(failure);\r\n\r\n        return $request;\r\n      }\r\n    };\r\n\r\n    return $.extend({}, defaults, options, true);\r\n  };\r\n\r\n  AjaxAdapter.prototype.processResults = function (results) {\r\n    return results;\r\n  };\r\n\r\n  AjaxAdapter.prototype.query = function (params, callback) {\r\n    var matches = [];\r\n    var self = this;\r\n\r\n    if (this._request != null) {\r\n      // JSONP requests cannot always be aborted\r\n      if ($.isFunction(this._request.abort)) {\r\n        this._request.abort();\r\n      }\r\n\r\n      this._request = null;\r\n    }\r\n\r\n    var options = $.extend({\r\n      type: 'GET'\r\n    }, this.ajaxOptions);\r\n\r\n    if (typeof options.url === 'function') {\r\n      options.url = options.url.call(this.$element, params);\r\n    }\r\n\r\n    if (typeof options.data === 'function') {\r\n      options.data = options.data.call(this.$element, params);\r\n    }\r\n\r\n    function request () {\r\n      var $request = options.transport(options, function (data) {\r\n        var results = self.processResults(data, params);\r\n\r\n        if (self.options.get('debug') && window.console && console.error) {\r\n          // Check to make sure that the response included a `results` key.\r\n          if (!results || !results.results || !$.isArray(results.results)) {\r\n            console.error(\r\n              'Select2: The AJAX results did not return an array in the ' +\r\n              '`results` key of the response.'\r\n            );\r\n          }\r\n        }\r\n\r\n        callback(results);\r\n      }, function () {\r\n        // Attempt to detect if a request was aborted\r\n        // Only works if the transport exposes a status property\r\n        if ($request.status && $request.status === '0') {\r\n          return;\r\n        }\r\n\r\n        self.trigger('results:message', {\r\n          message: 'errorLoading'\r\n        });\r\n      });\r\n\r\n      self._request = $request;\r\n    }\r\n\r\n    if (this.ajaxOptions.delay && params.term != null) {\r\n      if (this._queryTimeout) {\r\n        window.clearTimeout(this._queryTimeout);\r\n      }\r\n\r\n      this._queryTimeout = window.setTimeout(request, this.ajaxOptions.delay);\r\n    } else {\r\n      request();\r\n    }\r\n  };\r\n\r\n  return AjaxAdapter;\r\n});\r\n\nS2.define('select2/data/tags',[\r\n  'jquery'\r\n], function ($) {\r\n  function Tags (decorated, $element, options) {\r\n    var tags = options.get('tags');\r\n\r\n    var createTag = options.get('createTag');\r\n\r\n    if (createTag !== undefined) {\r\n      this.createTag = createTag;\r\n    }\r\n\r\n    var insertTag = options.get('insertTag');\r\n\r\n    if (insertTag !== undefined) {\r\n        this.insertTag = insertTag;\r\n    }\r\n\r\n    decorated.call(this, $element, options);\r\n\r\n    if ($.isArray(tags)) {\r\n      for (var t = 0; t < tags.length; t++) {\r\n        var tag = tags[t];\r\n        var item = this._normalizeItem(tag);\r\n\r\n        var $option = this.option(item);\r\n\r\n        this.$element.append($option);\r\n      }\r\n    }\r\n  }\r\n\r\n  Tags.prototype.query = function (decorated, params, callback) {\r\n    var self = this;\r\n\r\n    this._removeOldTags();\r\n\r\n    if (params.term == null || params.page != null) {\r\n      decorated.call(this, params, callback);\r\n      return;\r\n    }\r\n\r\n    function wrapper (obj, child) {\r\n      var data = obj.results;\r\n\r\n      for (var i = 0; i < data.length; i++) {\r\n        var option = data[i];\r\n\r\n        var checkChildren = (\r\n          option.children != null &&\r\n          !wrapper({\r\n            results: option.children\r\n          }, true)\r\n        );\r\n\r\n        var checkText = option.text === params.term;\r\n\r\n        if (checkText || checkChildren) {\r\n          if (child) {\r\n            return false;\r\n          }\r\n\r\n          obj.data = data;\r\n          callback(obj);\r\n\r\n          return;\r\n        }\r\n      }\r\n\r\n      if (child) {\r\n        return true;\r\n      }\r\n\r\n      var tag = self.createTag(params);\r\n\r\n      if (tag != null) {\r\n        var $option = self.option(tag);\r\n        $option.attr('data-select2-tag', true);\r\n\r\n        self.addOptions([$option]);\r\n\r\n        self.insertTag(data, tag);\r\n      }\r\n\r\n      obj.results = data;\r\n\r\n      callback(obj);\r\n    }\r\n\r\n    decorated.call(this, params, wrapper);\r\n  };\r\n\r\n  Tags.prototype.createTag = function (decorated, params) {\r\n    var term = $.trim(params.term);\r\n\r\n    if (term === '') {\r\n      return null;\r\n    }\r\n\r\n    return {\r\n      id: term,\r\n      text: term\r\n    };\r\n  };\r\n\r\n  Tags.prototype.insertTag = function (_, data, tag) {\r\n    data.unshift(tag);\r\n  };\r\n\r\n  Tags.prototype._removeOldTags = function (_) {\r\n    var tag = this._lastTag;\r\n\r\n    var $options = this.$element.find('option[data-select2-tag]');\r\n\r\n    $options.each(function () {\r\n      if (this.selected) {\r\n        return;\r\n      }\r\n\r\n      $(this).remove();\r\n    });\r\n  };\r\n\r\n  return Tags;\r\n});\r\n\nS2.define('select2/data/tokenizer',[\r\n  'jquery'\r\n], function ($) {\r\n  function Tokenizer (decorated, $element, options) {\r\n    var tokenizer = options.get('tokenizer');\r\n\r\n    if (tokenizer !== undefined) {\r\n      this.tokenizer = tokenizer;\r\n    }\r\n\r\n    decorated.call(this, $element, options);\r\n  }\r\n\r\n  Tokenizer.prototype.bind = function (decorated, container, $container) {\r\n    decorated.call(this, container, $container);\r\n\r\n    this.$search =  container.dropdown.$search || container.selection.$search ||\r\n      $container.find('.select2-search__field');\r\n  };\r\n\r\n  Tokenizer.prototype.query = function (decorated, params, callback) {\r\n    var self = this;\r\n\r\n    function createAndSelect (data) {\r\n      // Normalize the data object so we can use it for checks\r\n      var item = self._normalizeItem(data);\r\n\r\n      // Check if the data object already exists as a tag\r\n      // Select it if it doesn't\r\n      var $existingOptions = self.$element.find('option').filter(function () {\r\n        return $(this).val() === item.id;\r\n      });\r\n\r\n      // If an existing option wasn't found for it, create the option\r\n      if (!$existingOptions.length) {\r\n        var $option = self.option(item);\r\n        $option.attr('data-select2-tag', true);\r\n\r\n        self._removeOldTags();\r\n        self.addOptions([$option]);\r\n      }\r\n\r\n      // Select the item, now that we know there is an option for it\r\n      select(item);\r\n    }\r\n\r\n    function select (data) {\r\n      self.trigger('select', {\r\n        data: data\r\n      });\r\n    }\r\n\r\n    params.term = params.term || '';\r\n\r\n    var tokenData = this.tokenizer(params, this.options, createAndSelect);\r\n\r\n    if (tokenData.term !== params.term) {\r\n      // Replace the search term if we have the search box\r\n      if (this.$search.length) {\r\n        this.$search.val(tokenData.term);\r\n        this.$search.focus();\r\n      }\r\n\r\n      params.term = tokenData.term;\r\n    }\r\n\r\n    decorated.call(this, params, callback);\r\n  };\r\n\r\n  Tokenizer.prototype.tokenizer = function (_, params, options, callback) {\r\n    var separators = options.get('tokenSeparators') || [];\r\n    var term = params.term;\r\n    var i = 0;\r\n\r\n    var createTag = this.createTag || function (params) {\r\n      return {\r\n        id: params.term,\r\n        text: params.term\r\n      };\r\n    };\r\n\r\n    while (i < term.length) {\r\n      var termChar = term[i];\r\n\r\n      if ($.inArray(termChar, separators) === -1) {\r\n        i++;\r\n\r\n        continue;\r\n      }\r\n\r\n      var part = term.substr(0, i);\r\n      var partParams = $.extend({}, params, {\r\n        term: part\r\n      });\r\n\r\n      var data = createTag(partParams);\r\n\r\n      if (data == null) {\r\n        i++;\r\n        continue;\r\n      }\r\n\r\n      callback(data);\r\n\r\n      // Reset the term to not include the tokenized portion\r\n      term = term.substr(i + 1) || '';\r\n      i = 0;\r\n    }\r\n\r\n    return {\r\n      term: term\r\n    };\r\n  };\r\n\r\n  return Tokenizer;\r\n});\r\n\nS2.define('select2/data/minimumInputLength',[\r\n\r\n], function () {\r\n  function MinimumInputLength (decorated, $e, options) {\r\n    this.minimumInputLength = options.get('minimumInputLength');\r\n\r\n    decorated.call(this, $e, options);\r\n  }\r\n\r\n  MinimumInputLength.prototype.query = function (decorated, params, callback) {\r\n    params.term = params.term || '';\r\n\r\n    if (params.term.length < this.minimumInputLength) {\r\n      this.trigger('results:message', {\r\n        message: 'inputTooShort',\r\n        args: {\r\n          minimum: this.minimumInputLength,\r\n          input: params.term,\r\n          params: params\r\n        }\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    decorated.call(this, params, callback);\r\n  };\r\n\r\n  return MinimumInputLength;\r\n});\r\n\nS2.define('select2/data/maximumInputLength',[\r\n\r\n], function () {\r\n  function MaximumInputLength (decorated, $e, options) {\r\n    this.maximumInputLength = options.get('maximumInputLength');\r\n\r\n    decorated.call(this, $e, options);\r\n  }\r\n\r\n  MaximumInputLength.prototype.query = function (decorated, params, callback) {\r\n    params.term = params.term || '';\r\n\r\n    if (this.maximumInputLength > 0 &&\r\n        params.term.length > this.maximumInputLength) {\r\n      this.trigger('results:message', {\r\n        message: 'inputTooLong',\r\n        args: {\r\n          maximum: this.maximumInputLength,\r\n          input: params.term,\r\n          params: params\r\n        }\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    decorated.call(this, params, callback);\r\n  };\r\n\r\n  return MaximumInputLength;\r\n});\r\n\nS2.define('select2/data/maximumSelectionLength',[\r\n\r\n], function (){\r\n  function MaximumSelectionLength (decorated, $e, options) {\r\n    this.maximumSelectionLength = options.get('maximumSelectionLength');\r\n\r\n    decorated.call(this, $e, options);\r\n  }\r\n\r\n  MaximumSelectionLength.prototype.query =\r\n    function (decorated, params, callback) {\r\n      var self = this;\r\n\r\n      this.current(function (currentData) {\r\n        var count = currentData != null ? currentData.length : 0;\r\n        if (self.maximumSelectionLength > 0 &&\r\n          count >= self.maximumSelectionLength) {\r\n          self.trigger('results:message', {\r\n            message: 'maximumSelected',\r\n            args: {\r\n              maximum: self.maximumSelectionLength\r\n            }\r\n          });\r\n          return;\r\n        }\r\n        decorated.call(self, params, callback);\r\n      });\r\n  };\r\n\r\n  return MaximumSelectionLength;\r\n});\r\n\nS2.define('select2/dropdown',[\r\n  'jquery',\r\n  './utils'\r\n], function ($, Utils) {\r\n  function Dropdown ($element, options) {\r\n    this.$element = $element;\r\n    this.options = options;\r\n\r\n    Dropdown.__super__.constructor.call(this);\r\n  }\r\n\r\n  Utils.Extend(Dropdown, Utils.Observable);\r\n\r\n  Dropdown.prototype.render = function () {\r\n    var $dropdown = $(\r\n      '<span class=\"select2-dropdown\">' +\r\n        '<span class=\"select2-results\"></span>' +\r\n      '</span>'\r\n    );\r\n\r\n    $dropdown.attr('dir', this.options.get('dir'));\r\n\r\n    this.$dropdown = $dropdown;\r\n\r\n    return $dropdown;\r\n  };\r\n\r\n  Dropdown.prototype.bind = function () {\r\n    // Should be implemented in subclasses\r\n  };\r\n\r\n  Dropdown.prototype.position = function ($dropdown, $container) {\r\n    // Should be implmented in subclasses\r\n  };\r\n\r\n  Dropdown.prototype.destroy = function () {\r\n    // Remove the dropdown from the DOM\r\n    this.$dropdown.remove();\r\n  };\r\n\r\n  return Dropdown;\r\n});\r\n\nS2.define('select2/dropdown/search',[\r\n  'jquery',\r\n  '../utils'\r\n], function ($, Utils) {\r\n  function Search () { }\r\n\r\n  Search.prototype.render = function (decorated) {\r\n    var $rendered = decorated.call(this);\r\n\r\n    var $search = $(\r\n      '<span class=\"select2-search select2-search--dropdown\">' +\r\n        '<input class=\"select2-search__field\" type=\"search\" tabindex=\"-1\"' +\r\n        ' autocomplete=\"off\" autocorrect=\"off\" autocapitalize=\"off\"' +\r\n        ' spellcheck=\"false\" role=\"textbox\" />' +\r\n      '</span>'\r\n    );\r\n\r\n    this.$searchContainer = $search;\r\n    this.$search = $search.find('input');\r\n\r\n    $rendered.prepend($search);\r\n\r\n    return $rendered;\r\n  };\r\n\r\n  Search.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    this.$search.on('keydown', function (evt) {\r\n      self.trigger('keypress', evt);\r\n\r\n      self._keyUpPrevented = evt.isDefaultPrevented();\r\n    });\r\n\r\n    // Workaround for browsers which do not support the `input` event\r\n    // This will prevent double-triggering of events for browsers which support\r\n    // both the `keyup` and `input` events.\r\n    this.$search.on('input', function (evt) {\r\n      // Unbind the duplicated `keyup` event\r\n      $(this).off('keyup');\r\n    });\r\n\r\n    this.$search.on('keyup input', function (evt) {\r\n      self.handleSearch(evt);\r\n    });\r\n\r\n    container.on('open', function () {\r\n      self.$search.attr('tabindex', 0);\r\n\r\n      self.$search.focus();\r\n\r\n      window.setTimeout(function () {\r\n        self.$search.focus();\r\n      }, 0);\r\n    });\r\n\r\n    container.on('close', function () {\r\n      self.$search.attr('tabindex', -1);\r\n\r\n      self.$search.val('');\r\n    });\r\n\r\n    container.on('focus', function () {\r\n      if (container.isOpen()) {\r\n        self.$search.focus();\r\n      }\r\n    });\r\n\r\n    container.on('results:all', function (params) {\r\n      if (params.query.term == null || params.query.term === '') {\r\n        var showSearch = self.showSearch(params);\r\n\r\n        if (showSearch) {\r\n          self.$searchContainer.removeClass('select2-search--hide');\r\n        } else {\r\n          self.$searchContainer.addClass('select2-search--hide');\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  Search.prototype.handleSearch = function (evt) {\r\n    if (!this._keyUpPrevented) {\r\n      var input = this.$search.val();\r\n\r\n      this.trigger('query', {\r\n        term: input\r\n      });\r\n    }\r\n\r\n    this._keyUpPrevented = false;\r\n  };\r\n\r\n  Search.prototype.showSearch = function (_, params) {\r\n    return true;\r\n  };\r\n\r\n  return Search;\r\n});\r\n\nS2.define('select2/dropdown/hidePlaceholder',[\r\n\r\n], function () {\r\n  function HidePlaceholder (decorated, $element, options, dataAdapter) {\r\n    this.placeholder = this.normalizePlaceholder(options.get('placeholder'));\r\n\r\n    decorated.call(this, $element, options, dataAdapter);\r\n  }\r\n\r\n  HidePlaceholder.prototype.append = function (decorated, data) {\r\n    data.results = this.removePlaceholder(data.results);\r\n\r\n    decorated.call(this, data);\r\n  };\r\n\r\n  HidePlaceholder.prototype.normalizePlaceholder = function (_, placeholder) {\r\n    if (typeof placeholder === 'string') {\r\n      placeholder = {\r\n        id: '',\r\n        text: placeholder\r\n      };\r\n    }\r\n\r\n    return placeholder;\r\n  };\r\n\r\n  HidePlaceholder.prototype.removePlaceholder = function (_, data) {\r\n    var modifiedData = data.slice(0);\r\n\r\n    for (var d = data.length - 1; d >= 0; d--) {\r\n      var item = data[d];\r\n\r\n      if (this.placeholder.id === item.id) {\r\n        modifiedData.splice(d, 1);\r\n      }\r\n    }\r\n\r\n    return modifiedData;\r\n  };\r\n\r\n  return HidePlaceholder;\r\n});\r\n\nS2.define('select2/dropdown/infiniteScroll',[\r\n  'jquery'\r\n], function ($) {\r\n  function InfiniteScroll (decorated, $element, options, dataAdapter) {\r\n    this.lastParams = {};\r\n\r\n    decorated.call(this, $element, options, dataAdapter);\r\n\r\n    this.$loadingMore = this.createLoadingMore();\r\n    this.loading = false;\r\n  }\r\n\r\n  InfiniteScroll.prototype.append = function (decorated, data) {\r\n    this.$loadingMore.remove();\r\n    this.loading = false;\r\n\r\n    decorated.call(this, data);\r\n\r\n    if (this.showLoadingMore(data)) {\r\n      this.$results.append(this.$loadingMore);\r\n    }\r\n  };\r\n\r\n  InfiniteScroll.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    container.on('query', function (params) {\r\n      self.lastParams = params;\r\n      self.loading = true;\r\n    });\r\n\r\n    container.on('query:append', function (params) {\r\n      self.lastParams = params;\r\n      self.loading = true;\r\n    });\r\n\r\n    this.$results.on('scroll', function () {\r\n      var isLoadMoreVisible = $.contains(\r\n        document.documentElement,\r\n        self.$loadingMore[0]\r\n      );\r\n\r\n      if (self.loading || !isLoadMoreVisible) {\r\n        return;\r\n      }\r\n\r\n      var currentOffset = self.$results.offset().top +\r\n        self.$results.outerHeight(false);\r\n      var loadingMoreOffset = self.$loadingMore.offset().top +\r\n        self.$loadingMore.outerHeight(false);\r\n\r\n      if (currentOffset + 50 >= loadingMoreOffset) {\r\n        self.loadMore();\r\n      }\r\n    });\r\n  };\r\n\r\n  InfiniteScroll.prototype.loadMore = function () {\r\n    this.loading = true;\r\n\r\n    var params = $.extend({}, {page: 1}, this.lastParams);\r\n\r\n    params.page++;\r\n\r\n    this.trigger('query:append', params);\r\n  };\r\n\r\n  InfiniteScroll.prototype.showLoadingMore = function (_, data) {\r\n    return data.pagination && data.pagination.more;\r\n  };\r\n\r\n  InfiniteScroll.prototype.createLoadingMore = function () {\r\n    var $option = $(\r\n      '<li ' +\r\n      'class=\"select2-results__option select2-results__option--load-more\"' +\r\n      'role=\"treeitem\" aria-disabled=\"true\"></li>'\r\n    );\r\n\r\n    var message = this.options.get('translations').get('loadingMore');\r\n\r\n    $option.html(message(this.lastParams));\r\n\r\n    return $option;\r\n  };\r\n\r\n  return InfiniteScroll;\r\n});\r\n\nS2.define('select2/dropdown/attachBody',[\r\n  'jquery',\r\n  '../utils'\r\n], function ($, Utils) {\r\n  function AttachBody (decorated, $element, options) {\r\n    this.$dropdownParent = options.get('dropdownParent') || $(document.body);\r\n\r\n    decorated.call(this, $element, options);\r\n  }\r\n\r\n  AttachBody.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    var setupResultsEvents = false;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    container.on('open', function () {\r\n      self._showDropdown();\r\n      self._attachPositioningHandler(container);\r\n\r\n      if (!setupResultsEvents) {\r\n        setupResultsEvents = true;\r\n\r\n        container.on('results:all', function () {\r\n          self._positionDropdown();\r\n          self._resizeDropdown();\r\n        });\r\n\r\n        container.on('results:append', function () {\r\n          self._positionDropdown();\r\n          self._resizeDropdown();\r\n        });\r\n      }\r\n    });\r\n\r\n    container.on('close', function () {\r\n      self._hideDropdown();\r\n      self._detachPositioningHandler(container);\r\n    });\r\n\r\n    this.$dropdownContainer.on('mousedown', function (evt) {\r\n      evt.stopPropagation();\r\n    });\r\n  };\r\n\r\n  AttachBody.prototype.destroy = function (decorated) {\r\n    decorated.call(this);\r\n\r\n    this.$dropdownContainer.remove();\r\n  };\r\n\r\n  AttachBody.prototype.position = function (decorated, $dropdown, $container) {\r\n    // Clone all of the container classes\r\n    $dropdown.attr('class', $container.attr('class'));\r\n\r\n    $dropdown.removeClass('select2');\r\n    $dropdown.addClass('select2-container--open');\r\n\r\n    $dropdown.css({\r\n      position: 'absolute',\r\n      top: -999999\r\n    });\r\n\r\n    this.$container = $container;\r\n  };\r\n\r\n  AttachBody.prototype.render = function (decorated) {\r\n    var $container = $('<span></span>');\r\n\r\n    var $dropdown = decorated.call(this);\r\n    $container.append($dropdown);\r\n\r\n    this.$dropdownContainer = $container;\r\n\r\n    return $container;\r\n  };\r\n\r\n  AttachBody.prototype._hideDropdown = function (decorated) {\r\n    this.$dropdownContainer.detach();\r\n  };\r\n\r\n  AttachBody.prototype._attachPositioningHandler =\r\n      function (decorated, container) {\r\n    var self = this;\r\n\r\n    var scrollEvent = 'scroll.select2.' + container.id;\r\n    var resizeEvent = 'resize.select2.' + container.id;\r\n    var orientationEvent = 'orientationchange.select2.' + container.id;\r\n\r\n    var $watchers = this.$container.parents().filter(Utils.hasScroll);\r\n    $watchers.each(function () {\r\n      $(this).data('select2-scroll-position', {\r\n        x: $(this).scrollLeft(),\r\n        y: $(this).scrollTop()\r\n      });\r\n    });\r\n\r\n    $watchers.on(scrollEvent, function (ev) {\r\n      var position = $(this).data('select2-scroll-position');\r\n      $(this).scrollTop(position.y);\r\n    });\r\n\r\n    $(window).on(scrollEvent + ' ' + resizeEvent + ' ' + orientationEvent,\r\n      function (e) {\r\n      self._positionDropdown();\r\n      self._resizeDropdown();\r\n    });\r\n  };\r\n\r\n  AttachBody.prototype._detachPositioningHandler =\r\n      function (decorated, container) {\r\n    var scrollEvent = 'scroll.select2.' + container.id;\r\n    var resizeEvent = 'resize.select2.' + container.id;\r\n    var orientationEvent = 'orientationchange.select2.' + container.id;\r\n\r\n    var $watchers = this.$container.parents().filter(Utils.hasScroll);\r\n    $watchers.off(scrollEvent);\r\n\r\n    $(window).off(scrollEvent + ' ' + resizeEvent + ' ' + orientationEvent);\r\n  };\r\n\r\n  AttachBody.prototype._positionDropdown = function () {\r\n    var $window = $(window);\r\n\r\n    var isCurrentlyAbove = this.$dropdown.hasClass('select2-dropdown--above');\r\n    var isCurrentlyBelow = this.$dropdown.hasClass('select2-dropdown--below');\r\n\r\n    var newDirection = null;\r\n\r\n    var offset = this.$container.offset();\r\n\r\n    offset.bottom = offset.top + this.$container.outerHeight(false);\r\n\r\n    var container = {\r\n      height: this.$container.outerHeight(false)\r\n    };\r\n\r\n    container.top = offset.top;\r\n    container.bottom = offset.top + container.height;\r\n\r\n    var dropdown = {\r\n      height: this.$dropdown.outerHeight(false)\r\n    };\r\n\r\n    var viewport = {\r\n      top: $window.scrollTop(),\r\n      bottom: $window.scrollTop() + $window.height()\r\n    };\r\n\r\n    var enoughRoomAbove = viewport.top < (offset.top - dropdown.height);\r\n    var enoughRoomBelow = viewport.bottom > (offset.bottom + dropdown.height);\r\n\r\n    var css = {\r\n      left: offset.left,\r\n      top: container.bottom\r\n    };\r\n\r\n    // Determine what the parent element is to use for calciulating the offset\r\n    var $offsetParent = this.$dropdownParent;\r\n\r\n    // For statically positoned elements, we need to get the element\r\n    // that is determining the offset\r\n    if ($offsetParent.css('position') === 'static') {\r\n      $offsetParent = $offsetParent.offsetParent();\r\n    }\r\n\r\n    var parentOffset = $offsetParent.offset();\r\n\r\n    css.top -= parentOffset.top;\r\n    css.left -= parentOffset.left;\r\n\r\n    if (!isCurrentlyAbove && !isCurrentlyBelow) {\r\n      newDirection = 'below';\r\n    }\r\n\r\n    if (!enoughRoomBelow && enoughRoomAbove && !isCurrentlyAbove) {\r\n      newDirection = 'above';\r\n    } else if (!enoughRoomAbove && enoughRoomBelow && isCurrentlyAbove) {\r\n      newDirection = 'below';\r\n    }\r\n\r\n    if (newDirection == 'above' ||\r\n      (isCurrentlyAbove && newDirection !== 'below')) {\r\n      css.top = container.top - parentOffset.top - dropdown.height;\r\n    }\r\n\r\n    if (newDirection != null) {\r\n      this.$dropdown\r\n        .removeClass('select2-dropdown--below select2-dropdown--above')\r\n        .addClass('select2-dropdown--' + newDirection);\r\n      this.$container\r\n        .removeClass('select2-container--below select2-container--above')\r\n        .addClass('select2-container--' + newDirection);\r\n    }\r\n\r\n    this.$dropdownContainer.css(css);\r\n  };\r\n\r\n  AttachBody.prototype._resizeDropdown = function () {\r\n    var css = {\r\n      width: this.$container.outerWidth(false) + 'px'\r\n    };\r\n\r\n    if (this.options.get('dropdownAutoWidth')) {\r\n      css.minWidth = css.width;\r\n      css.position = 'relative';\r\n      css.width = 'auto';\r\n    }\r\n\r\n    this.$dropdown.css(css);\r\n  };\r\n\r\n  AttachBody.prototype._showDropdown = function (decorated) {\r\n    this.$dropdownContainer.appendTo(this.$dropdownParent);\r\n\r\n    this._positionDropdown();\r\n    this._resizeDropdown();\r\n  };\r\n\r\n  return AttachBody;\r\n});\r\n\nS2.define('select2/dropdown/minimumResultsForSearch',[\r\n\r\n], function () {\r\n  function countResults (data) {\r\n    var count = 0;\r\n\r\n    for (var d = 0; d < data.length; d++) {\r\n      var item = data[d];\r\n\r\n      if (item.children) {\r\n        count += countResults(item.children);\r\n      } else {\r\n        count++;\r\n      }\r\n    }\r\n\r\n    return count;\r\n  }\r\n\r\n  function MinimumResultsForSearch (decorated, $element, options, dataAdapter) {\r\n    this.minimumResultsForSearch = options.get('minimumResultsForSearch');\r\n\r\n    if (this.minimumResultsForSearch < 0) {\r\n      this.minimumResultsForSearch = Infinity;\r\n    }\r\n\r\n    decorated.call(this, $element, options, dataAdapter);\r\n  }\r\n\r\n  MinimumResultsForSearch.prototype.showSearch = function (decorated, params) {\r\n    if (countResults(params.data.results) < this.minimumResultsForSearch) {\r\n      return false;\r\n    }\r\n\r\n    return decorated.call(this, params);\r\n  };\r\n\r\n  return MinimumResultsForSearch;\r\n});\r\n\nS2.define('select2/dropdown/selectOnClose',[\r\n\r\n], function () {\r\n  function SelectOnClose () { }\r\n\r\n  SelectOnClose.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    container.on('close', function (params) {\r\n      self._handleSelectOnClose(params);\r\n    });\r\n  };\r\n\r\n  SelectOnClose.prototype._handleSelectOnClose = function (_, params) {\r\n    if (params && params.originalSelect2Event != null) {\r\n      var event = params.originalSelect2Event;\r\n\r\n      // Don't select an item if the close event was triggered from a select or\r\n      // unselect event\r\n      if (event._type === 'select' || event._type === 'unselect') {\r\n        return;\r\n      }\r\n    }\r\n\r\n    var $highlightedResults = this.getHighlightedResults();\r\n\r\n    // Only select highlighted results\r\n    if ($highlightedResults.length < 1) {\r\n      return;\r\n    }\r\n\r\n    var data = $highlightedResults.data('data');\r\n\r\n    // Don't re-select already selected resulte\r\n    if (\r\n      (data.element != null && data.element.selected) ||\r\n      (data.element == null && data.selected)\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    this.trigger('select', {\r\n        data: data\r\n    });\r\n  };\r\n\r\n  return SelectOnClose;\r\n});\r\n\nS2.define('select2/dropdown/closeOnSelect',[\r\n\r\n], function () {\r\n  function CloseOnSelect () { }\r\n\r\n  CloseOnSelect.prototype.bind = function (decorated, container, $container) {\r\n    var self = this;\r\n\r\n    decorated.call(this, container, $container);\r\n\r\n    container.on('select', function (evt) {\r\n      self._selectTriggered(evt);\r\n    });\r\n\r\n    container.on('unselect', function (evt) {\r\n      self._selectTriggered(evt);\r\n    });\r\n  };\r\n\r\n  CloseOnSelect.prototype._selectTriggered = function (_, evt) {\r\n    var originalEvent = evt.originalEvent;\r\n\r\n    // Don't close if the control key is being held\r\n    if (originalEvent && originalEvent.ctrlKey) {\r\n      return;\r\n    }\r\n\r\n    this.trigger('close', {\r\n      originalEvent: originalEvent,\r\n      originalSelect2Event: evt\r\n    });\r\n  };\r\n\r\n  return CloseOnSelect;\r\n});\r\n\nS2.define('select2/i18n/en',[],function () {\r\n  // English\r\n  return {\r\n    errorLoading: function () {\r\n      return 'The results could not be loaded.';\r\n    },\r\n    inputTooLong: function (args) {\r\n      var overChars = args.input.length - args.maximum;\r\n\r\n      var message = 'Please delete ' + overChars + ' character';\r\n\r\n      if (overChars != 1) {\r\n        message += 's';\r\n      }\r\n\r\n      return message;\r\n    },\r\n    inputTooShort: function (args) {\r\n      var remainingChars = args.minimum - args.input.length;\r\n\r\n      var message = 'Please enter ' + remainingChars + ' or more characters';\r\n\r\n      return message;\r\n    },\r\n    loadingMore: function () {\r\n      return 'Loading more results…';\r\n    },\r\n    maximumSelected: function (args) {\r\n      var message = 'You can only select ' + args.maximum + ' item';\r\n\r\n      if (args.maximum != 1) {\r\n        message += 's';\r\n      }\r\n\r\n      return message;\r\n    },\r\n    noResults: function () {\r\n      return 'No results found';\r\n    },\r\n    searching: function () {\r\n      return 'Searching…';\r\n    }\r\n  };\r\n});\r\n\nS2.define('select2/defaults',[\r\n  'jquery',\r\n  'require',\r\n\r\n  './results',\r\n\r\n  './selection/single',\r\n  './selection/multiple',\r\n  './selection/placeholder',\r\n  './selection/allowClear',\r\n  './selection/search',\r\n  './selection/eventRelay',\r\n\r\n  './utils',\r\n  './translation',\r\n  './diacritics',\r\n\r\n  './data/select',\r\n  './data/array',\r\n  './data/ajax',\r\n  './data/tags',\r\n  './data/tokenizer',\r\n  './data/minimumInputLength',\r\n  './data/maximumInputLength',\r\n  './data/maximumSelectionLength',\r\n\r\n  './dropdown',\r\n  './dropdown/search',\r\n  './dropdown/hidePlaceholder',\r\n  './dropdown/infiniteScroll',\r\n  './dropdown/attachBody',\r\n  './dropdown/minimumResultsForSearch',\r\n  './dropdown/selectOnClose',\r\n  './dropdown/closeOnSelect',\r\n\r\n  './i18n/en'\r\n], function ($, require,\r\n\r\n             ResultsList,\r\n\r\n             SingleSelection, MultipleSelection, Placeholder, AllowClear,\r\n             SelectionSearch, EventRelay,\r\n\r\n             Utils, Translation, DIACRITICS,\r\n\r\n             SelectData, ArrayData, AjaxData, Tags, Tokenizer,\r\n             MinimumInputLength, MaximumInputLength, MaximumSelectionLength,\r\n\r\n             Dropdown, DropdownSearch, HidePlaceholder, InfiniteScroll,\r\n             AttachBody, MinimumResultsForSearch, SelectOnClose, CloseOnSelect,\r\n\r\n             EnglishTranslation) {\r\n  function Defaults () {\r\n    this.reset();\r\n  }\r\n\r\n  Defaults.prototype.apply = function (options) {\r\n    options = $.extend(true, {}, this.defaults, options);\r\n\r\n    if (options.dataAdapter == null) {\r\n      if (options.ajax != null) {\r\n        options.dataAdapter = AjaxData;\r\n      } else if (options.data != null) {\r\n        options.dataAdapter = ArrayData;\r\n      } else {\r\n        options.dataAdapter = SelectData;\r\n      }\r\n\r\n      if (options.minimumInputLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(\r\n          options.dataAdapter,\r\n          MinimumInputLength\r\n        );\r\n      }\r\n\r\n      if (options.maximumInputLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(\r\n          options.dataAdapter,\r\n          MaximumInputLength\r\n        );\r\n      }\r\n\r\n      if (options.maximumSelectionLength > 0) {\r\n        options.dataAdapter = Utils.Decorate(\r\n          options.dataAdapter,\r\n          MaximumSelectionLength\r\n        );\r\n      }\r\n\r\n      if (options.tags) {\r\n        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tags);\r\n      }\r\n\r\n      if (options.tokenSeparators != null || options.tokenizer != null) {\r\n        options.dataAdapter = Utils.Decorate(\r\n          options.dataAdapter,\r\n          Tokenizer\r\n        );\r\n      }\r\n\r\n      if (options.query != null) {\r\n        var Query = require(options.amdBase + 'compat/query');\r\n\r\n        options.dataAdapter = Utils.Decorate(\r\n          options.dataAdapter,\r\n          Query\r\n        );\r\n      }\r\n\r\n      if (options.initSelection != null) {\r\n        var InitSelection = require(options.amdBase + 'compat/initSelection');\r\n\r\n        options.dataAdapter = Utils.Decorate(\r\n          options.dataAdapter,\r\n          InitSelection\r\n        );\r\n      }\r\n    }\r\n\r\n    if (options.resultsAdapter == null) {\r\n      options.resultsAdapter = ResultsList;\r\n\r\n      if (options.ajax != null) {\r\n        options.resultsAdapter = Utils.Decorate(\r\n          options.resultsAdapter,\r\n          InfiniteScroll\r\n        );\r\n      }\r\n\r\n      if (options.placeholder != null) {\r\n        options.resultsAdapter = Utils.Decorate(\r\n          options.resultsAdapter,\r\n          HidePlaceholder\r\n        );\r\n      }\r\n\r\n      if (options.selectOnClose) {\r\n        options.resultsAdapter = Utils.Decorate(\r\n          options.resultsAdapter,\r\n          SelectOnClose\r\n        );\r\n      }\r\n    }\r\n\r\n    if (options.dropdownAdapter == null) {\r\n      if (options.multiple) {\r\n        options.dropdownAdapter = Dropdown;\r\n      } else {\r\n        var SearchableDropdown = Utils.Decorate(Dropdown, DropdownSearch);\r\n\r\n        options.dropdownAdapter = SearchableDropdown;\r\n      }\r\n\r\n      if (options.minimumResultsForSearch !== 0) {\r\n        options.dropdownAdapter = Utils.Decorate(\r\n          options.dropdownAdapter,\r\n          MinimumResultsForSearch\r\n        );\r\n      }\r\n\r\n      if (options.closeOnSelect) {\r\n        options.dropdownAdapter = Utils.Decorate(\r\n          options.dropdownAdapter,\r\n          CloseOnSelect\r\n        );\r\n      }\r\n\r\n      if (\r\n        options.dropdownCssClass != null ||\r\n        options.dropdownCss != null ||\r\n        options.adaptDropdownCssClass != null\r\n      ) {\r\n        var DropdownCSS = require(options.amdBase + 'compat/dropdownCss');\r\n\r\n        options.dropdownAdapter = Utils.Decorate(\r\n          options.dropdownAdapter,\r\n          DropdownCSS\r\n        );\r\n      }\r\n\r\n      options.dropdownAdapter = Utils.Decorate(\r\n        options.dropdownAdapter,\r\n        AttachBody\r\n      );\r\n    }\r\n\r\n    if (options.selectionAdapter == null) {\r\n      if (options.multiple) {\r\n        options.selectionAdapter = MultipleSelection;\r\n      } else {\r\n        options.selectionAdapter = SingleSelection;\r\n      }\r\n\r\n      // Add the placeholder mixin if a placeholder was specified\r\n      if (options.placeholder != null) {\r\n        options.selectionAdapter = Utils.Decorate(\r\n          options.selectionAdapter,\r\n          Placeholder\r\n        );\r\n      }\r\n\r\n      if (options.allowClear) {\r\n        options.selectionAdapter = Utils.Decorate(\r\n          options.selectionAdapter,\r\n          AllowClear\r\n        );\r\n      }\r\n\r\n      if (options.multiple) {\r\n        options.selectionAdapter = Utils.Decorate(\r\n          options.selectionAdapter,\r\n          SelectionSearch\r\n        );\r\n      }\r\n\r\n      if (\r\n        options.containerCssClass != null ||\r\n        options.containerCss != null ||\r\n        options.adaptContainerCssClass != null\r\n      ) {\r\n        var ContainerCSS = require(options.amdBase + 'compat/containerCss');\r\n\r\n        options.selectionAdapter = Utils.Decorate(\r\n          options.selectionAdapter,\r\n          ContainerCSS\r\n        );\r\n      }\r\n\r\n      options.selectionAdapter = Utils.Decorate(\r\n        options.selectionAdapter,\r\n        EventRelay\r\n      );\r\n    }\r\n\r\n    if (typeof options.language === 'string') {\r\n      // Check if the language is specified with a region\r\n      if (options.language.indexOf('-') > 0) {\r\n        // Extract the region information if it is included\r\n        var languageParts = options.language.split('-');\r\n        var baseLanguage = languageParts[0];\r\n\r\n        options.language = [options.language, baseLanguage];\r\n      } else {\r\n        options.language = [options.language];\r\n      }\r\n    }\r\n\r\n    if ($.isArray(options.language)) {\r\n      var languages = new Translation();\r\n      options.language.push('en');\r\n\r\n      var languageNames = options.language;\r\n\r\n      for (var l = 0; l < languageNames.length; l++) {\r\n        var name = languageNames[l];\r\n        var language = {};\r\n\r\n        try {\r\n          // Try to load it with the original name\r\n          language = Translation.loadPath(name);\r\n        } catch (e) {\r\n          try {\r\n            // If we couldn't load it, check if it wasn't the full path\r\n            name = this.defaults.amdLanguageBase + name;\r\n            language = Translation.loadPath(name);\r\n          } catch (ex) {\r\n            // The translation could not be loaded at all. Sometimes this is\r\n            // because of a configuration problem, other times this can be\r\n            // because of how Select2 helps load all possible translation files.\r\n            if (options.debug && window.console && console.warn) {\r\n              console.warn(\r\n                'Select2: The language file for \"' + name + '\" could not be ' +\r\n                'automatically loaded. A fallback will be used instead.'\r\n              );\r\n            }\r\n\r\n            continue;\r\n          }\r\n        }\r\n\r\n        languages.extend(language);\r\n      }\r\n\r\n      options.translations = languages;\r\n    } else {\r\n      var baseTranslation = Translation.loadPath(\r\n        this.defaults.amdLanguageBase + 'en'\r\n      );\r\n      var customTranslation = new Translation(options.language);\r\n\r\n      customTranslation.extend(baseTranslation);\r\n\r\n      options.translations = customTranslation;\r\n    }\r\n\r\n    return options;\r\n  };\r\n\r\n  Defaults.prototype.reset = function () {\r\n    function stripDiacritics (text) {\r\n      // Used 'uni range + named function' from http://jsperf.com/diacritics/18\r\n      function match(a) {\r\n        return DIACRITICS[a] || a;\r\n      }\r\n\r\n      return text.replace(/[^\\u0000-\\u007E]/g, match);\r\n    }\r\n\r\n    function matcher (params, data) {\r\n      // Always return the object if there is nothing to compare\r\n      if ($.trim(params.term) === '') {\r\n        return data;\r\n      }\r\n\r\n      // Do a recursive check for options with children\r\n      if (data.children && data.children.length > 0) {\r\n        // Clone the data object if there are children\r\n        // This is required as we modify the object to remove any non-matches\r\n        var match = $.extend(true, {}, data);\r\n\r\n        // Check each child of the option\r\n        for (var c = data.children.length - 1; c >= 0; c--) {\r\n          var child = data.children[c];\r\n\r\n          var matches = matcher(params, child);\r\n\r\n          // If there wasn't a match, remove the object in the array\r\n          if (matches == null) {\r\n            match.children.splice(c, 1);\r\n          }\r\n        }\r\n\r\n        // If any children matched, return the new object\r\n        if (match.children.length > 0) {\r\n          return match;\r\n        }\r\n\r\n        // If there were no matching children, check just the plain object\r\n        return matcher(params, match);\r\n      }\r\n\r\n      var original = stripDiacritics(data.text).toUpperCase();\r\n      var term = stripDiacritics(params.term).toUpperCase();\r\n\r\n      // Check if the text contains the term\r\n      if (original.indexOf(term) > -1) {\r\n        return data;\r\n      }\r\n\r\n      // If it doesn't contain the term, don't return anything\r\n      return null;\r\n    }\r\n\r\n    this.defaults = {\r\n      amdBase: './',\r\n      amdLanguageBase: './i18n/',\r\n      closeOnSelect: true,\r\n      debug: false,\r\n      dropdownAutoWidth: false,\r\n      escapeMarkup: Utils.escapeMarkup,\r\n      language: EnglishTranslation,\r\n      matcher: matcher,\r\n      minimumInputLength: 0,\r\n      maximumInputLength: 0,\r\n      maximumSelectionLength: 0,\r\n      minimumResultsForSearch: 0,\r\n      selectOnClose: false,\r\n      sorter: function (data) {\r\n        return data;\r\n      },\r\n      templateResult: function (result) {\r\n        return result.text;\r\n      },\r\n      templateSelection: function (selection) {\r\n        return selection.text;\r\n      },\r\n      theme: 'default',\r\n      width: 'resolve'\r\n    };\r\n  };\r\n\r\n  Defaults.prototype.set = function (key, value) {\r\n    var camelKey = $.camelCase(key);\r\n\r\n    var data = {};\r\n    data[camelKey] = value;\r\n\r\n    var convertedData = Utils._convertData(data);\r\n\r\n    $.extend(this.defaults, convertedData);\r\n  };\r\n\r\n  var defaults = new Defaults();\r\n\r\n  return defaults;\r\n});\r\n\nS2.define('select2/options',[\r\n  'require',\r\n  'jquery',\r\n  './defaults',\r\n  './utils'\r\n], function (require, $, Defaults, Utils) {\r\n  function Options (options, $element) {\r\n    this.options = options;\r\n\r\n    if ($element != null) {\r\n      this.fromElement($element);\r\n    }\r\n\r\n    this.options = Defaults.apply(this.options);\r\n\r\n    if ($element && $element.is('input')) {\r\n      var InputCompat = require(this.get('amdBase') + 'compat/inputData');\r\n\r\n      this.options.dataAdapter = Utils.Decorate(\r\n        this.options.dataAdapter,\r\n        InputCompat\r\n      );\r\n    }\r\n  }\r\n\r\n  Options.prototype.fromElement = function ($e) {\r\n    var excludedData = ['select2'];\r\n\r\n    if (this.options.multiple == null) {\r\n      this.options.multiple = $e.prop('multiple');\r\n    }\r\n\r\n    if (this.options.disabled == null) {\r\n      this.options.disabled = $e.prop('disabled');\r\n    }\r\n\r\n    if (this.options.language == null) {\r\n      if ($e.prop('lang')) {\r\n        this.options.language = $e.prop('lang').toLowerCase();\r\n      } else if ($e.closest('[lang]').prop('lang')) {\r\n        this.options.language = $e.closest('[lang]').prop('lang');\r\n      }\r\n    }\r\n\r\n    if (this.options.dir == null) {\r\n      if ($e.prop('dir')) {\r\n        this.options.dir = $e.prop('dir');\r\n      } else if ($e.closest('[dir]').prop('dir')) {\r\n        this.options.dir = $e.closest('[dir]').prop('dir');\r\n      } else {\r\n        this.options.dir = 'ltr';\r\n      }\r\n    }\r\n\r\n    $e.prop('disabled', this.options.disabled);\r\n    $e.prop('multiple', this.options.multiple);\r\n\r\n    if ($e.data('select2Tags')) {\r\n      if (this.options.debug && window.console && console.warn) {\r\n        console.warn(\r\n          'Select2: The `data-select2-tags` attribute has been changed to ' +\r\n          'use the `data-data` and `data-tags=\"true\"` attributes and will be ' +\r\n          'removed in future versions of Select2.'\r\n        );\r\n      }\r\n\r\n      $e.data('data', $e.data('select2Tags'));\r\n      $e.data('tags', true);\r\n    }\r\n\r\n    if ($e.data('ajaxUrl')) {\r\n      if (this.options.debug && window.console && console.warn) {\r\n        console.warn(\r\n          'Select2: The `data-ajax-url` attribute has been changed to ' +\r\n          '`data-ajax--url` and support for the old attribute will be removed' +\r\n          ' in future versions of Select2.'\r\n        );\r\n      }\r\n\r\n      $e.attr('ajax--url', $e.data('ajaxUrl'));\r\n      $e.data('ajax--url', $e.data('ajaxUrl'));\r\n    }\r\n\r\n    var dataset = {};\r\n\r\n    // Prefer the element's `dataset` attribute if it exists\r\n    // jQuery 1.x does not correctly handle data attributes with multiple dashes\r\n    if ($.fn.jquery && $.fn.jquery.substr(0, 2) == '1.' && $e[0].dataset) {\r\n      dataset = $.extend(true, {}, $e[0].dataset, $e.data());\r\n    } else {\r\n      dataset = $e.data();\r\n    }\r\n\r\n    var data = $.extend(true, {}, dataset);\r\n\r\n    data = Utils._convertData(data);\r\n\r\n    for (var key in data) {\r\n      if ($.inArray(key, excludedData) > -1) {\r\n        continue;\r\n      }\r\n\r\n      if ($.isPlainObject(this.options[key])) {\r\n        $.extend(this.options[key], data[key]);\r\n      } else {\r\n        this.options[key] = data[key];\r\n      }\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  Options.prototype.get = function (key) {\r\n    return this.options[key];\r\n  };\r\n\r\n  Options.prototype.set = function (key, val) {\r\n    this.options[key] = val;\r\n  };\r\n\r\n  return Options;\r\n});\r\n\nS2.define('select2/core',[\r\n  'jquery',\r\n  './options',\r\n  './utils',\r\n  './keys'\r\n], function ($, Options, Utils, KEYS) {\r\n  var Select2 = function ($element, options) {\r\n    if ($element.data('select2') != null) {\r\n      $element.data('select2').destroy();\r\n    }\r\n\r\n    this.$element = $element;\r\n\r\n    this.id = this._generateId($element);\r\n\r\n    options = options || {};\r\n\r\n    this.options = new Options(options, $element);\r\n\r\n    Select2.__super__.constructor.call(this);\r\n\r\n    // Set up the tabindex\r\n\r\n    var tabindex = $element.attr('tabindex') || 0;\r\n    $element.data('old-tabindex', tabindex);\r\n    $element.attr('tabindex', '-1');\r\n\r\n    // Set up containers and adapters\r\n\r\n    var DataAdapter = this.options.get('dataAdapter');\r\n    this.dataAdapter = new DataAdapter($element, this.options);\r\n\r\n    var $container = this.render();\r\n\r\n    this._placeContainer($container);\r\n\r\n    var SelectionAdapter = this.options.get('selectionAdapter');\r\n    this.selection = new SelectionAdapter($element, this.options);\r\n    this.$selection = this.selection.render();\r\n\r\n    this.selection.position(this.$selection, $container);\r\n\r\n    var DropdownAdapter = this.options.get('dropdownAdapter');\r\n    this.dropdown = new DropdownAdapter($element, this.options);\r\n    this.$dropdown = this.dropdown.render();\r\n\r\n    this.dropdown.position(this.$dropdown, $container);\r\n\r\n    var ResultsAdapter = this.options.get('resultsAdapter');\r\n    this.results = new ResultsAdapter($element, this.options, this.dataAdapter);\r\n    this.$results = this.results.render();\r\n\r\n    this.results.position(this.$results, this.$dropdown);\r\n\r\n    // Bind events\r\n\r\n    var self = this;\r\n\r\n    // Bind the container to all of the adapters\r\n    this._bindAdapters();\r\n\r\n    // Register any DOM event handlers\r\n    this._registerDomEvents();\r\n\r\n    // Register any internal event handlers\r\n    this._registerDataEvents();\r\n    this._registerSelectionEvents();\r\n    this._registerDropdownEvents();\r\n    this._registerResultsEvents();\r\n    this._registerEvents();\r\n\r\n    // Set the initial state\r\n    this.dataAdapter.current(function (initialData) {\r\n      self.trigger('selection:update', {\r\n        data: initialData\r\n      });\r\n    });\r\n\r\n    // Hide the original select\r\n    $element.addClass('select2-hidden-accessible');\r\n    $element.attr('aria-hidden', 'true');\r\n\r\n    // Synchronize any monitored attributes\r\n    this._syncAttributes();\r\n\r\n    $element.data('select2', this);\r\n  };\r\n\r\n  Utils.Extend(Select2, Utils.Observable);\r\n\r\n  Select2.prototype._generateId = function ($element) {\r\n    var id = '';\r\n\r\n    if ($element.attr('id') != null) {\r\n      id = $element.attr('id');\r\n    } else if ($element.attr('name') != null) {\r\n      id = $element.attr('name') + '-' + Utils.generateChars(2);\r\n    } else {\r\n      id = Utils.generateChars(4);\r\n    }\r\n\r\n    id = id.replace(/(:|\\.|\\[|\\]|,)/g, '');\r\n    id = 'select2-' + id;\r\n\r\n    return id;\r\n  };\r\n\r\n  Select2.prototype._placeContainer = function ($container) {\r\n    $container.insertAfter(this.$element);\r\n\r\n    var width = this._resolveWidth(this.$element, this.options.get('width'));\r\n\r\n    if (width != null) {\r\n      $container.css('width', width);\r\n    }\r\n  };\r\n\r\n  Select2.prototype._resolveWidth = function ($element, method) {\r\n    var WIDTH = /^width:(([-+]?([0-9]*\\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;\r\n\r\n    if (method == 'resolve') {\r\n      var styleWidth = this._resolveWidth($element, 'style');\r\n\r\n      if (styleWidth != null) {\r\n        return styleWidth;\r\n      }\r\n\r\n      return this._resolveWidth($element, 'element');\r\n    }\r\n\r\n    if (method == 'element') {\r\n      var elementWidth = $element.outerWidth(false);\r\n\r\n      if (elementWidth <= 0) {\r\n        return 'auto';\r\n      }\r\n\r\n      return elementWidth + 'px';\r\n    }\r\n\r\n    if (method == 'style') {\r\n      var style = $element.attr('style');\r\n\r\n      if (typeof(style) !== 'string') {\r\n        return null;\r\n      }\r\n\r\n      var attrs = style.split(';');\r\n\r\n      for (var i = 0, l = attrs.length; i < l; i = i + 1) {\r\n        var attr = attrs[i].replace(/\\s/g, '');\r\n        var matches = attr.match(WIDTH);\r\n\r\n        if (matches !== null && matches.length >= 1) {\r\n          return matches[1];\r\n        }\r\n      }\r\n\r\n      return null;\r\n    }\r\n\r\n    return method;\r\n  };\r\n\r\n  Select2.prototype._bindAdapters = function () {\r\n    this.dataAdapter.bind(this, this.$container);\r\n    this.selection.bind(this, this.$container);\r\n\r\n    this.dropdown.bind(this, this.$container);\r\n    this.results.bind(this, this.$container);\r\n  };\r\n\r\n  Select2.prototype._registerDomEvents = function () {\r\n    var self = this;\r\n\r\n    this.$element.on('change.select2', function () {\r\n      self.dataAdapter.current(function (data) {\r\n        self.trigger('selection:update', {\r\n          data: data\r\n        });\r\n      });\r\n    });\r\n\r\n    this.$element.on('focus.select2', function (evt) {\r\n      self.trigger('focus', evt);\r\n    });\r\n\r\n    this._syncA = Utils.bind(this._syncAttributes, this);\r\n    this._syncS = Utils.bind(this._syncSubtree, this);\r\n\r\n    if (this.$element[0].attachEvent) {\r\n      this.$element[0].attachEvent('onpropertychange', this._syncA);\r\n    }\r\n\r\n    var observer = window.MutationObserver ||\r\n      window.WebKitMutationObserver ||\r\n      window.MozMutationObserver\r\n    ;\r\n\r\n    if (observer != null) {\r\n      this._observer = new observer(function (mutations) {\r\n        $.each(mutations, self._syncA);\r\n        $.each(mutations, self._syncS);\r\n      });\r\n      this._observer.observe(this.$element[0], {\r\n        attributes: true,\r\n        childList: true,\r\n        subtree: false\r\n      });\r\n    } else if (this.$element[0].addEventListener) {\r\n      this.$element[0].addEventListener(\r\n        'DOMAttrModified',\r\n        self._syncA,\r\n        false\r\n      );\r\n      this.$element[0].addEventListener(\r\n        'DOMNodeInserted',\r\n        self._syncS,\r\n        false\r\n      );\r\n      this.$element[0].addEventListener(\r\n        'DOMNodeRemoved',\r\n        self._syncS,\r\n        false\r\n      );\r\n    }\r\n  };\r\n\r\n  Select2.prototype._registerDataEvents = function () {\r\n    var self = this;\r\n\r\n    this.dataAdapter.on('*', function (name, params) {\r\n      self.trigger(name, params);\r\n    });\r\n  };\r\n\r\n  Select2.prototype._registerSelectionEvents = function () {\r\n    var self = this;\r\n    var nonRelayEvents = ['toggle', 'focus'];\r\n\r\n    this.selection.on('toggle', function () {\r\n      self.toggleDropdown();\r\n    });\r\n\r\n    this.selection.on('focus', function (params) {\r\n      self.focus(params);\r\n    });\r\n\r\n    this.selection.on('*', function (name, params) {\r\n      if ($.inArray(name, nonRelayEvents) !== -1) {\r\n        return;\r\n      }\r\n\r\n      self.trigger(name, params);\r\n    });\r\n  };\r\n\r\n  Select2.prototype._registerDropdownEvents = function () {\r\n    var self = this;\r\n\r\n    this.dropdown.on('*', function (name, params) {\r\n      self.trigger(name, params);\r\n    });\r\n  };\r\n\r\n  Select2.prototype._registerResultsEvents = function () {\r\n    var self = this;\r\n\r\n    this.results.on('*', function (name, params) {\r\n      self.trigger(name, params);\r\n    });\r\n  };\r\n\r\n  Select2.prototype._registerEvents = function () {\r\n    var self = this;\r\n\r\n    this.on('open', function () {\r\n      self.$container.addClass('select2-container--open');\r\n    });\r\n\r\n    this.on('close', function () {\r\n      self.$container.removeClass('select2-container--open');\r\n    });\r\n\r\n    this.on('enable', function () {\r\n      self.$container.removeClass('select2-container--disabled');\r\n    });\r\n\r\n    this.on('disable', function () {\r\n      self.$container.addClass('select2-container--disabled');\r\n    });\r\n\r\n    this.on('blur', function () {\r\n      self.$container.removeClass('select2-container--focus');\r\n    });\r\n\r\n    this.on('query', function (params) {\r\n      if (!self.isOpen()) {\r\n        self.trigger('open', {});\r\n      }\r\n\r\n      this.dataAdapter.query(params, function (data) {\r\n        self.trigger('results:all', {\r\n          data: data,\r\n          query: params\r\n        });\r\n      });\r\n    });\r\n\r\n    this.on('query:append', function (params) {\r\n      this.dataAdapter.query(params, function (data) {\r\n        self.trigger('results:append', {\r\n          data: data,\r\n          query: params\r\n        });\r\n      });\r\n    });\r\n\r\n    this.on('keypress', function (evt) {\r\n      var key = evt.which;\r\n\r\n      if (self.isOpen()) {\r\n        if (key === KEYS.ESC || key === KEYS.TAB ||\r\n            (key === KEYS.UP && evt.altKey)) {\r\n          self.close();\r\n\r\n          evt.preventDefault();\r\n        } else if (key === KEYS.ENTER) {\r\n          self.trigger('results:select', {});\r\n\r\n          evt.preventDefault();\r\n        } else if ((key === KEYS.SPACE && evt.ctrlKey)) {\r\n          self.trigger('results:toggle', {});\r\n\r\n          evt.preventDefault();\r\n        } else if (key === KEYS.UP) {\r\n          self.trigger('results:previous', {});\r\n\r\n          evt.preventDefault();\r\n        } else if (key === KEYS.DOWN) {\r\n          self.trigger('results:next', {});\r\n\r\n          evt.preventDefault();\r\n        }\r\n      } else {\r\n        if (key === KEYS.ENTER || key === KEYS.SPACE ||\r\n            (key === KEYS.DOWN && evt.altKey)) {\r\n          self.open();\r\n\r\n          evt.preventDefault();\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  Select2.prototype._syncAttributes = function () {\r\n    this.options.set('disabled', this.$element.prop('disabled'));\r\n\r\n    if (this.options.get('disabled')) {\r\n      if (this.isOpen()) {\r\n        this.close();\r\n      }\r\n\r\n      this.trigger('disable', {});\r\n    } else {\r\n      this.trigger('enable', {});\r\n    }\r\n  };\r\n\r\n  Select2.prototype._syncSubtree = function (evt, mutations) {\r\n    var changed = false;\r\n    var self = this;\r\n\r\n    // Ignore any mutation events raised for elements that aren't options or\r\n    // optgroups. This handles the case when the select element is destroyed\r\n    if (\r\n      evt && evt.target && (\r\n        evt.target.nodeName !== 'OPTION' && evt.target.nodeName !== 'OPTGROUP'\r\n      )\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    if (!mutations) {\r\n      // If mutation events aren't supported, then we can only assume that the\r\n      // change affected the selections\r\n      changed = true;\r\n    } else if (mutations.addedNodes && mutations.addedNodes.length > 0) {\r\n      for (var n = 0; n < mutations.addedNodes.length; n++) {\r\n        var node = mutations.addedNodes[n];\r\n\r\n        if (node.selected) {\r\n          changed = true;\r\n        }\r\n      }\r\n    } else if (mutations.removedNodes && mutations.removedNodes.length > 0) {\r\n      changed = true;\r\n    }\r\n\r\n    // Only re-pull the data if we think there is a change\r\n    if (changed) {\r\n      this.dataAdapter.current(function (currentData) {\r\n        self.trigger('selection:update', {\r\n          data: currentData\r\n        });\r\n      });\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Override the trigger method to automatically trigger pre-events when\r\n   * there are events that can be prevented.\r\n   */\r\n  Select2.prototype.trigger = function (name, args) {\r\n    var actualTrigger = Select2.__super__.trigger;\r\n    var preTriggerMap = {\r\n      'open': 'opening',\r\n      'close': 'closing',\r\n      'select': 'selecting',\r\n      'unselect': 'unselecting'\r\n    };\r\n\r\n    if (args === undefined) {\r\n      args = {};\r\n    }\r\n\r\n    if (name in preTriggerMap) {\r\n      var preTriggerName = preTriggerMap[name];\r\n      var preTriggerArgs = {\r\n        prevented: false,\r\n        name: name,\r\n        args: args\r\n      };\r\n\r\n      actualTrigger.call(this, preTriggerName, preTriggerArgs);\r\n\r\n      if (preTriggerArgs.prevented) {\r\n        args.prevented = true;\r\n\r\n        return;\r\n      }\r\n    }\r\n\r\n    actualTrigger.call(this, name, args);\r\n  };\r\n\r\n  Select2.prototype.toggleDropdown = function () {\r\n    if (this.options.get('disabled')) {\r\n      return;\r\n    }\r\n\r\n    if (this.isOpen()) {\r\n      this.close();\r\n    } else {\r\n      this.open();\r\n    }\r\n  };\r\n\r\n  Select2.prototype.open = function () {\r\n    if (this.isOpen()) {\r\n      return;\r\n    }\r\n\r\n    this.trigger('query', {});\r\n  };\r\n\r\n  Select2.prototype.close = function () {\r\n    if (!this.isOpen()) {\r\n      return;\r\n    }\r\n\r\n    this.trigger('close', {});\r\n  };\r\n\r\n  Select2.prototype.isOpen = function () {\r\n    return this.$container.hasClass('select2-container--open');\r\n  };\r\n\r\n  Select2.prototype.hasFocus = function () {\r\n    return this.$container.hasClass('select2-container--focus');\r\n  };\r\n\r\n  Select2.prototype.focus = function (data) {\r\n    // No need to re-trigger focus events if we are already focused\r\n    if (this.hasFocus()) {\r\n      return;\r\n    }\r\n\r\n    this.$container.addClass('select2-container--focus');\r\n    this.trigger('focus', {});\r\n  };\r\n\r\n  Select2.prototype.enable = function (args) {\r\n    if (this.options.get('debug') && window.console && console.warn) {\r\n      console.warn(\r\n        'Select2: The `select2(\"enable\")` method has been deprecated and will' +\r\n        ' be removed in later Select2 versions. Use $element.prop(\"disabled\")' +\r\n        ' instead.'\r\n      );\r\n    }\r\n\r\n    if (args == null || args.length === 0) {\r\n      args = [true];\r\n    }\r\n\r\n    var disabled = !args[0];\r\n\r\n    this.$element.prop('disabled', disabled);\r\n  };\r\n\r\n  Select2.prototype.data = function () {\r\n    if (this.options.get('debug') &&\r\n        arguments.length > 0 && window.console && console.warn) {\r\n      console.warn(\r\n        'Select2: Data can no longer be set using `select2(\"data\")`. You ' +\r\n        'should consider setting the value instead using `$element.val()`.'\r\n      );\r\n    }\r\n\r\n    var data = [];\r\n\r\n    this.dataAdapter.current(function (currentData) {\r\n      data = currentData;\r\n    });\r\n\r\n    return data;\r\n  };\r\n\r\n  Select2.prototype.val = function (args) {\r\n    if (this.options.get('debug') && window.console && console.warn) {\r\n      console.warn(\r\n        'Select2: The `select2(\"val\")` method has been deprecated and will be' +\r\n        ' removed in later Select2 versions. Use $element.val() instead.'\r\n      );\r\n    }\r\n\r\n    if (args == null || args.length === 0) {\r\n      return this.$element.val();\r\n    }\r\n\r\n    var newVal = args[0];\r\n\r\n    if ($.isArray(newVal)) {\r\n      newVal = $.map(newVal, function (obj) {\r\n        return obj.toString();\r\n      });\r\n    }\r\n\r\n    this.$element.val(newVal).trigger('change');\r\n  };\r\n\r\n  Select2.prototype.destroy = function () {\r\n    this.$container.remove();\r\n\r\n    if (this.$element[0].detachEvent) {\r\n      this.$element[0].detachEvent('onpropertychange', this._syncA);\r\n    }\r\n\r\n    if (this._observer != null) {\r\n      this._observer.disconnect();\r\n      this._observer = null;\r\n    } else if (this.$element[0].removeEventListener) {\r\n      this.$element[0]\r\n        .removeEventListener('DOMAttrModified', this._syncA, false);\r\n      this.$element[0]\r\n        .removeEventListener('DOMNodeInserted', this._syncS, false);\r\n      this.$element[0]\r\n        .removeEventListener('DOMNodeRemoved', this._syncS, false);\r\n    }\r\n\r\n    this._syncA = null;\r\n    this._syncS = null;\r\n\r\n    this.$element.off('.select2');\r\n    this.$element.attr('tabindex', this.$element.data('old-tabindex'));\r\n\r\n    this.$element.removeClass('select2-hidden-accessible');\r\n    this.$element.attr('aria-hidden', 'false');\r\n    this.$element.removeData('select2');\r\n\r\n    this.dataAdapter.destroy();\r\n    this.selection.destroy();\r\n    this.dropdown.destroy();\r\n    this.results.destroy();\r\n\r\n    this.dataAdapter = null;\r\n    this.selection = null;\r\n    this.dropdown = null;\r\n    this.results = null;\r\n  };\r\n\r\n  Select2.prototype.render = function () {\r\n    var $container = $(\r\n      '<span class=\"select2 select2-container\">' +\r\n        '<span class=\"selection\"></span>' +\r\n        '<span class=\"dropdown-wrapper\" aria-hidden=\"true\"></span>' +\r\n      '</span>'\r\n    );\r\n\r\n    $container.attr('dir', this.options.get('dir'));\r\n\r\n    this.$container = $container;\r\n\r\n    this.$container.addClass('select2-container--' + this.options.get('theme'));\r\n\r\n    $container.data('element', this.$element);\r\n\r\n    return $container;\r\n  };\r\n\r\n  return Select2;\r\n});\r\n\nS2.define('jquery-mousewheel',[\r\n  'jquery'\r\n], function ($) {\r\n  // Used to shim jQuery.mousewheel for non-full builds.\r\n  return $;\r\n});\r\n\nS2.define('jquery.select2',[\r\n  'jquery',\r\n  'jquery-mousewheel',\r\n\r\n  './select2/core',\r\n  './select2/defaults'\r\n], function ($, _, Select2, Defaults) {\r\n  if ($.fn.select2 == null) {\r\n    // All methods that should return the element\r\n    var thisMethods = ['open', 'close', 'destroy'];\r\n\r\n    $.fn.select2 = function (options) {\r\n      options = options || {};\r\n\r\n      if (typeof options === 'object') {\r\n        this.each(function () {\r\n          var instanceOptions = $.extend(true, {}, options);\r\n\r\n          var instance = new Select2($(this), instanceOptions);\r\n        });\r\n\r\n        return this;\r\n      } else if (typeof options === 'string') {\r\n        var ret;\r\n        var args = Array.prototype.slice.call(arguments, 1);\r\n\r\n        this.each(function () {\r\n          var instance = $(this).data('select2');\r\n\r\n          if (instance == null && window.console && console.error) {\r\n            console.error(\r\n              'The select2(\\'' + options + '\\') method was called on an ' +\r\n              'element that is not using Select2.'\r\n            );\r\n          }\r\n\r\n          ret = instance[options].apply(instance, args);\r\n        });\r\n\r\n        // Check if we should be returning `this`\r\n        if ($.inArray(options, thisMethods) > -1) {\r\n          return this;\r\n        }\r\n\r\n        return ret;\r\n      } else {\r\n        throw new Error('Invalid arguments for Select2: ' + options);\r\n      }\r\n    };\r\n  }\r\n\r\n  if ($.fn.select2.defaults == null) {\r\n    $.fn.select2.defaults = Defaults;\r\n  }\r\n\r\n  return Select2;\r\n});\r\n\n  // Return the AMD loader configuration so it can be used outside of this file\r\n  return {\r\n    define: S2.define,\r\n    require: S2.require\r\n  };\r\n}());\r\n\r\n  // Autoload the jQuery bindings\r\n  // We know that all of the modules exist above this, so we're safe\r\n  var select2 = S2.require('jquery.select2');\r\n\r\n  // Hold the AMD module references on the jQuery function that was just loaded\r\n  // This allows Select2 to use the internal loader outside of this file, such\r\n  // as in the language files.\r\n  jQuery.fn.select2.amd = S2;\r\n\r\n  // Return the Select2 instance for anyone who is importing it.\r\n  return select2;\r\n}));\r\n"

/***/ },

/***/ 81:
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	var WPAttachmentFormInput_1 = __webpack_require__(82);
	jQuery(document).ready(function () {
	    jQuery(".wpattachmentforminput").each(function () {
	        new WPAttachmentFormInput_1.WPAttachmentFormInput(jQuery(this), jQuery(this).data());
	    });
	    //	jQuery( ".wpattachmentforminput .btn-remove" ).click( function ( e )
	    //	{
	    //		e.preventDefault();
	    //		var $el = $( this );
	    //		$el.closest( ".list-group-item" ).remove();
	    //
	    //		new WPAttachmentFormInput( $( $( this ).data( "target" ) ), "render" );
	    //	} );
	    //	jQuery( ".wpattachmentforminput .btn-add" ).click( function ( e )
	    //	{
	    //		new WPAttachmentFormInput( $( $( this ).data( "target" ) ), "open" );
	    //	} );
	});


/***/ },

/***/ 82:
/***/ function(module, exports) {

	"use strict";
	var WPAttachmentFormInput = (function () {
	    function WPAttachmentFormInput($el, options) {
	        var _this = this;
	        this.options = {
	            max: -1,
	            title: "",
	            buttonText: "",
	            type: null,
	            frame: "select"
	        };
	        this.$el = $el;
	        // Model
	        this.options = jQuery.extend({}, this.options, options);
	        // View
	        this.template = _.template(this.$el.find("textarea.underscore-template").val());
	        this.wpMedia = wp.media({
	            title: this.options.title,
	            multiple: this.options.max < 0 || this.options.max > 1 ? true : false,
	            library: this.options.type ? { type: this.options.type } : undefined,
	            button: { text: this.options.buttonText },
	            frame: this.options.frame
	        });
	        // Controller
	        this.wpMedia.on("select", function () { return _this.onWPMediaSelect(); });
	        this.$el.on("click", ".btn-add", function () { return _this.open(); });
	        this.$el.on("click", ".btn-remove", function (e) { return _this.onRemoveClick(e); });
	        this.render();
	    }
	    WPAttachmentFormInput.prototype.render = function () {
	        if (this.count >= this.options.max && this.options.max >= 0)
	            this.$el.find(".btn-add").prop("disabled", "disabled");
	        else
	            this.$el.find(".btn-add").prop("disabled", null);
	    };
	    WPAttachmentFormInput.prototype.open = function () {
	        this.wpMedia.open();
	    };
	    ;
	    WPAttachmentFormInput.prototype.add = function (attachmentModel) {
	        var __this = this;
	        attachmentModel.src = attachmentModel.icon;
	        if (!attachmentModel.width)
	            attachmentModel.width = "";
	        if (!attachmentModel.height)
	            attachmentModel.height = "";
	        if (attachmentModel.sizes) {
	            if (attachmentModel.sizes.thumbnail && attachmentModel.sizes.thumbnail.url) {
	                attachmentModel.src = attachmentModel.sizes.thumbnail.url;
	            }
	            else if (attachmentModel.sizes.full && attachmentModel.sizes.full.url) {
	                attachmentModel.src = attachmentModel.sizes.full.url;
	            }
	        }
	        var $el = jQuery(this.template(attachmentModel));
	        this.$el.find(".list-group").append($el);
	    };
	    ;
	    Object.defineProperty(WPAttachmentFormInput.prototype, "count", {
	        /* SET AND GET */
	        get: function () {
	            return this.$el.find(".list-group-item").length;
	        },
	        enumerable: true,
	        configurable: true
	    });
	    /* EVENT HANDLERS */
	    WPAttachmentFormInput.prototype.onWPMediaSelect = function () {
	        var selection = this.wpMedia.state().get('selection');
	        var __this = this;
	        selection.each(function (attachment) {
	            if (__this.options.max < 0 || __this.count < __this.options.max) {
	                __this.add(attachment.toJSON());
	            }
	        });
	        this.render();
	    };
	    ;
	    WPAttachmentFormInput.prototype.onRemoveClick = function (e) {
	        e.preventDefault();
	        var $el = jQuery(e.currentTarget);
	        $el.closest(".list-group-item").remove();
	        this.render();
	    };
	    return WPAttachmentFormInput;
	}());
	exports.WPAttachmentFormInput = WPAttachmentFormInput;


/***/ }

/******/ });
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgYTQ5MzA1NDZhMTQ4MjUzZmQ2NTQiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzYy90dXRvbXZjLnRzIiwid2VicGFjazovLy8uL3NyYy9sZXNzL3R1dG9tdmMubGVzcyIsIndlYnBhY2s6Ly8vLi9+L3NlbGVjdDIvZGlzdC9qcy9zZWxlY3QyLmpzPzQ4NWYiLCJ3ZWJwYWNrOi8vLy4vfi9zY3JpcHQtbG9hZGVyL2FkZFNjcmlwdC5qcyIsIndlYnBhY2s6Ly8vLi9+L3NlbGVjdDIvZGlzdC9qcy9zZWxlY3QyLmpzIiwid2VicGFjazovLy8uL3NyYy90c2MvcGx1Z2lucy9qUXVlcnlXUEF0dGFjaG1lbnRGb3JtSW5wdXQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RzYy93cC9mb3JtL2lucHV0cy9XUEF0dGFjaG1lbnRGb3JtSW5wdXQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHVCQUFlO0FBQ2Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDdENBLHFCQUFPLEVBQXNCLENBQUM7QUFDOUIscUJBQU8sRUFBbUMsQ0FBQztBQUMzQyxxQkFBTyxFQUF1QyxDQUFDO0FBRy9DLEVBQUMsVUFBVSxDQUFDO0tBRVgsQ0FBQyxDQUFFLFFBQVEsQ0FBRSxDQUFDLEtBQUssQ0FBRTtTQUVwQixtQkFBbUI7U0FDbkIsQ0FBQyxDQUFFLGdDQUFnQyxDQUFFLENBQUMsSUFBSSxDQUFFO2FBRTNDLENBQUMsQ0FBRSxJQUFJLENBQUUsQ0FBQyxPQUFPLENBQUUsQ0FBQyxDQUFFLElBQUksQ0FBRSxDQUFDLElBQUksRUFBRSxDQUFFLENBQUM7U0FDdkMsQ0FBQyxDQUFFLENBQUM7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RSxrQkFBa0IsQ0FBRSxDQUFDLE1BQU0sQ0FBQztTQUNuRCxDQUFDOzs7UUFBQTtLQUVELG9CQUFvQjtLQUNaLCtDQUFlLEdBQXZCO1NBRUMsSUFBSSxTQUFTLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQyxHQUFHLENBQUUsV0FBVyxDQUFFLENBQUM7U0FDeEQsSUFBSSxNQUFNLEdBQU0sSUFBSSxDQUFDO1NBQ3JCLFNBQVMsQ0FBQyxJQUFJLENBQUUsVUFBVSxVQUFVO2FBRW5DLEVBQUUsRUFBRSxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsR0FBRyxDQUFDLElBQUksTUFBTSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUksQ0FBQyxDQUNqRSxDQUFDO2lCQUNBLE1BQU0sQ0FBQyxHQUFHLENBQUUsVUFBVSxDQUFDLE1BQU0sRUFBRSxDQUFFLENBQUM7YUFDbkMsQ0FBQztTQUNGLENBQUMsQ0FBRSxDQUFDO1NBRUosSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO0tBQ2YsQ0FBQzs7S0FFTyw2Q0FBYSxHQUFyQixVQUF1QixDQUFDO1NBRXZCLENBQUMsQ0FBQyxjQUFjLEVBQUUsQ0FBQztTQUNuQixJQUFJLEdBQUcsR0FBRyxNQUFNLENBQUUsQ0FBQyxDQUFDLGFBQWEsQ0FBRSxDQUFDO1NBQ3BDLEdBQUcsQ0FBQyxPQUFPLENBQUUsa0JBQWtCLENBQUUsQ0FBQyxNQUFNLEVBQUUsQ0FBQztTQUMzQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7S0FDZixDQUFDO0tBQ0YsNEJBQUM7QUFBRCxFQUFDO0FBaEdZLDhCQUFxQix3QkFnR2pDIiwiZmlsZSI6InR1dG9tdmMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svYm9vdHN0cmFwIGE0OTMwNTQ2YTE0ODI1M2ZkNjU0XG4gKiovIiwiaW1wb3J0IFwiLi4vbGVzcy90dXRvbXZjLmxlc3NcIjtcbmltcG9ydCBcInNjcmlwdCFzZWxlY3QyL2Rpc3QvanMvc2VsZWN0Mi5qc1wiO1xuaW1wb3J0IFwiLi9wbHVnaW5zL2pRdWVyeVdQQXR0YWNobWVudEZvcm1JbnB1dFwiO1xuXG5cbihmdW5jdGlvbiggJCApXG57XG5cdCQoIGRvY3VtZW50ICkucmVhZHkoIGZ1bmN0aW9uKClcblx0e1xuXHRcdC8vIFNlbGVjdDJGb3JtSW5wdXRcblx0XHQkKCBcIi50dXRvbXZjLWZvcm0tZWxlbWVudCAuc2VsZWN0MlwiICkuZWFjaCggZnVuY3Rpb24oKVxuXHRcdHtcblx0XHRcdCQoIHRoaXMgKS5zZWxlY3QyKCAkKCB0aGlzICkuZGF0YSgpICk7XG5cdFx0fSApO1xuXHR9ICk7XG59KSggalF1ZXJ5ICk7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvdHNjL3R1dG9tdmMudHNcbiAqKi8iLCIvLyByZW1vdmVkIGJ5IGV4dHJhY3QtdGV4dC13ZWJwYWNrLXBsdWdpblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvbGVzcy90dXRvbXZjLmxlc3NcbiAqKiBtb2R1bGUgaWQgPSA3MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwicmVxdWlyZShcIiEhL1VzZXJzL2pvaGFubmVzYnV2bmFzL0RldmVsb3BtZW50L1BIUC90dXRvbXZjL25vZGVfbW9kdWxlcy9zY3JpcHQtbG9hZGVyL2FkZFNjcmlwdC5qc1wiKShyZXF1aXJlKFwiISEvVXNlcnMvam9oYW5uZXNidXZuYXMvRGV2ZWxvcG1lbnQvUEhQL3R1dG9tdmMvbm9kZV9tb2R1bGVzL3Jhdy1sb2FkZXIvaW5kZXguanMhL1VzZXJzL2pvaGFubmVzYnV2bmFzL0RldmVsb3BtZW50L1BIUC90dXRvbXZjL25vZGVfbW9kdWxlcy9zb3VyY2UtbWFwLWxvYWRlci9pbmRleC5qcyEvVXNlcnMvam9oYW5uZXNidXZuYXMvRGV2ZWxvcG1lbnQvUEhQL3R1dG9tdmMvbm9kZV9tb2R1bGVzL3NlbGVjdDIvZGlzdC9qcy9zZWxlY3QyLmpzXCIpK1wiXFxuXFxuLy8gU0NSSVBULUxPQURFUiBGT09URVJcXG4vLyMgc291cmNlVVJMPXNjcmlwdDovLy9Vc2Vycy9qb2hhbm5lc2J1dm5hcy9EZXZlbG9wbWVudC9QSFAvdHV0b212Yy9ub2RlX21vZHVsZXMvc291cmNlLW1hcC1sb2FkZXIvaW5kZXguanMhL1VzZXJzL2pvaGFubmVzYnV2bmFzL0RldmVsb3BtZW50L1BIUC90dXRvbXZjL25vZGVfbW9kdWxlcy9zZWxlY3QyL2Rpc3QvanMvc2VsZWN0Mi5qc1wiKVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NjcmlwdC1sb2FkZXIhLi9+L3NlbGVjdDIvZGlzdC9qcy9zZWxlY3QyLmpzXG4gKiogbW9kdWxlIGlkID0gNzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qXHJcblx0TUlUIExpY2Vuc2UgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHBcclxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXHJcbiovXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oc3JjKSB7XHJcblx0aWYgKHR5cGVvZiBleGVjU2NyaXB0ICE9PSBcInVuZGVmaW5lZFwiKVxyXG5cdFx0ZXhlY1NjcmlwdChzcmMpO1xyXG5cdGVsc2VcclxuXHRcdGV2YWwuY2FsbChudWxsLCBzcmMpO1xyXG59XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3NjcmlwdC1sb2FkZXIvYWRkU2NyaXB0LmpzXG4gKiogbW9kdWxlIGlkID0gNzlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCIvKiFcXHJcXG4gKiBTZWxlY3QyIDQuMC4zXFxyXFxuICogaHR0cHM6Ly9zZWxlY3QyLmdpdGh1Yi5pb1xcclxcbiAqXFxyXFxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXFxyXFxuICogaHR0cHM6Ly9naXRodWIuY29tL3NlbGVjdDIvc2VsZWN0Mi9ibG9iL21hc3Rlci9MSUNFTlNFLm1kXFxyXFxuICovXFxyXFxuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XFxyXFxuICBpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XFxyXFxuICAgIC8vIEFNRC4gUmVnaXN0ZXIgYXMgYW4gYW5vbnltb3VzIG1vZHVsZS5cXHJcXG4gICAgZGVmaW5lKFsnanF1ZXJ5J10sIGZhY3RvcnkpO1xcclxcbiAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcXHJcXG4gICAgLy8gTm9kZS9Db21tb25KU1xcclxcbiAgICBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpKTtcXHJcXG4gIH0gZWxzZSB7XFxyXFxuICAgIC8vIEJyb3dzZXIgZ2xvYmFsc1xcclxcbiAgICBmYWN0b3J5KGpRdWVyeSk7XFxyXFxuICB9XFxyXFxufShmdW5jdGlvbiAoalF1ZXJ5KSB7XFxyXFxuICAvLyBUaGlzIGlzIG5lZWRlZCBzbyB3ZSBjYW4gY2F0Y2ggdGhlIEFNRCBsb2FkZXIgY29uZmlndXJhdGlvbiBhbmQgdXNlIGl0XFxyXFxuICAvLyBUaGUgaW5uZXIgZmlsZSBzaG91bGQgYmUgd3JhcHBlZCAoYnkgYGJhbm5lci5zdGFydC5qc2ApIGluIGEgZnVuY3Rpb24gdGhhdFxcclxcbiAgLy8gcmV0dXJucyB0aGUgQU1EIGxvYWRlciByZWZlcmVuY2VzLlxcclxcbiAgdmFyIFMyID1cXHJcXG4oZnVuY3Rpb24gKCkge1xcclxcbiAgLy8gUmVzdG9yZSB0aGUgU2VsZWN0MiBBTUQgbG9hZGVyIHNvIGl0IGNhbiBiZSB1c2VkXFxyXFxuICAvLyBOZWVkZWQgbW9zdGx5IGluIHRoZSBsYW5ndWFnZSBmaWxlcywgd2hlcmUgdGhlIGxvYWRlciBpcyBub3QgaW5zZXJ0ZWRcXHJcXG4gIGlmIChqUXVlcnkgJiYgalF1ZXJ5LmZuICYmIGpRdWVyeS5mbi5zZWxlY3QyICYmIGpRdWVyeS5mbi5zZWxlY3QyLmFtZCkge1xcclxcbiAgICB2YXIgUzIgPSBqUXVlcnkuZm4uc2VsZWN0Mi5hbWQ7XFxyXFxuICB9XFxyXFxudmFyIFMyOyhmdW5jdGlvbiAoKSB7IGlmICghUzIgfHwgIVMyLnJlcXVpcmVqcykge1xcbmlmICghUzIpIHsgUzIgPSB7fTsgfSBlbHNlIHsgcmVxdWlyZSA9IFMyOyB9XFxuLyoqXFxuICogQGxpY2Vuc2UgYWxtb25kIDAuMy4xIENvcHlyaWdodCAoYykgMjAxMS0yMDE0LCBUaGUgRG9qbyBGb3VuZGF0aW9uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXFxuICogQXZhaWxhYmxlIHZpYSB0aGUgTUlUIG9yIG5ldyBCU0QgbGljZW5zZS5cXG4gKiBzZWU6IGh0dHA6Ly9naXRodWIuY29tL2pyYnVya2UvYWxtb25kIGZvciBkZXRhaWxzXFxuICovXFxuLy9Hb2luZyBzbG9wcHkgdG8gYXZvaWQgJ3VzZSBzdHJpY3QnIHN0cmluZyBjb3N0LCBidXQgc3RyaWN0IHByYWN0aWNlcyBzaG91bGRcXG4vL2JlIGZvbGxvd2VkLlxcbi8qanNsaW50IHNsb3BweTogdHJ1ZSAqL1xcbi8qZ2xvYmFsIHNldFRpbWVvdXQ6IGZhbHNlICovXFxuXFxudmFyIHJlcXVpcmVqcywgcmVxdWlyZSwgZGVmaW5lO1xcbihmdW5jdGlvbiAodW5kZWYpIHtcXG4gICAgdmFyIG1haW4sIHJlcSwgbWFrZU1hcCwgaGFuZGxlcnMsXFxuICAgICAgICBkZWZpbmVkID0ge30sXFxuICAgICAgICB3YWl0aW5nID0ge30sXFxuICAgICAgICBjb25maWcgPSB7fSxcXG4gICAgICAgIGRlZmluaW5nID0ge30sXFxuICAgICAgICBoYXNPd24gPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LFxcbiAgICAgICAgYXBzID0gW10uc2xpY2UsXFxuICAgICAgICBqc1N1ZmZpeFJlZ0V4cCA9IC9cXFxcLmpzJC87XFxuXFxuICAgIGZ1bmN0aW9uIGhhc1Byb3Aob2JqLCBwcm9wKSB7XFxuICAgICAgICByZXR1cm4gaGFzT3duLmNhbGwob2JqLCBwcm9wKTtcXG4gICAgfVxcblxcbiAgICAvKipcXG4gICAgICogR2l2ZW4gYSByZWxhdGl2ZSBtb2R1bGUgbmFtZSwgbGlrZSAuL3NvbWV0aGluZywgbm9ybWFsaXplIGl0IHRvXFxuICAgICAqIGEgcmVhbCBuYW1lIHRoYXQgY2FuIGJlIG1hcHBlZCB0byBhIHBhdGguXFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHRoZSByZWxhdGl2ZSBuYW1lXFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBiYXNlTmFtZSBhIHJlYWwgbmFtZSB0aGF0IHRoZSBuYW1lIGFyZyBpcyByZWxhdGl2ZVxcbiAgICAgKiB0by5cXG4gICAgICogQHJldHVybnMge1N0cmluZ30gbm9ybWFsaXplZCBuYW1lXFxuICAgICAqL1xcbiAgICBmdW5jdGlvbiBub3JtYWxpemUobmFtZSwgYmFzZU5hbWUpIHtcXG4gICAgICAgIHZhciBuYW1lUGFydHMsIG5hbWVTZWdtZW50LCBtYXBWYWx1ZSwgZm91bmRNYXAsIGxhc3RJbmRleCxcXG4gICAgICAgICAgICBmb3VuZEksIGZvdW5kU3Rhck1hcCwgc3RhckksIGksIGosIHBhcnQsXFxuICAgICAgICAgICAgYmFzZVBhcnRzID0gYmFzZU5hbWUgJiYgYmFzZU5hbWUuc3BsaXQoXFxcIi9cXFwiKSxcXG4gICAgICAgICAgICBtYXAgPSBjb25maWcubWFwLFxcbiAgICAgICAgICAgIHN0YXJNYXAgPSAobWFwICYmIG1hcFsnKiddKSB8fCB7fTtcXG5cXG4gICAgICAgIC8vQWRqdXN0IGFueSByZWxhdGl2ZSBwYXRocy5cXG4gICAgICAgIGlmIChuYW1lICYmIG5hbWUuY2hhckF0KDApID09PSBcXFwiLlxcXCIpIHtcXG4gICAgICAgICAgICAvL0lmIGhhdmUgYSBiYXNlIG5hbWUsIHRyeSB0byBub3JtYWxpemUgYWdhaW5zdCBpdCxcXG4gICAgICAgICAgICAvL290aGVyd2lzZSwgYXNzdW1lIGl0IGlzIGEgdG9wLWxldmVsIHJlcXVpcmUgdGhhdCB3aWxsXFxuICAgICAgICAgICAgLy9iZSByZWxhdGl2ZSB0byBiYXNlVXJsIGluIHRoZSBlbmQuXFxuICAgICAgICAgICAgaWYgKGJhc2VOYW1lKSB7XFxuICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lLnNwbGl0KCcvJyk7XFxuICAgICAgICAgICAgICAgIGxhc3RJbmRleCA9IG5hbWUubGVuZ3RoIC0gMTtcXG5cXG4gICAgICAgICAgICAgICAgLy8gTm9kZSAuanMgYWxsb3dhbmNlOlxcbiAgICAgICAgICAgICAgICBpZiAoY29uZmlnLm5vZGVJZENvbXBhdCAmJiBqc1N1ZmZpeFJlZ0V4cC50ZXN0KG5hbWVbbGFzdEluZGV4XSkpIHtcXG4gICAgICAgICAgICAgICAgICAgIG5hbWVbbGFzdEluZGV4XSA9IG5hbWVbbGFzdEluZGV4XS5yZXBsYWNlKGpzU3VmZml4UmVnRXhwLCAnJyk7XFxuICAgICAgICAgICAgICAgIH1cXG5cXG4gICAgICAgICAgICAgICAgLy9Mb3Agb2ZmIHRoZSBsYXN0IHBhcnQgb2YgYmFzZVBhcnRzLCBzbyB0aGF0IC4gbWF0Y2hlcyB0aGVcXG4gICAgICAgICAgICAgICAgLy9cXFwiZGlyZWN0b3J5XFxcIiBhbmQgbm90IG5hbWUgb2YgdGhlIGJhc2VOYW1lJ3MgbW9kdWxlLiBGb3IgaW5zdGFuY2UsXFxuICAgICAgICAgICAgICAgIC8vYmFzZU5hbWUgb2YgXFxcIm9uZS90d28vdGhyZWVcXFwiLCBtYXBzIHRvIFxcXCJvbmUvdHdvL3RocmVlLmpzXFxcIiwgYnV0IHdlXFxuICAgICAgICAgICAgICAgIC8vd2FudCB0aGUgZGlyZWN0b3J5LCBcXFwib25lL3R3b1xcXCIgZm9yIHRoaXMgbm9ybWFsaXphdGlvbi5cXG4gICAgICAgICAgICAgICAgbmFtZSA9IGJhc2VQYXJ0cy5zbGljZSgwLCBiYXNlUGFydHMubGVuZ3RoIC0gMSkuY29uY2F0KG5hbWUpO1xcblxcbiAgICAgICAgICAgICAgICAvL3N0YXJ0IHRyaW1Eb3RzXFxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBuYW1lLmxlbmd0aDsgaSArPSAxKSB7XFxuICAgICAgICAgICAgICAgICAgICBwYXJ0ID0gbmFtZVtpXTtcXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJ0ID09PSBcXFwiLlxcXCIpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lLnNwbGljZShpLCAxKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICBpIC09IDE7XFxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnQgPT09IFxcXCIuLlxcXCIpIHtcXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMSAmJiAobmFtZVsyXSA9PT0gJy4uJyB8fCBuYW1lWzBdID09PSAnLi4nKSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL0VuZCBvZiB0aGUgbGluZS4gS2VlcCBhdCBsZWFzdCBvbmUgbm9uLWRvdFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3BhdGggc2VnbWVudCBhdCB0aGUgZnJvbnQgc28gaXQgY2FuIGJlIG1hcHBlZFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvcnJlY3RseSB0byBkaXNrLiBPdGhlcndpc2UsIHRoZXJlIGlzIGxpa2VseVxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL25vIHBhdGggbWFwcGluZyBmb3IgYSBwYXRoIHN0YXJ0aW5nIHdpdGggJy4uJy5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9UaGlzIGNhbiBzdGlsbCBmYWlsLCBidXQgY2F0Y2hlcyB0aGUgbW9zdCByZWFzb25hYmxlXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdXNlcyBvZiAuLlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPiAwKSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUuc3BsaWNlKGkgLSAxLCAyKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAtPSAyO1xcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAvL2VuZCB0cmltRG90c1xcblxcbiAgICAgICAgICAgICAgICBuYW1lID0gbmFtZS5qb2luKFxcXCIvXFxcIik7XFxuICAgICAgICAgICAgfSBlbHNlIGlmIChuYW1lLmluZGV4T2YoJy4vJykgPT09IDApIHtcXG4gICAgICAgICAgICAgICAgLy8gTm8gYmFzZU5hbWUsIHNvIHRoaXMgaXMgSUQgaXMgcmVzb2x2ZWQgcmVsYXRpdmVcXG4gICAgICAgICAgICAgICAgLy8gdG8gYmFzZVVybCwgcHVsbCBvZmYgdGhlIGxlYWRpbmcgZG90LlxcbiAgICAgICAgICAgICAgICBuYW1lID0gbmFtZS5zdWJzdHJpbmcoMik7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcblxcbiAgICAgICAgLy9BcHBseSBtYXAgY29uZmlnIGlmIGF2YWlsYWJsZS5cXG4gICAgICAgIGlmICgoYmFzZVBhcnRzIHx8IHN0YXJNYXApICYmIG1hcCkge1xcbiAgICAgICAgICAgIG5hbWVQYXJ0cyA9IG5hbWUuc3BsaXQoJy8nKTtcXG5cXG4gICAgICAgICAgICBmb3IgKGkgPSBuYW1lUGFydHMubGVuZ3RoOyBpID4gMDsgaSAtPSAxKSB7XFxuICAgICAgICAgICAgICAgIG5hbWVTZWdtZW50ID0gbmFtZVBhcnRzLnNsaWNlKDAsIGkpLmpvaW4oXFxcIi9cXFwiKTtcXG5cXG4gICAgICAgICAgICAgICAgaWYgKGJhc2VQYXJ0cykge1xcbiAgICAgICAgICAgICAgICAgICAgLy9GaW5kIHRoZSBsb25nZXN0IGJhc2VOYW1lIHNlZ21lbnQgbWF0Y2ggaW4gdGhlIGNvbmZpZy5cXG4gICAgICAgICAgICAgICAgICAgIC8vU28sIGRvIGpvaW5zIG9uIHRoZSBiaWdnZXN0IHRvIHNtYWxsZXN0IGxlbmd0aHMgb2YgYmFzZVBhcnRzLlxcbiAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gYmFzZVBhcnRzLmxlbmd0aDsgaiA+IDA7IGogLT0gMSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcFZhbHVlID0gbWFwW2Jhc2VQYXJ0cy5zbGljZSgwLCBqKS5qb2luKCcvJyldO1xcblxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vYmFzZU5hbWUgc2VnbWVudCBoYXMgIGNvbmZpZywgZmluZCBpZiBpdCBoYXMgb25lIGZvclxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vdGhpcyBuYW1lLlxcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtYXBWYWx1ZSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBWYWx1ZSA9IG1hcFZhbHVlW25hbWVTZWdtZW50XTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1hcFZhbHVlKSB7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL01hdGNoLCB1cGRhdGUgbmFtZSB0byB0aGUgbmV3IHZhbHVlLlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm91bmRNYXAgPSBtYXBWYWx1ZTtcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvdW5kSSA9IGk7XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgfVxcblxcbiAgICAgICAgICAgICAgICBpZiAoZm91bmRNYXApIHtcXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICAgICAgICB9XFxuXFxuICAgICAgICAgICAgICAgIC8vQ2hlY2sgZm9yIGEgc3RhciBtYXAgbWF0Y2gsIGJ1dCBqdXN0IGhvbGQgb24gdG8gaXQsXFxuICAgICAgICAgICAgICAgIC8vaWYgdGhlcmUgaXMgYSBzaG9ydGVyIHNlZ21lbnQgbWF0Y2ggbGF0ZXIgaW4gYSBtYXRjaGluZ1xcbiAgICAgICAgICAgICAgICAvL2NvbmZpZywgdGhlbiBmYXZvciBvdmVyIHRoaXMgc3RhciBtYXAuXFxuICAgICAgICAgICAgICAgIGlmICghZm91bmRTdGFyTWFwICYmIHN0YXJNYXAgJiYgc3Rhck1hcFtuYW1lU2VnbWVudF0pIHtcXG4gICAgICAgICAgICAgICAgICAgIGZvdW5kU3Rhck1hcCA9IHN0YXJNYXBbbmFtZVNlZ21lbnRdO1xcbiAgICAgICAgICAgICAgICAgICAgc3RhckkgPSBpO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfVxcblxcbiAgICAgICAgICAgIGlmICghZm91bmRNYXAgJiYgZm91bmRTdGFyTWFwKSB7XFxuICAgICAgICAgICAgICAgIGZvdW5kTWFwID0gZm91bmRTdGFyTWFwO1xcbiAgICAgICAgICAgICAgICBmb3VuZEkgPSBzdGFySTtcXG4gICAgICAgICAgICB9XFxuXFxuICAgICAgICAgICAgaWYgKGZvdW5kTWFwKSB7XFxuICAgICAgICAgICAgICAgIG5hbWVQYXJ0cy5zcGxpY2UoMCwgZm91bmRJLCBmb3VuZE1hcCk7XFxuICAgICAgICAgICAgICAgIG5hbWUgPSBuYW1lUGFydHMuam9pbignLycpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG5cXG4gICAgICAgIHJldHVybiBuYW1lO1xcbiAgICB9XFxuXFxuICAgIGZ1bmN0aW9uIG1ha2VSZXF1aXJlKHJlbE5hbWUsIGZvcmNlU3luYykge1xcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcXG4gICAgICAgICAgICAvL0EgdmVyc2lvbiBvZiBhIHJlcXVpcmUgZnVuY3Rpb24gdGhhdCBwYXNzZXMgYSBtb2R1bGVOYW1lXFxuICAgICAgICAgICAgLy92YWx1ZSBmb3IgaXRlbXMgdGhhdCBtYXkgbmVlZCB0b1xcbiAgICAgICAgICAgIC8vbG9vayB1cCBwYXRocyByZWxhdGl2ZSB0byB0aGUgbW9kdWxlTmFtZVxcbiAgICAgICAgICAgIHZhciBhcmdzID0gYXBzLmNhbGwoYXJndW1lbnRzLCAwKTtcXG5cXG4gICAgICAgICAgICAvL0lmIGZpcnN0IGFyZyBpcyBub3QgcmVxdWlyZSgnc3RyaW5nJyksIGFuZCB0aGVyZSBpcyBvbmx5XFxuICAgICAgICAgICAgLy9vbmUgYXJnLCBpdCBpcyB0aGUgYXJyYXkgZm9ybSB3aXRob3V0IGEgY2FsbGJhY2suIEluc2VydFxcbiAgICAgICAgICAgIC8vYSBudWxsIHNvIHRoYXQgdGhlIGZvbGxvd2luZyBjb25jYXQgaXMgY29ycmVjdC5cXG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyZ3NbMF0gIT09ICdzdHJpbmcnICYmIGFyZ3MubGVuZ3RoID09PSAxKSB7XFxuICAgICAgICAgICAgICAgIGFyZ3MucHVzaChudWxsKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgcmV0dXJuIHJlcS5hcHBseSh1bmRlZiwgYXJncy5jb25jYXQoW3JlbE5hbWUsIGZvcmNlU3luY10pKTtcXG4gICAgICAgIH07XFxuICAgIH1cXG5cXG4gICAgZnVuY3Rpb24gbWFrZU5vcm1hbGl6ZShyZWxOYW1lKSB7XFxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG5hbWUpIHtcXG4gICAgICAgICAgICByZXR1cm4gbm9ybWFsaXplKG5hbWUsIHJlbE5hbWUpO1xcbiAgICAgICAgfTtcXG4gICAgfVxcblxcbiAgICBmdW5jdGlvbiBtYWtlTG9hZChkZXBOYW1lKSB7XFxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHZhbHVlKSB7XFxuICAgICAgICAgICAgZGVmaW5lZFtkZXBOYW1lXSA9IHZhbHVlO1xcbiAgICAgICAgfTtcXG4gICAgfVxcblxcbiAgICBmdW5jdGlvbiBjYWxsRGVwKG5hbWUpIHtcXG4gICAgICAgIGlmIChoYXNQcm9wKHdhaXRpbmcsIG5hbWUpKSB7XFxuICAgICAgICAgICAgdmFyIGFyZ3MgPSB3YWl0aW5nW25hbWVdO1xcbiAgICAgICAgICAgIGRlbGV0ZSB3YWl0aW5nW25hbWVdO1xcbiAgICAgICAgICAgIGRlZmluaW5nW25hbWVdID0gdHJ1ZTtcXG4gICAgICAgICAgICBtYWluLmFwcGx5KHVuZGVmLCBhcmdzKTtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIGlmICghaGFzUHJvcChkZWZpbmVkLCBuYW1lKSAmJiAhaGFzUHJvcChkZWZpbmluZywgbmFtZSkpIHtcXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vICcgKyBuYW1lKTtcXG4gICAgICAgIH1cXG4gICAgICAgIHJldHVybiBkZWZpbmVkW25hbWVdO1xcbiAgICB9XFxuXFxuICAgIC8vVHVybnMgYSBwbHVnaW4hcmVzb3VyY2UgdG8gW3BsdWdpbiwgcmVzb3VyY2VdXFxuICAgIC8vd2l0aCB0aGUgcGx1Z2luIGJlaW5nIHVuZGVmaW5lZCBpZiB0aGUgbmFtZVxcbiAgICAvL2RpZCBub3QgaGF2ZSBhIHBsdWdpbiBwcmVmaXguXFxuICAgIGZ1bmN0aW9uIHNwbGl0UHJlZml4KG5hbWUpIHtcXG4gICAgICAgIHZhciBwcmVmaXgsXFxuICAgICAgICAgICAgaW5kZXggPSBuYW1lID8gbmFtZS5pbmRleE9mKCchJykgOiAtMTtcXG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XFxuICAgICAgICAgICAgcHJlZml4ID0gbmFtZS5zdWJzdHJpbmcoMCwgaW5kZXgpO1xcbiAgICAgICAgICAgIG5hbWUgPSBuYW1lLnN1YnN0cmluZyhpbmRleCArIDEsIG5hbWUubGVuZ3RoKTtcXG4gICAgICAgIH1cXG4gICAgICAgIHJldHVybiBbcHJlZml4LCBuYW1lXTtcXG4gICAgfVxcblxcbiAgICAvKipcXG4gICAgICogTWFrZXMgYSBuYW1lIG1hcCwgbm9ybWFsaXppbmcgdGhlIG5hbWUsIGFuZCB1c2luZyBhIHBsdWdpblxcbiAgICAgKiBmb3Igbm9ybWFsaXphdGlvbiBpZiBuZWNlc3NhcnkuIEdyYWJzIGEgcmVmIHRvIHBsdWdpblxcbiAgICAgKiB0b28sIGFzIGFuIG9wdGltaXphdGlvbi5cXG4gICAgICovXFxuICAgIG1ha2VNYXAgPSBmdW5jdGlvbiAobmFtZSwgcmVsTmFtZSkge1xcbiAgICAgICAgdmFyIHBsdWdpbixcXG4gICAgICAgICAgICBwYXJ0cyA9IHNwbGl0UHJlZml4KG5hbWUpLFxcbiAgICAgICAgICAgIHByZWZpeCA9IHBhcnRzWzBdO1xcblxcbiAgICAgICAgbmFtZSA9IHBhcnRzWzFdO1xcblxcbiAgICAgICAgaWYgKHByZWZpeCkge1xcbiAgICAgICAgICAgIHByZWZpeCA9IG5vcm1hbGl6ZShwcmVmaXgsIHJlbE5hbWUpO1xcbiAgICAgICAgICAgIHBsdWdpbiA9IGNhbGxEZXAocHJlZml4KTtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIC8vTm9ybWFsaXplIGFjY29yZGluZ1xcbiAgICAgICAgaWYgKHByZWZpeCkge1xcbiAgICAgICAgICAgIGlmIChwbHVnaW4gJiYgcGx1Z2luLm5vcm1hbGl6ZSkge1xcbiAgICAgICAgICAgICAgICBuYW1lID0gcGx1Z2luLm5vcm1hbGl6ZShuYW1lLCBtYWtlTm9ybWFsaXplKHJlbE5hbWUpKTtcXG4gICAgICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgICAgICBuYW1lID0gbm9ybWFsaXplKG5hbWUsIHJlbE5hbWUpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgbmFtZSA9IG5vcm1hbGl6ZShuYW1lLCByZWxOYW1lKTtcXG4gICAgICAgICAgICBwYXJ0cyA9IHNwbGl0UHJlZml4KG5hbWUpO1xcbiAgICAgICAgICAgIHByZWZpeCA9IHBhcnRzWzBdO1xcbiAgICAgICAgICAgIG5hbWUgPSBwYXJ0c1sxXTtcXG4gICAgICAgICAgICBpZiAocHJlZml4KSB7XFxuICAgICAgICAgICAgICAgIHBsdWdpbiA9IGNhbGxEZXAocHJlZml4KTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuXFxuICAgICAgICAvL1VzaW5nIHJpZGljdWxvdXMgcHJvcGVydHkgbmFtZXMgZm9yIHNwYWNlIHJlYXNvbnNcXG4gICAgICAgIHJldHVybiB7XFxuICAgICAgICAgICAgZjogcHJlZml4ID8gcHJlZml4ICsgJyEnICsgbmFtZSA6IG5hbWUsIC8vZnVsbE5hbWVcXG4gICAgICAgICAgICBuOiBuYW1lLFxcbiAgICAgICAgICAgIHByOiBwcmVmaXgsXFxuICAgICAgICAgICAgcDogcGx1Z2luXFxuICAgICAgICB9O1xcbiAgICB9O1xcblxcbiAgICBmdW5jdGlvbiBtYWtlQ29uZmlnKG5hbWUpIHtcXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XFxuICAgICAgICAgICAgcmV0dXJuIChjb25maWcgJiYgY29uZmlnLmNvbmZpZyAmJiBjb25maWcuY29uZmlnW25hbWVdKSB8fCB7fTtcXG4gICAgICAgIH07XFxuICAgIH1cXG5cXG4gICAgaGFuZGxlcnMgPSB7XFxuICAgICAgICByZXF1aXJlOiBmdW5jdGlvbiAobmFtZSkge1xcbiAgICAgICAgICAgIHJldHVybiBtYWtlUmVxdWlyZShuYW1lKTtcXG4gICAgICAgIH0sXFxuICAgICAgICBleHBvcnRzOiBmdW5jdGlvbiAobmFtZSkge1xcbiAgICAgICAgICAgIHZhciBlID0gZGVmaW5lZFtuYW1lXTtcXG4gICAgICAgICAgICBpZiAodHlwZW9mIGUgIT09ICd1bmRlZmluZWQnKSB7XFxuICAgICAgICAgICAgICAgIHJldHVybiBlO1xcbiAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgIHJldHVybiAoZGVmaW5lZFtuYW1lXSA9IHt9KTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9LFxcbiAgICAgICAgbW9kdWxlOiBmdW5jdGlvbiAobmFtZSkge1xcbiAgICAgICAgICAgIHJldHVybiB7XFxuICAgICAgICAgICAgICAgIGlkOiBuYW1lLFxcbiAgICAgICAgICAgICAgICB1cmk6ICcnLFxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBkZWZpbmVkW25hbWVdLFxcbiAgICAgICAgICAgICAgICBjb25maWc6IG1ha2VDb25maWcobmFtZSlcXG4gICAgICAgICAgICB9O1xcbiAgICAgICAgfVxcbiAgICB9O1xcblxcbiAgICBtYWluID0gZnVuY3Rpb24gKG5hbWUsIGRlcHMsIGNhbGxiYWNrLCByZWxOYW1lKSB7XFxuICAgICAgICB2YXIgY2pzTW9kdWxlLCBkZXBOYW1lLCByZXQsIG1hcCwgaSxcXG4gICAgICAgICAgICBhcmdzID0gW10sXFxuICAgICAgICAgICAgY2FsbGJhY2tUeXBlID0gdHlwZW9mIGNhbGxiYWNrLFxcbiAgICAgICAgICAgIHVzaW5nRXhwb3J0cztcXG5cXG4gICAgICAgIC8vVXNlIG5hbWUgaWYgbm8gcmVsTmFtZVxcbiAgICAgICAgcmVsTmFtZSA9IHJlbE5hbWUgfHwgbmFtZTtcXG5cXG4gICAgICAgIC8vQ2FsbCB0aGUgY2FsbGJhY2sgdG8gZGVmaW5lIHRoZSBtb2R1bGUsIGlmIG5lY2Vzc2FyeS5cXG4gICAgICAgIGlmIChjYWxsYmFja1R5cGUgPT09ICd1bmRlZmluZWQnIHx8IGNhbGxiYWNrVHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xcbiAgICAgICAgICAgIC8vUHVsbCBvdXQgdGhlIGRlZmluZWQgZGVwZW5kZW5jaWVzIGFuZCBwYXNzIHRoZSBvcmRlcmVkXFxuICAgICAgICAgICAgLy92YWx1ZXMgdG8gdGhlIGNhbGxiYWNrLlxcbiAgICAgICAgICAgIC8vRGVmYXVsdCB0byBbcmVxdWlyZSwgZXhwb3J0cywgbW9kdWxlXSBpZiBubyBkZXBzXFxuICAgICAgICAgICAgZGVwcyA9ICFkZXBzLmxlbmd0aCAmJiBjYWxsYmFjay5sZW5ndGggPyBbJ3JlcXVpcmUnLCAnZXhwb3J0cycsICdtb2R1bGUnXSA6IGRlcHM7XFxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGRlcHMubGVuZ3RoOyBpICs9IDEpIHtcXG4gICAgICAgICAgICAgICAgbWFwID0gbWFrZU1hcChkZXBzW2ldLCByZWxOYW1lKTtcXG4gICAgICAgICAgICAgICAgZGVwTmFtZSA9IG1hcC5mO1xcblxcbiAgICAgICAgICAgICAgICAvL0Zhc3QgcGF0aCBDb21tb25KUyBzdGFuZGFyZCBkZXBlbmRlbmNpZXMuXFxuICAgICAgICAgICAgICAgIGlmIChkZXBOYW1lID09PSBcXFwicmVxdWlyZVxcXCIpIHtcXG4gICAgICAgICAgICAgICAgICAgIGFyZ3NbaV0gPSBoYW5kbGVycy5yZXF1aXJlKG5hbWUpO1xcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGRlcE5hbWUgPT09IFxcXCJleHBvcnRzXFxcIikge1xcbiAgICAgICAgICAgICAgICAgICAgLy9Db21tb25KUyBtb2R1bGUgc3BlYyAxLjFcXG4gICAgICAgICAgICAgICAgICAgIGFyZ3NbaV0gPSBoYW5kbGVycy5leHBvcnRzKG5hbWUpO1xcbiAgICAgICAgICAgICAgICAgICAgdXNpbmdFeHBvcnRzID0gdHJ1ZTtcXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkZXBOYW1lID09PSBcXFwibW9kdWxlXFxcIikge1xcbiAgICAgICAgICAgICAgICAgICAgLy9Db21tb25KUyBtb2R1bGUgc3BlYyAxLjFcXG4gICAgICAgICAgICAgICAgICAgIGNqc01vZHVsZSA9IGFyZ3NbaV0gPSBoYW5kbGVycy5tb2R1bGUobmFtZSk7XFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGFzUHJvcChkZWZpbmVkLCBkZXBOYW1lKSB8fFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc1Byb3Aod2FpdGluZywgZGVwTmFtZSkgfHxcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNQcm9wKGRlZmluaW5nLCBkZXBOYW1lKSkge1xcbiAgICAgICAgICAgICAgICAgICAgYXJnc1tpXSA9IGNhbGxEZXAoZGVwTmFtZSk7XFxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWFwLnApIHtcXG4gICAgICAgICAgICAgICAgICAgIG1hcC5wLmxvYWQobWFwLm4sIG1ha2VSZXF1aXJlKHJlbE5hbWUsIHRydWUpLCBtYWtlTG9hZChkZXBOYW1lKSwge30pO1xcbiAgICAgICAgICAgICAgICAgICAgYXJnc1tpXSA9IGRlZmluZWRbZGVwTmFtZV07XFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IobmFtZSArICcgbWlzc2luZyAnICsgZGVwTmFtZSk7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9XFxuXFxuICAgICAgICAgICAgcmV0ID0gY2FsbGJhY2sgPyBjYWxsYmFjay5hcHBseShkZWZpbmVkW25hbWVdLCBhcmdzKSA6IHVuZGVmaW5lZDtcXG5cXG4gICAgICAgICAgICBpZiAobmFtZSkge1xcbiAgICAgICAgICAgICAgICAvL0lmIHNldHRpbmcgZXhwb3J0cyB2aWEgXFxcIm1vZHVsZVxcXCIgaXMgaW4gcGxheSxcXG4gICAgICAgICAgICAgICAgLy9mYXZvciB0aGF0IG92ZXIgcmV0dXJuIHZhbHVlIGFuZCBleHBvcnRzLiBBZnRlciB0aGF0LFxcbiAgICAgICAgICAgICAgICAvL2Zhdm9yIGEgbm9uLXVuZGVmaW5lZCByZXR1cm4gdmFsdWUgb3ZlciBleHBvcnRzIHVzZS5cXG4gICAgICAgICAgICAgICAgaWYgKGNqc01vZHVsZSAmJiBjanNNb2R1bGUuZXhwb3J0cyAhPT0gdW5kZWYgJiZcXG4gICAgICAgICAgICAgICAgICAgICAgICBjanNNb2R1bGUuZXhwb3J0cyAhPT0gZGVmaW5lZFtuYW1lXSkge1xcbiAgICAgICAgICAgICAgICAgICAgZGVmaW5lZFtuYW1lXSA9IGNqc01vZHVsZS5leHBvcnRzO1xcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJldCAhPT0gdW5kZWYgfHwgIXVzaW5nRXhwb3J0cykge1xcbiAgICAgICAgICAgICAgICAgICAgLy9Vc2UgdGhlIHJldHVybiB2YWx1ZSBmcm9tIHRoZSBmdW5jdGlvbi5cXG4gICAgICAgICAgICAgICAgICAgIGRlZmluZWRbbmFtZV0gPSByZXQ7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9XFxuICAgICAgICB9IGVsc2UgaWYgKG5hbWUpIHtcXG4gICAgICAgICAgICAvL01heSBqdXN0IGJlIGFuIG9iamVjdCBkZWZpbml0aW9uIGZvciB0aGUgbW9kdWxlLiBPbmx5XFxuICAgICAgICAgICAgLy93b3JyeSBhYm91dCBkZWZpbmluZyBpZiBoYXZlIGEgbW9kdWxlIG5hbWUuXFxuICAgICAgICAgICAgZGVmaW5lZFtuYW1lXSA9IGNhbGxiYWNrO1xcbiAgICAgICAgfVxcbiAgICB9O1xcblxcbiAgICByZXF1aXJlanMgPSByZXF1aXJlID0gcmVxID0gZnVuY3Rpb24gKGRlcHMsIGNhbGxiYWNrLCByZWxOYW1lLCBmb3JjZVN5bmMsIGFsdCkge1xcbiAgICAgICAgaWYgKHR5cGVvZiBkZXBzID09PSBcXFwic3RyaW5nXFxcIikge1xcbiAgICAgICAgICAgIGlmIChoYW5kbGVyc1tkZXBzXSkge1xcbiAgICAgICAgICAgICAgICAvL2NhbGxiYWNrIGluIHRoaXMgY2FzZSBpcyByZWFsbHkgcmVsTmFtZVxcbiAgICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlcnNbZGVwc10oY2FsbGJhY2spO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAvL0p1c3QgcmV0dXJuIHRoZSBtb2R1bGUgd2FudGVkLiBJbiB0aGlzIHNjZW5hcmlvLCB0aGVcXG4gICAgICAgICAgICAvL2RlcHMgYXJnIGlzIHRoZSBtb2R1bGUgbmFtZSwgYW5kIHNlY29uZCBhcmcgKGlmIHBhc3NlZClcXG4gICAgICAgICAgICAvL2lzIGp1c3QgdGhlIHJlbE5hbWUuXFxuICAgICAgICAgICAgLy9Ob3JtYWxpemUgbW9kdWxlIG5hbWUsIGlmIGl0IGNvbnRhaW5zIC4gb3IgLi5cXG4gICAgICAgICAgICByZXR1cm4gY2FsbERlcChtYWtlTWFwKGRlcHMsIGNhbGxiYWNrKS5mKTtcXG4gICAgICAgIH0gZWxzZSBpZiAoIWRlcHMuc3BsaWNlKSB7XFxuICAgICAgICAgICAgLy9kZXBzIGlzIGEgY29uZmlnIG9iamVjdCwgbm90IGFuIGFycmF5LlxcbiAgICAgICAgICAgIGNvbmZpZyA9IGRlcHM7XFxuICAgICAgICAgICAgaWYgKGNvbmZpZy5kZXBzKSB7XFxuICAgICAgICAgICAgICAgIHJlcShjb25maWcuZGVwcywgY29uZmlnLmNhbGxiYWNrKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgaWYgKCFjYWxsYmFjaykge1xcbiAgICAgICAgICAgICAgICByZXR1cm47XFxuICAgICAgICAgICAgfVxcblxcbiAgICAgICAgICAgIGlmIChjYWxsYmFjay5zcGxpY2UpIHtcXG4gICAgICAgICAgICAgICAgLy9jYWxsYmFjayBpcyBhbiBhcnJheSwgd2hpY2ggbWVhbnMgaXQgaXMgYSBkZXBlbmRlbmN5IGxpc3QuXFxuICAgICAgICAgICAgICAgIC8vQWRqdXN0IGFyZ3MgaWYgdGhlcmUgYXJlIGRlcGVuZGVuY2llc1xcbiAgICAgICAgICAgICAgICBkZXBzID0gY2FsbGJhY2s7XFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrID0gcmVsTmFtZTtcXG4gICAgICAgICAgICAgICAgcmVsTmFtZSA9IG51bGw7XFxuICAgICAgICAgICAgfSBlbHNlIHtcXG4gICAgICAgICAgICAgICAgZGVwcyA9IHVuZGVmO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG5cXG4gICAgICAgIC8vU3VwcG9ydCByZXF1aXJlKFsnYSddKVxcbiAgICAgICAgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmdW5jdGlvbiAoKSB7fTtcXG5cXG4gICAgICAgIC8vSWYgcmVsTmFtZSBpcyBhIGZ1bmN0aW9uLCBpdCBpcyBhbiBlcnJiYWNrIGhhbmRsZXIsXFxuICAgICAgICAvL3NvIHJlbW92ZSBpdC5cXG4gICAgICAgIGlmICh0eXBlb2YgcmVsTmFtZSA9PT0gJ2Z1bmN0aW9uJykge1xcbiAgICAgICAgICAgIHJlbE5hbWUgPSBmb3JjZVN5bmM7XFxuICAgICAgICAgICAgZm9yY2VTeW5jID0gYWx0O1xcbiAgICAgICAgfVxcblxcbiAgICAgICAgLy9TaW11bGF0ZSBhc3luYyBjYWxsYmFjaztcXG4gICAgICAgIGlmIChmb3JjZVN5bmMpIHtcXG4gICAgICAgICAgICBtYWluKHVuZGVmLCBkZXBzLCBjYWxsYmFjaywgcmVsTmFtZSk7XFxuICAgICAgICB9IGVsc2Uge1xcbiAgICAgICAgICAgIC8vVXNpbmcgYSBub24temVybyB2YWx1ZSBiZWNhdXNlIG9mIGNvbmNlcm4gZm9yIHdoYXQgb2xkIGJyb3dzZXJzXFxuICAgICAgICAgICAgLy9kbywgYW5kIGxhdGVzdCBicm93c2VycyBcXFwidXBncmFkZVxcXCIgdG8gNCBpZiBsb3dlciB2YWx1ZSBpcyB1c2VkOlxcbiAgICAgICAgICAgIC8vaHR0cDovL3d3dy53aGF0d2cub3JnL3NwZWNzL3dlYi1hcHBzL2N1cnJlbnQtd29yay9tdWx0aXBhZ2UvdGltZXJzLmh0bWwjZG9tLXdpbmRvd3RpbWVycy1zZXR0aW1lb3V0OlxcbiAgICAgICAgICAgIC8vSWYgd2FudCBhIHZhbHVlIGltbWVkaWF0ZWx5LCB1c2UgcmVxdWlyZSgnaWQnKSBpbnN0ZWFkIC0tIHNvbWV0aGluZ1xcbiAgICAgICAgICAgIC8vdGhhdCB3b3JrcyBpbiBhbG1vbmQgb24gdGhlIGdsb2JhbCBsZXZlbCwgYnV0IG5vdCBndWFyYW50ZWVkIGFuZFxcbiAgICAgICAgICAgIC8vdW5saWtlbHkgdG8gd29yayBpbiBvdGhlciBBTUQgaW1wbGVtZW50YXRpb25zLlxcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xcbiAgICAgICAgICAgICAgICBtYWluKHVuZGVmLCBkZXBzLCBjYWxsYmFjaywgcmVsTmFtZSk7XFxuICAgICAgICAgICAgfSwgNCk7XFxuICAgICAgICB9XFxuXFxuICAgICAgICByZXR1cm4gcmVxO1xcbiAgICB9O1xcblxcbiAgICAvKipcXG4gICAgICogSnVzdCBkcm9wcyB0aGUgY29uZmlnIG9uIHRoZSBmbG9vciwgYnV0IHJldHVybnMgcmVxIGluIGNhc2VcXG4gICAgICogdGhlIGNvbmZpZyByZXR1cm4gdmFsdWUgaXMgdXNlZC5cXG4gICAgICovXFxuICAgIHJlcS5jb25maWcgPSBmdW5jdGlvbiAoY2ZnKSB7XFxuICAgICAgICByZXR1cm4gcmVxKGNmZyk7XFxuICAgIH07XFxuXFxuICAgIC8qKlxcbiAgICAgKiBFeHBvc2UgbW9kdWxlIHJlZ2lzdHJ5IGZvciBkZWJ1Z2dpbmcgYW5kIHRvb2xpbmdcXG4gICAgICovXFxuICAgIHJlcXVpcmVqcy5fZGVmaW5lZCA9IGRlZmluZWQ7XFxuXFxuICAgIGRlZmluZSA9IGZ1bmN0aW9uIChuYW1lLCBkZXBzLCBjYWxsYmFjaykge1xcbiAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignU2VlIGFsbW9uZCBSRUFETUU6IGluY29ycmVjdCBtb2R1bGUgYnVpbGQsIG5vIG1vZHVsZSBuYW1lJyk7XFxuICAgICAgICB9XFxuXFxuICAgICAgICAvL1RoaXMgbW9kdWxlIG1heSBub3QgaGF2ZSBkZXBlbmRlbmNpZXNcXG4gICAgICAgIGlmICghZGVwcy5zcGxpY2UpIHtcXG4gICAgICAgICAgICAvL2RlcHMgaXMgbm90IGFuIGFycmF5LCBzbyBwcm9iYWJseSBtZWFuc1xcbiAgICAgICAgICAgIC8vYW4gb2JqZWN0IGxpdGVyYWwgb3IgZmFjdG9yeSBmdW5jdGlvbiBmb3JcXG4gICAgICAgICAgICAvL3RoZSB2YWx1ZS4gQWRqdXN0IGFyZ3MuXFxuICAgICAgICAgICAgY2FsbGJhY2sgPSBkZXBzO1xcbiAgICAgICAgICAgIGRlcHMgPSBbXTtcXG4gICAgICAgIH1cXG5cXG4gICAgICAgIGlmICghaGFzUHJvcChkZWZpbmVkLCBuYW1lKSAmJiAhaGFzUHJvcCh3YWl0aW5nLCBuYW1lKSkge1xcbiAgICAgICAgICAgIHdhaXRpbmdbbmFtZV0gPSBbbmFtZSwgZGVwcywgY2FsbGJhY2tdO1xcbiAgICAgICAgfVxcbiAgICB9O1xcblxcbiAgICBkZWZpbmUuYW1kID0ge1xcbiAgICAgICAgalF1ZXJ5OiB0cnVlXFxuICAgIH07XFxufSgpKTtcXG5cXG5TMi5yZXF1aXJlanMgPSByZXF1aXJlanM7UzIucmVxdWlyZSA9IHJlcXVpcmU7UzIuZGVmaW5lID0gZGVmaW5lO1xcbn1cXG59KCkpO1xcblMyLmRlZmluZShcXFwiYWxtb25kXFxcIiwgZnVuY3Rpb24oKXt9KTtcXG5cXG4vKiBnbG9iYWwgalF1ZXJ5OmZhbHNlLCAkOmZhbHNlICovXFxyXFxuUzIuZGVmaW5lKCdqcXVlcnknLFtdLGZ1bmN0aW9uICgpIHtcXHJcXG4gIHZhciBfJCA9IGpRdWVyeSB8fCAkO1xcclxcblxcclxcbiAgaWYgKF8kID09IG51bGwgJiYgY29uc29sZSAmJiBjb25zb2xlLmVycm9yKSB7XFxyXFxuICAgIGNvbnNvbGUuZXJyb3IoXFxyXFxuICAgICAgJ1NlbGVjdDI6IEFuIGluc3RhbmNlIG9mIGpRdWVyeSBvciBhIGpRdWVyeS1jb21wYXRpYmxlIGxpYnJhcnkgd2FzIG5vdCAnICtcXHJcXG4gICAgICAnZm91bmQuIE1ha2Ugc3VyZSB0aGF0IHlvdSBhcmUgaW5jbHVkaW5nIGpRdWVyeSBiZWZvcmUgU2VsZWN0MiBvbiB5b3VyICcgK1xcclxcbiAgICAgICd3ZWIgcGFnZS4nXFxyXFxuICAgICk7XFxyXFxuICB9XFxyXFxuXFxyXFxuICByZXR1cm4gXyQ7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL3V0aWxzJyxbXFxyXFxuICAnanF1ZXJ5J1xcclxcbl0sIGZ1bmN0aW9uICgkKSB7XFxyXFxuICB2YXIgVXRpbHMgPSB7fTtcXHJcXG5cXHJcXG4gIFV0aWxzLkV4dGVuZCA9IGZ1bmN0aW9uIChDaGlsZENsYXNzLCBTdXBlckNsYXNzKSB7XFxyXFxuICAgIHZhciBfX2hhc1Byb3AgPSB7fS5oYXNPd25Qcm9wZXJ0eTtcXHJcXG5cXHJcXG4gICAgZnVuY3Rpb24gQmFzZUNvbnN0cnVjdG9yICgpIHtcXHJcXG4gICAgICB0aGlzLmNvbnN0cnVjdG9yID0gQ2hpbGRDbGFzcztcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBmb3IgKHZhciBrZXkgaW4gU3VwZXJDbGFzcykge1xcclxcbiAgICAgIGlmIChfX2hhc1Byb3AuY2FsbChTdXBlckNsYXNzLCBrZXkpKSB7XFxyXFxuICAgICAgICBDaGlsZENsYXNzW2tleV0gPSBTdXBlckNsYXNzW2tleV07XFxyXFxuICAgICAgfVxcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIEJhc2VDb25zdHJ1Y3Rvci5wcm90b3R5cGUgPSBTdXBlckNsYXNzLnByb3RvdHlwZTtcXHJcXG4gICAgQ2hpbGRDbGFzcy5wcm90b3R5cGUgPSBuZXcgQmFzZUNvbnN0cnVjdG9yKCk7XFxyXFxuICAgIENoaWxkQ2xhc3MuX19zdXBlcl9fID0gU3VwZXJDbGFzcy5wcm90b3R5cGU7XFxyXFxuXFxyXFxuICAgIHJldHVybiBDaGlsZENsYXNzO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIGZ1bmN0aW9uIGdldE1ldGhvZHMgKHRoZUNsYXNzKSB7XFxyXFxuICAgIHZhciBwcm90byA9IHRoZUNsYXNzLnByb3RvdHlwZTtcXHJcXG5cXHJcXG4gICAgdmFyIG1ldGhvZHMgPSBbXTtcXHJcXG5cXHJcXG4gICAgZm9yICh2YXIgbWV0aG9kTmFtZSBpbiBwcm90bykge1xcclxcbiAgICAgIHZhciBtID0gcHJvdG9bbWV0aG9kTmFtZV07XFxyXFxuXFxyXFxuICAgICAgaWYgKHR5cGVvZiBtICE9PSAnZnVuY3Rpb24nKSB7XFxyXFxuICAgICAgICBjb250aW51ZTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgaWYgKG1ldGhvZE5hbWUgPT09ICdjb25zdHJ1Y3RvcicpIHtcXHJcXG4gICAgICAgIGNvbnRpbnVlO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBtZXRob2RzLnB1c2gobWV0aG9kTmFtZSk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuIG1ldGhvZHM7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBVdGlscy5EZWNvcmF0ZSA9IGZ1bmN0aW9uIChTdXBlckNsYXNzLCBEZWNvcmF0b3JDbGFzcykge1xcclxcbiAgICB2YXIgZGVjb3JhdGVkTWV0aG9kcyA9IGdldE1ldGhvZHMoRGVjb3JhdG9yQ2xhc3MpO1xcclxcbiAgICB2YXIgc3VwZXJNZXRob2RzID0gZ2V0TWV0aG9kcyhTdXBlckNsYXNzKTtcXHJcXG5cXHJcXG4gICAgZnVuY3Rpb24gRGVjb3JhdGVkQ2xhc3MgKCkge1xcclxcbiAgICAgIHZhciB1bnNoaWZ0ID0gQXJyYXkucHJvdG90eXBlLnVuc2hpZnQ7XFxyXFxuXFxyXFxuICAgICAgdmFyIGFyZ0NvdW50ID0gRGVjb3JhdG9yQ2xhc3MucHJvdG90eXBlLmNvbnN0cnVjdG9yLmxlbmd0aDtcXHJcXG5cXHJcXG4gICAgICB2YXIgY2FsbGVkQ29uc3RydWN0b3IgPSBTdXBlckNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvcjtcXHJcXG5cXHJcXG4gICAgICBpZiAoYXJnQ291bnQgPiAwKSB7XFxyXFxuICAgICAgICB1bnNoaWZ0LmNhbGwoYXJndW1lbnRzLCBTdXBlckNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcik7XFxyXFxuXFxyXFxuICAgICAgICBjYWxsZWRDb25zdHJ1Y3RvciA9IERlY29yYXRvckNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvcjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgY2FsbGVkQ29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBEZWNvcmF0b3JDbGFzcy5kaXNwbGF5TmFtZSA9IFN1cGVyQ2xhc3MuZGlzcGxheU5hbWU7XFxyXFxuXFxyXFxuICAgIGZ1bmN0aW9uIGN0ciAoKSB7XFxyXFxuICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IERlY29yYXRlZENsYXNzO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIERlY29yYXRlZENsYXNzLnByb3RvdHlwZSA9IG5ldyBjdHIoKTtcXHJcXG5cXHJcXG4gICAgZm9yICh2YXIgbSA9IDA7IG0gPCBzdXBlck1ldGhvZHMubGVuZ3RoOyBtKyspIHtcXHJcXG4gICAgICAgIHZhciBzdXBlck1ldGhvZCA9IHN1cGVyTWV0aG9kc1ttXTtcXHJcXG5cXHJcXG4gICAgICAgIERlY29yYXRlZENsYXNzLnByb3RvdHlwZVtzdXBlck1ldGhvZF0gPVxcclxcbiAgICAgICAgICBTdXBlckNsYXNzLnByb3RvdHlwZVtzdXBlck1ldGhvZF07XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyIGNhbGxlZE1ldGhvZCA9IGZ1bmN0aW9uIChtZXRob2ROYW1lKSB7XFxyXFxuICAgICAgLy8gU3R1YiBvdXQgdGhlIG9yaWdpbmFsIG1ldGhvZCBpZiBpdCdzIG5vdCBkZWNvcmF0aW5nIGFuIGFjdHVhbCBtZXRob2RcXHJcXG4gICAgICB2YXIgb3JpZ2luYWxNZXRob2QgPSBmdW5jdGlvbiAoKSB7fTtcXHJcXG5cXHJcXG4gICAgICBpZiAobWV0aG9kTmFtZSBpbiBEZWNvcmF0ZWRDbGFzcy5wcm90b3R5cGUpIHtcXHJcXG4gICAgICAgIG9yaWdpbmFsTWV0aG9kID0gRGVjb3JhdGVkQ2xhc3MucHJvdG90eXBlW21ldGhvZE5hbWVdO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICB2YXIgZGVjb3JhdGVkTWV0aG9kID0gRGVjb3JhdG9yQ2xhc3MucHJvdG90eXBlW21ldGhvZE5hbWVdO1xcclxcblxcclxcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICB2YXIgdW5zaGlmdCA9IEFycmF5LnByb3RvdHlwZS51bnNoaWZ0O1xcclxcblxcclxcbiAgICAgICAgdW5zaGlmdC5jYWxsKGFyZ3VtZW50cywgb3JpZ2luYWxNZXRob2QpO1xcclxcblxcclxcbiAgICAgICAgcmV0dXJuIGRlY29yYXRlZE1ldGhvZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xcclxcbiAgICAgIH07XFxyXFxuICAgIH07XFxyXFxuXFxyXFxuICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGVjb3JhdGVkTWV0aG9kcy5sZW5ndGg7IGQrKykge1xcclxcbiAgICAgIHZhciBkZWNvcmF0ZWRNZXRob2QgPSBkZWNvcmF0ZWRNZXRob2RzW2RdO1xcclxcblxcclxcbiAgICAgIERlY29yYXRlZENsYXNzLnByb3RvdHlwZVtkZWNvcmF0ZWRNZXRob2RdID0gY2FsbGVkTWV0aG9kKGRlY29yYXRlZE1ldGhvZCk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuIERlY29yYXRlZENsYXNzO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHZhciBPYnNlcnZhYmxlID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB0aGlzLmxpc3RlbmVycyA9IHt9O1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIE9ic2VydmFibGUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2ZW50LCBjYWxsYmFjaykge1xcclxcbiAgICB0aGlzLmxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzIHx8IHt9O1xcclxcblxcclxcbiAgICBpZiAoZXZlbnQgaW4gdGhpcy5saXN0ZW5lcnMpIHtcXHJcXG4gICAgICB0aGlzLmxpc3RlbmVyc1tldmVudF0ucHVzaChjYWxsYmFjayk7XFxyXFxuICAgIH0gZWxzZSB7XFxyXFxuICAgICAgdGhpcy5saXN0ZW5lcnNbZXZlbnRdID0gW2NhbGxiYWNrXTtcXHJcXG4gICAgfVxcclxcbiAgfTtcXHJcXG5cXHJcXG4gIE9ic2VydmFibGUucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbiAoZXZlbnQpIHtcXHJcXG4gICAgdmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xcclxcbiAgICB2YXIgcGFyYW1zID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xcclxcblxcclxcbiAgICB0aGlzLmxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzIHx8IHt9O1xcclxcblxcclxcbiAgICAvLyBQYXJhbXMgc2hvdWxkIGFsd2F5cyBjb21lIGluIGFzIGFuIGFycmF5XFxyXFxuICAgIGlmIChwYXJhbXMgPT0gbnVsbCkge1xcclxcbiAgICAgIHBhcmFtcyA9IFtdO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIC8vIElmIHRoZXJlIGFyZSBubyBhcmd1bWVudHMgdG8gdGhlIGV2ZW50LCB1c2UgYSB0ZW1wb3Jhcnkgb2JqZWN0XFxyXFxuICAgIGlmIChwYXJhbXMubGVuZ3RoID09PSAwKSB7XFxyXFxuICAgICAgcGFyYW1zLnB1c2goe30pO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIC8vIFNldCB0aGUgYF90eXBlYCBvZiB0aGUgZmlyc3Qgb2JqZWN0IHRvIHRoZSBldmVudFxcclxcbiAgICBwYXJhbXNbMF0uX3R5cGUgPSBldmVudDtcXHJcXG5cXHJcXG4gICAgaWYgKGV2ZW50IGluIHRoaXMubGlzdGVuZXJzKSB7XFxyXFxuICAgICAgdGhpcy5pbnZva2UodGhpcy5saXN0ZW5lcnNbZXZlbnRdLCBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmICgnKicgaW4gdGhpcy5saXN0ZW5lcnMpIHtcXHJcXG4gICAgICB0aGlzLmludm9rZSh0aGlzLmxpc3RlbmVyc1snKiddLCBhcmd1bWVudHMpO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgT2JzZXJ2YWJsZS5wcm90b3R5cGUuaW52b2tlID0gZnVuY3Rpb24gKGxpc3RlbmVycywgcGFyYW1zKSB7XFxyXFxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBsaXN0ZW5lcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcXHJcXG4gICAgICBsaXN0ZW5lcnNbaV0uYXBwbHkodGhpcywgcGFyYW1zKTtcXHJcXG4gICAgfVxcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFV0aWxzLk9ic2VydmFibGUgPSBPYnNlcnZhYmxlO1xcclxcblxcclxcbiAgVXRpbHMuZ2VuZXJhdGVDaGFycyA9IGZ1bmN0aW9uIChsZW5ndGgpIHtcXHJcXG4gICAgdmFyIGNoYXJzID0gJyc7XFxyXFxuXFxyXFxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcXHJcXG4gICAgICB2YXIgcmFuZG9tQ2hhciA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDM2KTtcXHJcXG4gICAgICBjaGFycyArPSByYW5kb21DaGFyLnRvU3RyaW5nKDM2KTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICByZXR1cm4gY2hhcnM7XFxyXFxuICB9O1xcclxcblxcclxcbiAgVXRpbHMuYmluZCA9IGZ1bmN0aW9uIChmdW5jLCBjb250ZXh0KSB7XFxyXFxuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgZnVuYy5hcHBseShjb250ZXh0LCBhcmd1bWVudHMpO1xcclxcbiAgICB9O1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFV0aWxzLl9jb252ZXJ0RGF0YSA9IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgIGZvciAodmFyIG9yaWdpbmFsS2V5IGluIGRhdGEpIHtcXHJcXG4gICAgICB2YXIga2V5cyA9IG9yaWdpbmFsS2V5LnNwbGl0KCctJyk7XFxyXFxuXFxyXFxuICAgICAgdmFyIGRhdGFMZXZlbCA9IGRhdGE7XFxyXFxuXFxyXFxuICAgICAgaWYgKGtleXMubGVuZ3RoID09PSAxKSB7XFxyXFxuICAgICAgICBjb250aW51ZTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBrZXlzLmxlbmd0aDsgaysrKSB7XFxyXFxuICAgICAgICB2YXIga2V5ID0ga2V5c1trXTtcXHJcXG5cXHJcXG4gICAgICAgIC8vIExvd2VyY2FzZSB0aGUgZmlyc3QgbGV0dGVyXFxyXFxuICAgICAgICAvLyBCeSBkZWZhdWx0LCBkYXNoLXNlcGFyYXRlZCBiZWNvbWVzIGNhbWVsQ2FzZVxcclxcbiAgICAgICAga2V5ID0ga2V5LnN1YnN0cmluZygwLCAxKS50b0xvd2VyQ2FzZSgpICsga2V5LnN1YnN0cmluZygxKTtcXHJcXG5cXHJcXG4gICAgICAgIGlmICghKGtleSBpbiBkYXRhTGV2ZWwpKSB7XFxyXFxuICAgICAgICAgIGRhdGFMZXZlbFtrZXldID0ge307XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICBpZiAoayA9PSBrZXlzLmxlbmd0aCAtIDEpIHtcXHJcXG4gICAgICAgICAgZGF0YUxldmVsW2tleV0gPSBkYXRhW29yaWdpbmFsS2V5XTtcXHJcXG4gICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgIGRhdGFMZXZlbCA9IGRhdGFMZXZlbFtrZXldO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBkZWxldGUgZGF0YVtvcmlnaW5hbEtleV07XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuIGRhdGE7XFxyXFxuICB9O1xcclxcblxcclxcbiAgVXRpbHMuaGFzU2Nyb2xsID0gZnVuY3Rpb24gKGluZGV4LCBlbCkge1xcclxcbiAgICAvLyBBZGFwdGVkIGZyb20gdGhlIGZ1bmN0aW9uIGNyZWF0ZWQgYnkgQFNoYWRvd1NjcmlwdGVyXFxyXFxuICAgIC8vIGFuZCBhZGFwdGVkIGJ5IEBCaWxsQmFycnkgb24gdGhlIFN0YWNrIEV4Y2hhbmdlIENvZGUgUmV2aWV3IHdlYnNpdGUuXFxyXFxuICAgIC8vIFRoZSBvcmlnaW5hbCBjb2RlIGNhbiBiZSBmb3VuZCBhdFxcclxcbiAgICAvLyBodHRwOi8vY29kZXJldmlldy5zdGFja2V4Y2hhbmdlLmNvbS9xLzEzMzM4XFxyXFxuICAgIC8vIGFuZCB3YXMgZGVzaWduZWQgdG8gYmUgdXNlZCB3aXRoIHRoZSBTaXp6bGUgc2VsZWN0b3IgZW5naW5lLlxcclxcblxcclxcbiAgICB2YXIgJGVsID0gJChlbCk7XFxyXFxuICAgIHZhciBvdmVyZmxvd1ggPSBlbC5zdHlsZS5vdmVyZmxvd1g7XFxyXFxuICAgIHZhciBvdmVyZmxvd1kgPSBlbC5zdHlsZS5vdmVyZmxvd1k7XFxyXFxuXFxyXFxuICAgIC8vQ2hlY2sgYm90aCB4IGFuZCB5IGRlY2xhcmF0aW9uc1xcclxcbiAgICBpZiAob3ZlcmZsb3dYID09PSBvdmVyZmxvd1kgJiZcXHJcXG4gICAgICAgIChvdmVyZmxvd1kgPT09ICdoaWRkZW4nIHx8IG92ZXJmbG93WSA9PT0gJ3Zpc2libGUnKSkge1xcclxcbiAgICAgIHJldHVybiBmYWxzZTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAob3ZlcmZsb3dYID09PSAnc2Nyb2xsJyB8fCBvdmVyZmxvd1kgPT09ICdzY3JvbGwnKSB7XFxyXFxuICAgICAgcmV0dXJuIHRydWU7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuICgkZWwuaW5uZXJIZWlnaHQoKSA8IGVsLnNjcm9sbEhlaWdodCB8fFxcclxcbiAgICAgICRlbC5pbm5lcldpZHRoKCkgPCBlbC5zY3JvbGxXaWR0aCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgVXRpbHMuZXNjYXBlTWFya3VwID0gZnVuY3Rpb24gKG1hcmt1cCkge1xcclxcbiAgICB2YXIgcmVwbGFjZU1hcCA9IHtcXHJcXG4gICAgICAnXFxcXFxcXFwnOiAnJiM5MjsnLFxcclxcbiAgICAgICcmJzogJyZhbXA7JyxcXHJcXG4gICAgICAnPCc6ICcmbHQ7JyxcXHJcXG4gICAgICAnPic6ICcmZ3Q7JyxcXHJcXG4gICAgICAnXFxcIic6ICcmcXVvdDsnLFxcclxcbiAgICAgICdcXFxcJyc6ICcmIzM5OycsXFxyXFxuICAgICAgJy8nOiAnJiM0NzsnXFxyXFxuICAgIH07XFxyXFxuXFxyXFxuICAgIC8vIERvIG5vdCB0cnkgdG8gZXNjYXBlIHRoZSBtYXJrdXAgaWYgaXQncyBub3QgYSBzdHJpbmdcXHJcXG4gICAgaWYgKHR5cGVvZiBtYXJrdXAgIT09ICdzdHJpbmcnKSB7XFxyXFxuICAgICAgcmV0dXJuIG1hcmt1cDtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICByZXR1cm4gU3RyaW5nKG1hcmt1cCkucmVwbGFjZSgvWyY8PlxcXCInXFxcXC9cXFxcXFxcXF0vZywgZnVuY3Rpb24gKG1hdGNoKSB7XFxyXFxuICAgICAgcmV0dXJuIHJlcGxhY2VNYXBbbWF0Y2hdO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICAvLyBBcHBlbmQgYW4gYXJyYXkgb2YgalF1ZXJ5IG5vZGVzIHRvIGEgZ2l2ZW4gZWxlbWVudC5cXHJcXG4gIFV0aWxzLmFwcGVuZE1hbnkgPSBmdW5jdGlvbiAoJGVsZW1lbnQsICRub2Rlcykge1xcclxcbiAgICAvLyBqUXVlcnkgMS43LnggZG9lcyBub3Qgc3VwcG9ydCAkLmZuLmFwcGVuZCgpIHdpdGggYW4gYXJyYXlcXHJcXG4gICAgLy8gRmFsbCBiYWNrIHRvIGEgalF1ZXJ5IG9iamVjdCBjb2xsZWN0aW9uIHVzaW5nICQuZm4uYWRkKClcXHJcXG4gICAgaWYgKCQuZm4uanF1ZXJ5LnN1YnN0cigwLCAzKSA9PT0gJzEuNycpIHtcXHJcXG4gICAgICB2YXIgJGpxTm9kZXMgPSAkKCk7XFxyXFxuXFxyXFxuICAgICAgJC5tYXAoJG5vZGVzLCBmdW5jdGlvbiAobm9kZSkge1xcclxcbiAgICAgICAgJGpxTm9kZXMgPSAkanFOb2Rlcy5hZGQobm9kZSk7XFxyXFxuICAgICAgfSk7XFxyXFxuXFxyXFxuICAgICAgJG5vZGVzID0gJGpxTm9kZXM7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgJGVsZW1lbnQuYXBwZW5kKCRub2Rlcyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIFV0aWxzO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9yZXN1bHRzJyxbXFxyXFxuICAnanF1ZXJ5JyxcXHJcXG4gICcuL3V0aWxzJ1xcclxcbl0sIGZ1bmN0aW9uICgkLCBVdGlscykge1xcclxcbiAgZnVuY3Rpb24gUmVzdWx0cyAoJGVsZW1lbnQsIG9wdGlvbnMsIGRhdGFBZGFwdGVyKSB7XFxyXFxuICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcXHJcXG4gICAgdGhpcy5kYXRhID0gZGF0YUFkYXB0ZXI7XFxyXFxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XFxyXFxuXFxyXFxuICAgIFJlc3VsdHMuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBVdGlscy5FeHRlbmQoUmVzdWx0cywgVXRpbHMuT2JzZXJ2YWJsZSk7XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciAkcmVzdWx0cyA9ICQoXFxyXFxuICAgICAgJzx1bCBjbGFzcz1cXFwic2VsZWN0Mi1yZXN1bHRzX19vcHRpb25zXFxcIiByb2xlPVxcXCJ0cmVlXFxcIj48L3VsPidcXHJcXG4gICAgKTtcXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMub3B0aW9ucy5nZXQoJ211bHRpcGxlJykpIHtcXHJcXG4gICAgICAkcmVzdWx0cy5hdHRyKCdhcmlhLW11bHRpc2VsZWN0YWJsZScsICd0cnVlJyk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy4kcmVzdWx0cyA9ICRyZXN1bHRzO1xcclxcblxcclxcbiAgICByZXR1cm4gJHJlc3VsdHM7XFxyXFxuICB9O1xcclxcblxcclxcbiAgUmVzdWx0cy5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHRoaXMuJHJlc3VsdHMuZW1wdHkoKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5kaXNwbGF5TWVzc2FnZSA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgdmFyIGVzY2FwZU1hcmt1cCA9IHRoaXMub3B0aW9ucy5nZXQoJ2VzY2FwZU1hcmt1cCcpO1xcclxcblxcclxcbiAgICB0aGlzLmNsZWFyKCk7XFxyXFxuICAgIHRoaXMuaGlkZUxvYWRpbmcoKTtcXHJcXG5cXHJcXG4gICAgdmFyICRtZXNzYWdlID0gJChcXHJcXG4gICAgICAnPGxpIHJvbGU9XFxcInRyZWVpdGVtXFxcIiBhcmlhLWxpdmU9XFxcImFzc2VydGl2ZVxcXCInICtcXHJcXG4gICAgICAnIGNsYXNzPVxcXCJzZWxlY3QyLXJlc3VsdHNfX29wdGlvblxcXCI+PC9saT4nXFxyXFxuICAgICk7XFxyXFxuXFxyXFxuICAgIHZhciBtZXNzYWdlID0gdGhpcy5vcHRpb25zLmdldCgndHJhbnNsYXRpb25zJykuZ2V0KHBhcmFtcy5tZXNzYWdlKTtcXHJcXG5cXHJcXG4gICAgJG1lc3NhZ2UuYXBwZW5kKFxcclxcbiAgICAgIGVzY2FwZU1hcmt1cChcXHJcXG4gICAgICAgIG1lc3NhZ2UocGFyYW1zLmFyZ3MpXFxyXFxuICAgICAgKVxcclxcbiAgICApO1xcclxcblxcclxcbiAgICAkbWVzc2FnZVswXS5jbGFzc05hbWUgKz0gJyBzZWxlY3QyLXJlc3VsdHNfX21lc3NhZ2UnO1xcclxcblxcclxcbiAgICB0aGlzLiRyZXN1bHRzLmFwcGVuZCgkbWVzc2FnZSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgUmVzdWx0cy5wcm90b3R5cGUuaGlkZU1lc3NhZ2VzID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB0aGlzLiRyZXN1bHRzLmZpbmQoJy5zZWxlY3QyLXJlc3VsdHNfX21lc3NhZ2UnKS5yZW1vdmUoKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbiAoZGF0YSkge1xcclxcbiAgICB0aGlzLmhpZGVMb2FkaW5nKCk7XFxyXFxuXFxyXFxuICAgIHZhciAkb3B0aW9ucyA9IFtdO1xcclxcblxcclxcbiAgICBpZiAoZGF0YS5yZXN1bHRzID09IG51bGwgfHwgZGF0YS5yZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xcclxcbiAgICAgIGlmICh0aGlzLiRyZXN1bHRzLmNoaWxkcmVuKCkubGVuZ3RoID09PSAwKSB7XFxyXFxuICAgICAgICB0aGlzLnRyaWdnZXIoJ3Jlc3VsdHM6bWVzc2FnZScsIHtcXHJcXG4gICAgICAgICAgbWVzc2FnZTogJ25vUmVzdWx0cydcXHJcXG4gICAgICAgIH0pO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZGF0YS5yZXN1bHRzID0gdGhpcy5zb3J0KGRhdGEucmVzdWx0cyk7XFxyXFxuXFxyXFxuICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGF0YS5yZXN1bHRzLmxlbmd0aDsgZCsrKSB7XFxyXFxuICAgICAgdmFyIGl0ZW0gPSBkYXRhLnJlc3VsdHNbZF07XFxyXFxuXFxyXFxuICAgICAgdmFyICRvcHRpb24gPSB0aGlzLm9wdGlvbihpdGVtKTtcXHJcXG5cXHJcXG4gICAgICAkb3B0aW9ucy5wdXNoKCRvcHRpb24pO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMuJHJlc3VsdHMuYXBwZW5kKCRvcHRpb25zKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5wb3NpdGlvbiA9IGZ1bmN0aW9uICgkcmVzdWx0cywgJGRyb3Bkb3duKSB7XFxyXFxuICAgIHZhciAkcmVzdWx0c0NvbnRhaW5lciA9ICRkcm9wZG93bi5maW5kKCcuc2VsZWN0Mi1yZXN1bHRzJyk7XFxyXFxuICAgICRyZXN1bHRzQ29udGFpbmVyLmFwcGVuZCgkcmVzdWx0cyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgUmVzdWx0cy5wcm90b3R5cGUuc29ydCA9IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgIHZhciBzb3J0ZXIgPSB0aGlzLm9wdGlvbnMuZ2V0KCdzb3J0ZXInKTtcXHJcXG5cXHJcXG4gICAgcmV0dXJuIHNvcnRlcihkYXRhKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5oaWdobGlnaHRGaXJzdEl0ZW0gPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciAkb3B0aW9ucyA9IHRoaXMuJHJlc3VsdHNcXHJcXG4gICAgICAuZmluZCgnLnNlbGVjdDItcmVzdWx0c19fb3B0aW9uW2FyaWEtc2VsZWN0ZWRdJyk7XFxyXFxuXFxyXFxuICAgIHZhciAkc2VsZWN0ZWQgPSAkb3B0aW9ucy5maWx0ZXIoJ1thcmlhLXNlbGVjdGVkPXRydWVdJyk7XFxyXFxuXFxyXFxuICAgIC8vIENoZWNrIGlmIHRoZXJlIGFyZSBhbnkgc2VsZWN0ZWQgb3B0aW9uc1xcclxcbiAgICBpZiAoJHNlbGVjdGVkLmxlbmd0aCA+IDApIHtcXHJcXG4gICAgICAvLyBJZiB0aGVyZSBhcmUgc2VsZWN0ZWQgb3B0aW9ucywgaGlnaGxpZ2h0IHRoZSBmaXJzdFxcclxcbiAgICAgICRzZWxlY3RlZC5maXJzdCgpLnRyaWdnZXIoJ21vdXNlZW50ZXInKTtcXHJcXG4gICAgfSBlbHNlIHtcXHJcXG4gICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gc2VsZWN0ZWQgb3B0aW9ucywgaGlnaGxpZ2h0IHRoZSBmaXJzdCBvcHRpb25cXHJcXG4gICAgICAvLyBpbiB0aGUgZHJvcGRvd25cXHJcXG4gICAgICAkb3B0aW9ucy5maXJzdCgpLnRyaWdnZXIoJ21vdXNlZW50ZXInKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLmVuc3VyZUhpZ2hsaWdodFZpc2libGUoKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5zZXRDbGFzc2VzID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIHRoaXMuZGF0YS5jdXJyZW50KGZ1bmN0aW9uIChzZWxlY3RlZCkge1xcclxcbiAgICAgIHZhciBzZWxlY3RlZElkcyA9ICQubWFwKHNlbGVjdGVkLCBmdW5jdGlvbiAocykge1xcclxcbiAgICAgICAgcmV0dXJuIHMuaWQudG9TdHJpbmcoKTtcXHJcXG4gICAgICB9KTtcXHJcXG5cXHJcXG4gICAgICB2YXIgJG9wdGlvbnMgPSBzZWxmLiRyZXN1bHRzXFxyXFxuICAgICAgICAuZmluZCgnLnNlbGVjdDItcmVzdWx0c19fb3B0aW9uW2FyaWEtc2VsZWN0ZWRdJyk7XFxyXFxuXFxyXFxuICAgICAgJG9wdGlvbnMuZWFjaChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICB2YXIgJG9wdGlvbiA9ICQodGhpcyk7XFxyXFxuXFxyXFxuICAgICAgICB2YXIgaXRlbSA9ICQuZGF0YSh0aGlzLCAnZGF0YScpO1xcclxcblxcclxcbiAgICAgICAgLy8gaWQgbmVlZHMgdG8gYmUgY29udmVydGVkIHRvIGEgc3RyaW5nIHdoZW4gY29tcGFyaW5nXFxyXFxuICAgICAgICB2YXIgaWQgPSAnJyArIGl0ZW0uaWQ7XFxyXFxuXFxyXFxuICAgICAgICBpZiAoKGl0ZW0uZWxlbWVudCAhPSBudWxsICYmIGl0ZW0uZWxlbWVudC5zZWxlY3RlZCkgfHxcXHJcXG4gICAgICAgICAgICAoaXRlbS5lbGVtZW50ID09IG51bGwgJiYgJC5pbkFycmF5KGlkLCBzZWxlY3RlZElkcykgPiAtMSkpIHtcXHJcXG4gICAgICAgICAgJG9wdGlvbi5hdHRyKCdhcmlhLXNlbGVjdGVkJywgJ3RydWUnKTtcXHJcXG4gICAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICAgICRvcHRpb24uYXR0cignYXJpYS1zZWxlY3RlZCcsICdmYWxzZScpO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgIH0pO1xcclxcblxcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5zaG93TG9hZGluZyA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgdGhpcy5oaWRlTG9hZGluZygpO1xcclxcblxcclxcbiAgICB2YXIgbG9hZGluZ01vcmUgPSB0aGlzLm9wdGlvbnMuZ2V0KCd0cmFuc2xhdGlvbnMnKS5nZXQoJ3NlYXJjaGluZycpO1xcclxcblxcclxcbiAgICB2YXIgbG9hZGluZyA9IHtcXHJcXG4gICAgICBkaXNhYmxlZDogdHJ1ZSxcXHJcXG4gICAgICBsb2FkaW5nOiB0cnVlLFxcclxcbiAgICAgIHRleHQ6IGxvYWRpbmdNb3JlKHBhcmFtcylcXHJcXG4gICAgfTtcXHJcXG4gICAgdmFyICRsb2FkaW5nID0gdGhpcy5vcHRpb24obG9hZGluZyk7XFxyXFxuICAgICRsb2FkaW5nLmNsYXNzTmFtZSArPSAnIGxvYWRpbmctcmVzdWx0cyc7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHJlc3VsdHMucHJlcGVuZCgkbG9hZGluZyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgUmVzdWx0cy5wcm90b3R5cGUuaGlkZUxvYWRpbmcgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHRoaXMuJHJlc3VsdHMuZmluZCgnLmxvYWRpbmctcmVzdWx0cycpLnJlbW92ZSgpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFJlc3VsdHMucHJvdG90eXBlLm9wdGlvbiA9IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgIHZhciBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xcclxcbiAgICBvcHRpb24uY2xhc3NOYW1lID0gJ3NlbGVjdDItcmVzdWx0c19fb3B0aW9uJztcXHJcXG5cXHJcXG4gICAgdmFyIGF0dHJzID0ge1xcclxcbiAgICAgICdyb2xlJzogJ3RyZWVpdGVtJyxcXHJcXG4gICAgICAnYXJpYS1zZWxlY3RlZCc6ICdmYWxzZSdcXHJcXG4gICAgfTtcXHJcXG5cXHJcXG4gICAgaWYgKGRhdGEuZGlzYWJsZWQpIHtcXHJcXG4gICAgICBkZWxldGUgYXR0cnNbJ2FyaWEtc2VsZWN0ZWQnXTtcXHJcXG4gICAgICBhdHRyc1snYXJpYS1kaXNhYmxlZCddID0gJ3RydWUnO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChkYXRhLmlkID09IG51bGwpIHtcXHJcXG4gICAgICBkZWxldGUgYXR0cnNbJ2FyaWEtc2VsZWN0ZWQnXTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAoZGF0YS5fcmVzdWx0SWQgIT0gbnVsbCkge1xcclxcbiAgICAgIG9wdGlvbi5pZCA9IGRhdGEuX3Jlc3VsdElkO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChkYXRhLnRpdGxlKSB7XFxyXFxuICAgICAgb3B0aW9uLnRpdGxlID0gZGF0YS50aXRsZTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAoZGF0YS5jaGlsZHJlbikge1xcclxcbiAgICAgIGF0dHJzLnJvbGUgPSAnZ3JvdXAnO1xcclxcbiAgICAgIGF0dHJzWydhcmlhLWxhYmVsJ10gPSBkYXRhLnRleHQ7XFxyXFxuICAgICAgZGVsZXRlIGF0dHJzWydhcmlhLXNlbGVjdGVkJ107XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZm9yICh2YXIgYXR0ciBpbiBhdHRycykge1xcclxcbiAgICAgIHZhciB2YWwgPSBhdHRyc1thdHRyXTtcXHJcXG5cXHJcXG4gICAgICBvcHRpb24uc2V0QXR0cmlidXRlKGF0dHIsIHZhbCk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKGRhdGEuY2hpbGRyZW4pIHtcXHJcXG4gICAgICB2YXIgJG9wdGlvbiA9ICQob3B0aW9uKTtcXHJcXG5cXHJcXG4gICAgICB2YXIgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHJvbmcnKTtcXHJcXG4gICAgICBsYWJlbC5jbGFzc05hbWUgPSAnc2VsZWN0Mi1yZXN1bHRzX19ncm91cCc7XFxyXFxuXFxyXFxuICAgICAgdmFyICRsYWJlbCA9ICQobGFiZWwpO1xcclxcbiAgICAgIHRoaXMudGVtcGxhdGUoZGF0YSwgbGFiZWwpO1xcclxcblxcclxcbiAgICAgIHZhciAkY2hpbGRyZW4gPSBbXTtcXHJcXG5cXHJcXG4gICAgICBmb3IgKHZhciBjID0gMDsgYyA8IGRhdGEuY2hpbGRyZW4ubGVuZ3RoOyBjKyspIHtcXHJcXG4gICAgICAgIHZhciBjaGlsZCA9IGRhdGEuY2hpbGRyZW5bY107XFxyXFxuXFxyXFxuICAgICAgICB2YXIgJGNoaWxkID0gdGhpcy5vcHRpb24oY2hpbGQpO1xcclxcblxcclxcbiAgICAgICAgJGNoaWxkcmVuLnB1c2goJGNoaWxkKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgdmFyICRjaGlsZHJlbkNvbnRhaW5lciA9ICQoJzx1bD48L3VsPicsIHtcXHJcXG4gICAgICAgICdjbGFzcyc6ICdzZWxlY3QyLXJlc3VsdHNfX29wdGlvbnMgc2VsZWN0Mi1yZXN1bHRzX19vcHRpb25zLS1uZXN0ZWQnXFxyXFxuICAgICAgfSk7XFxyXFxuXFxyXFxuICAgICAgJGNoaWxkcmVuQ29udGFpbmVyLmFwcGVuZCgkY2hpbGRyZW4pO1xcclxcblxcclxcbiAgICAgICRvcHRpb24uYXBwZW5kKGxhYmVsKTtcXHJcXG4gICAgICAkb3B0aW9uLmFwcGVuZCgkY2hpbGRyZW5Db250YWluZXIpO1xcclxcbiAgICB9IGVsc2Uge1xcclxcbiAgICAgIHRoaXMudGVtcGxhdGUoZGF0YSwgb3B0aW9uKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICAkLmRhdGEob3B0aW9uLCAnZGF0YScsIGRhdGEpO1xcclxcblxcclxcbiAgICByZXR1cm4gb3B0aW9uO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFJlc3VsdHMucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgdmFyIGlkID0gY29udGFpbmVyLmlkICsgJy1yZXN1bHRzJztcXHJcXG5cXHJcXG4gICAgdGhpcy4kcmVzdWx0cy5hdHRyKCdpZCcsIGlkKTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdyZXN1bHRzOmFsbCcsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBzZWxmLmNsZWFyKCk7XFxyXFxuICAgICAgc2VsZi5hcHBlbmQocGFyYW1zLmRhdGEpO1xcclxcblxcclxcbiAgICAgIGlmIChjb250YWluZXIuaXNPcGVuKCkpIHtcXHJcXG4gICAgICAgIHNlbGYuc2V0Q2xhc3NlcygpO1xcclxcbiAgICAgICAgc2VsZi5oaWdobGlnaHRGaXJzdEl0ZW0oKTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6YXBwZW5kJywgZnVuY3Rpb24gKHBhcmFtcykge1xcclxcbiAgICAgIHNlbGYuYXBwZW5kKHBhcmFtcy5kYXRhKTtcXHJcXG5cXHJcXG4gICAgICBpZiAoY29udGFpbmVyLmlzT3BlbigpKSB7XFxyXFxuICAgICAgICBzZWxmLnNldENsYXNzZXMoKTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3F1ZXJ5JywgZnVuY3Rpb24gKHBhcmFtcykge1xcclxcbiAgICAgIHNlbGYuaGlkZU1lc3NhZ2VzKCk7XFxyXFxuICAgICAgc2VsZi5zaG93TG9hZGluZyhwYXJhbXMpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdzZWxlY3QnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgaWYgKCFjb250YWluZXIuaXNPcGVuKCkpIHtcXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgc2VsZi5zZXRDbGFzc2VzKCk7XFxyXFxuICAgICAgc2VsZi5oaWdobGlnaHRGaXJzdEl0ZW0oKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbigndW5zZWxlY3QnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgaWYgKCFjb250YWluZXIuaXNPcGVuKCkpIHtcXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgc2VsZi5zZXRDbGFzc2VzKCk7XFxyXFxuICAgICAgc2VsZi5oaWdobGlnaHRGaXJzdEl0ZW0oKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignb3BlbicsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAvLyBXaGVuIHRoZSBkcm9wZG93biBpcyBvcGVuLCBhcmlhLWV4cGVuZGVkPVxcXCJ0cnVlXFxcIlxcclxcbiAgICAgIHNlbGYuJHJlc3VsdHMuYXR0cignYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XFxyXFxuICAgICAgc2VsZi4kcmVzdWx0cy5hdHRyKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xcclxcblxcclxcbiAgICAgIHNlbGYuc2V0Q2xhc3NlcygpO1xcclxcbiAgICAgIHNlbGYuZW5zdXJlSGlnaGxpZ2h0VmlzaWJsZSgpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdjbG9zZScsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAvLyBXaGVuIHRoZSBkcm9wZG93biBpcyBjbG9zZWQsIGFyaWEtZXhwZW5kZWQ9XFxcImZhbHNlXFxcIlxcclxcbiAgICAgIHNlbGYuJHJlc3VsdHMuYXR0cignYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xcclxcbiAgICAgIHNlbGYuJHJlc3VsdHMuYXR0cignYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xcclxcbiAgICAgIHNlbGYuJHJlc3VsdHMucmVtb3ZlQXR0cignYXJpYS1hY3RpdmVkZXNjZW5kYW50Jyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6dG9nZ2xlJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHZhciAkaGlnaGxpZ2h0ZWQgPSBzZWxmLmdldEhpZ2hsaWdodGVkUmVzdWx0cygpO1xcclxcblxcclxcbiAgICAgIGlmICgkaGlnaGxpZ2h0ZWQubGVuZ3RoID09PSAwKSB7XFxyXFxuICAgICAgICByZXR1cm47XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgICRoaWdobGlnaHRlZC50cmlnZ2VyKCdtb3VzZXVwJyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6c2VsZWN0JywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHZhciAkaGlnaGxpZ2h0ZWQgPSBzZWxmLmdldEhpZ2hsaWdodGVkUmVzdWx0cygpO1xcclxcblxcclxcbiAgICAgIGlmICgkaGlnaGxpZ2h0ZWQubGVuZ3RoID09PSAwKSB7XFxyXFxuICAgICAgICByZXR1cm47XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHZhciBkYXRhID0gJGhpZ2hsaWdodGVkLmRhdGEoJ2RhdGEnKTtcXHJcXG5cXHJcXG4gICAgICBpZiAoJGhpZ2hsaWdodGVkLmF0dHIoJ2FyaWEtc2VsZWN0ZWQnKSA9PSAndHJ1ZScpIHtcXHJcXG4gICAgICAgIHNlbGYudHJpZ2dlcignY2xvc2UnLCB7fSk7XFxyXFxuICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgIHNlbGYudHJpZ2dlcignc2VsZWN0Jywge1xcclxcbiAgICAgICAgICBkYXRhOiBkYXRhXFxyXFxuICAgICAgICB9KTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6cHJldmlvdXMnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgdmFyICRoaWdobGlnaHRlZCA9IHNlbGYuZ2V0SGlnaGxpZ2h0ZWRSZXN1bHRzKCk7XFxyXFxuXFxyXFxuICAgICAgdmFyICRvcHRpb25zID0gc2VsZi4kcmVzdWx0cy5maW5kKCdbYXJpYS1zZWxlY3RlZF0nKTtcXHJcXG5cXHJcXG4gICAgICB2YXIgY3VycmVudEluZGV4ID0gJG9wdGlvbnMuaW5kZXgoJGhpZ2hsaWdodGVkKTtcXHJcXG5cXHJcXG4gICAgICAvLyBJZiB3ZSBhcmUgYWxyZWFkeSBhdCB0ZSB0b3AsIGRvbid0IG1vdmUgZnVydGhlclxcclxcbiAgICAgIGlmIChjdXJyZW50SW5kZXggPT09IDApIHtcXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgdmFyIG5leHRJbmRleCA9IGN1cnJlbnRJbmRleCAtIDE7XFxyXFxuXFxyXFxuICAgICAgLy8gSWYgbm9uZSBhcmUgaGlnaGxpZ2h0ZWQsIGhpZ2hsaWdodCB0aGUgZmlyc3RcXHJcXG4gICAgICBpZiAoJGhpZ2hsaWdodGVkLmxlbmd0aCA9PT0gMCkge1xcclxcbiAgICAgICAgbmV4dEluZGV4ID0gMDtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgdmFyICRuZXh0ID0gJG9wdGlvbnMuZXEobmV4dEluZGV4KTtcXHJcXG5cXHJcXG4gICAgICAkbmV4dC50cmlnZ2VyKCdtb3VzZWVudGVyJyk7XFxyXFxuXFxyXFxuICAgICAgdmFyIGN1cnJlbnRPZmZzZXQgPSBzZWxmLiRyZXN1bHRzLm9mZnNldCgpLnRvcDtcXHJcXG4gICAgICB2YXIgbmV4dFRvcCA9ICRuZXh0Lm9mZnNldCgpLnRvcDtcXHJcXG4gICAgICB2YXIgbmV4dE9mZnNldCA9IHNlbGYuJHJlc3VsdHMuc2Nyb2xsVG9wKCkgKyAobmV4dFRvcCAtIGN1cnJlbnRPZmZzZXQpO1xcclxcblxcclxcbiAgICAgIGlmIChuZXh0SW5kZXggPT09IDApIHtcXHJcXG4gICAgICAgIHNlbGYuJHJlc3VsdHMuc2Nyb2xsVG9wKDApO1xcclxcbiAgICAgIH0gZWxzZSBpZiAobmV4dFRvcCAtIGN1cnJlbnRPZmZzZXQgPCAwKSB7XFxyXFxuICAgICAgICBzZWxmLiRyZXN1bHRzLnNjcm9sbFRvcChuZXh0T2Zmc2V0KTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6bmV4dCcsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICB2YXIgJGhpZ2hsaWdodGVkID0gc2VsZi5nZXRIaWdobGlnaHRlZFJlc3VsdHMoKTtcXHJcXG5cXHJcXG4gICAgICB2YXIgJG9wdGlvbnMgPSBzZWxmLiRyZXN1bHRzLmZpbmQoJ1thcmlhLXNlbGVjdGVkXScpO1xcclxcblxcclxcbiAgICAgIHZhciBjdXJyZW50SW5kZXggPSAkb3B0aW9ucy5pbmRleCgkaGlnaGxpZ2h0ZWQpO1xcclxcblxcclxcbiAgICAgIHZhciBuZXh0SW5kZXggPSBjdXJyZW50SW5kZXggKyAxO1xcclxcblxcclxcbiAgICAgIC8vIElmIHdlIGFyZSBhdCB0aGUgbGFzdCBvcHRpb24sIHN0YXkgdGhlcmVcXHJcXG4gICAgICBpZiAobmV4dEluZGV4ID49ICRvcHRpb25zLmxlbmd0aCkge1xcclxcbiAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICB2YXIgJG5leHQgPSAkb3B0aW9ucy5lcShuZXh0SW5kZXgpO1xcclxcblxcclxcbiAgICAgICRuZXh0LnRyaWdnZXIoJ21vdXNlZW50ZXInKTtcXHJcXG5cXHJcXG4gICAgICB2YXIgY3VycmVudE9mZnNldCA9IHNlbGYuJHJlc3VsdHMub2Zmc2V0KCkudG9wICtcXHJcXG4gICAgICAgIHNlbGYuJHJlc3VsdHMub3V0ZXJIZWlnaHQoZmFsc2UpO1xcclxcbiAgICAgIHZhciBuZXh0Qm90dG9tID0gJG5leHQub2Zmc2V0KCkudG9wICsgJG5leHQub3V0ZXJIZWlnaHQoZmFsc2UpO1xcclxcbiAgICAgIHZhciBuZXh0T2Zmc2V0ID0gc2VsZi4kcmVzdWx0cy5zY3JvbGxUb3AoKSArIG5leHRCb3R0b20gLSBjdXJyZW50T2Zmc2V0O1xcclxcblxcclxcbiAgICAgIGlmIChuZXh0SW5kZXggPT09IDApIHtcXHJcXG4gICAgICAgIHNlbGYuJHJlc3VsdHMuc2Nyb2xsVG9wKDApO1xcclxcbiAgICAgIH0gZWxzZSBpZiAobmV4dEJvdHRvbSA+IGN1cnJlbnRPZmZzZXQpIHtcXHJcXG4gICAgICAgIHNlbGYuJHJlc3VsdHMuc2Nyb2xsVG9wKG5leHRPZmZzZXQpO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbigncmVzdWx0czpmb2N1cycsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBwYXJhbXMuZWxlbWVudC5hZGRDbGFzcygnc2VsZWN0Mi1yZXN1bHRzX19vcHRpb24tLWhpZ2hsaWdodGVkJyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6bWVzc2FnZScsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBzZWxmLmRpc3BsYXlNZXNzYWdlKHBhcmFtcyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBpZiAoJC5mbi5tb3VzZXdoZWVsKSB7XFxyXFxuICAgICAgdGhpcy4kcmVzdWx0cy5vbignbW91c2V3aGVlbCcsIGZ1bmN0aW9uIChlKSB7XFxyXFxuICAgICAgICB2YXIgdG9wID0gc2VsZi4kcmVzdWx0cy5zY3JvbGxUb3AoKTtcXHJcXG5cXHJcXG4gICAgICAgIHZhciBib3R0b20gPSBzZWxmLiRyZXN1bHRzLmdldCgwKS5zY3JvbGxIZWlnaHQgLSB0b3AgKyBlLmRlbHRhWTtcXHJcXG5cXHJcXG4gICAgICAgIHZhciBpc0F0VG9wID0gZS5kZWx0YVkgPiAwICYmIHRvcCAtIGUuZGVsdGFZIDw9IDA7XFxyXFxuICAgICAgICB2YXIgaXNBdEJvdHRvbSA9IGUuZGVsdGFZIDwgMCAmJiBib3R0b20gPD0gc2VsZi4kcmVzdWx0cy5oZWlnaHQoKTtcXHJcXG5cXHJcXG4gICAgICAgIGlmIChpc0F0VG9wKSB7XFxyXFxuICAgICAgICAgIHNlbGYuJHJlc3VsdHMuc2Nyb2xsVG9wKDApO1xcclxcblxcclxcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XFxyXFxuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XFxyXFxuICAgICAgICB9IGVsc2UgaWYgKGlzQXRCb3R0b20pIHtcXHJcXG4gICAgICAgICAgc2VsZi4kcmVzdWx0cy5zY3JvbGxUb3AoXFxyXFxuICAgICAgICAgICAgc2VsZi4kcmVzdWx0cy5nZXQoMCkuc2Nyb2xsSGVpZ2h0IC0gc2VsZi4kcmVzdWx0cy5oZWlnaHQoKVxcclxcbiAgICAgICAgICApO1xcclxcblxcclxcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XFxyXFxuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy4kcmVzdWx0cy5vbignbW91c2V1cCcsICcuc2VsZWN0Mi1yZXN1bHRzX19vcHRpb25bYXJpYS1zZWxlY3RlZF0nLFxcclxcbiAgICAgIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xcclxcblxcclxcbiAgICAgIHZhciBkYXRhID0gJHRoaXMuZGF0YSgnZGF0YScpO1xcclxcblxcclxcbiAgICAgIGlmICgkdGhpcy5hdHRyKCdhcmlhLXNlbGVjdGVkJykgPT09ICd0cnVlJykge1xcclxcbiAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5nZXQoJ211bHRpcGxlJykpIHtcXHJcXG4gICAgICAgICAgc2VsZi50cmlnZ2VyKCd1bnNlbGVjdCcsIHtcXHJcXG4gICAgICAgICAgICBvcmlnaW5hbEV2ZW50OiBldnQsXFxyXFxuICAgICAgICAgICAgZGF0YTogZGF0YVxcclxcbiAgICAgICAgICB9KTtcXHJcXG4gICAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICAgIHNlbGYudHJpZ2dlcignY2xvc2UnLCB7fSk7XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICByZXR1cm47XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHNlbGYudHJpZ2dlcignc2VsZWN0Jywge1xcclxcbiAgICAgICAgb3JpZ2luYWxFdmVudDogZXZ0LFxcclxcbiAgICAgICAgZGF0YTogZGF0YVxcclxcbiAgICAgIH0pO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kcmVzdWx0cy5vbignbW91c2VlbnRlcicsICcuc2VsZWN0Mi1yZXN1bHRzX19vcHRpb25bYXJpYS1zZWxlY3RlZF0nLFxcclxcbiAgICAgIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICB2YXIgZGF0YSA9ICQodGhpcykuZGF0YSgnZGF0YScpO1xcclxcblxcclxcbiAgICAgIHNlbGYuZ2V0SGlnaGxpZ2h0ZWRSZXN1bHRzKClcXHJcXG4gICAgICAgICAgLnJlbW92ZUNsYXNzKCdzZWxlY3QyLXJlc3VsdHNfX29wdGlvbi0taGlnaGxpZ2h0ZWQnKTtcXHJcXG5cXHJcXG4gICAgICBzZWxmLnRyaWdnZXIoJ3Jlc3VsdHM6Zm9jdXMnLCB7XFxyXFxuICAgICAgICBkYXRhOiBkYXRhLFxcclxcbiAgICAgICAgZWxlbWVudDogJCh0aGlzKVxcclxcbiAgICAgIH0pO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5nZXRIaWdobGlnaHRlZFJlc3VsdHMgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciAkaGlnaGxpZ2h0ZWQgPSB0aGlzLiRyZXN1bHRzXFxyXFxuICAgIC5maW5kKCcuc2VsZWN0Mi1yZXN1bHRzX19vcHRpb24tLWhpZ2hsaWdodGVkJyk7XFxyXFxuXFxyXFxuICAgIHJldHVybiAkaGlnaGxpZ2h0ZWQ7XFxyXFxuICB9O1xcclxcblxcclxcbiAgUmVzdWx0cy5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdGhpcy4kcmVzdWx0cy5yZW1vdmUoKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBSZXN1bHRzLnByb3RvdHlwZS5lbnN1cmVIaWdobGlnaHRWaXNpYmxlID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgJGhpZ2hsaWdodGVkID0gdGhpcy5nZXRIaWdobGlnaHRlZFJlc3VsdHMoKTtcXHJcXG5cXHJcXG4gICAgaWYgKCRoaWdobGlnaHRlZC5sZW5ndGggPT09IDApIHtcXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyICRvcHRpb25zID0gdGhpcy4kcmVzdWx0cy5maW5kKCdbYXJpYS1zZWxlY3RlZF0nKTtcXHJcXG5cXHJcXG4gICAgdmFyIGN1cnJlbnRJbmRleCA9ICRvcHRpb25zLmluZGV4KCRoaWdobGlnaHRlZCk7XFxyXFxuXFxyXFxuICAgIHZhciBjdXJyZW50T2Zmc2V0ID0gdGhpcy4kcmVzdWx0cy5vZmZzZXQoKS50b3A7XFxyXFxuICAgIHZhciBuZXh0VG9wID0gJGhpZ2hsaWdodGVkLm9mZnNldCgpLnRvcDtcXHJcXG4gICAgdmFyIG5leHRPZmZzZXQgPSB0aGlzLiRyZXN1bHRzLnNjcm9sbFRvcCgpICsgKG5leHRUb3AgLSBjdXJyZW50T2Zmc2V0KTtcXHJcXG5cXHJcXG4gICAgdmFyIG9mZnNldERlbHRhID0gbmV4dFRvcCAtIGN1cnJlbnRPZmZzZXQ7XFxyXFxuICAgIG5leHRPZmZzZXQgLT0gJGhpZ2hsaWdodGVkLm91dGVySGVpZ2h0KGZhbHNlKSAqIDI7XFxyXFxuXFxyXFxuICAgIGlmIChjdXJyZW50SW5kZXggPD0gMikge1xcclxcbiAgICAgIHRoaXMuJHJlc3VsdHMuc2Nyb2xsVG9wKDApO1xcclxcbiAgICB9IGVsc2UgaWYgKG9mZnNldERlbHRhID4gdGhpcy4kcmVzdWx0cy5vdXRlckhlaWdodCgpIHx8IG9mZnNldERlbHRhIDwgMCkge1xcclxcbiAgICAgIHRoaXMuJHJlc3VsdHMuc2Nyb2xsVG9wKG5leHRPZmZzZXQpO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgUmVzdWx0cy5wcm90b3R5cGUudGVtcGxhdGUgPSBmdW5jdGlvbiAocmVzdWx0LCBjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHRlbXBsYXRlID0gdGhpcy5vcHRpb25zLmdldCgndGVtcGxhdGVSZXN1bHQnKTtcXHJcXG4gICAgdmFyIGVzY2FwZU1hcmt1cCA9IHRoaXMub3B0aW9ucy5nZXQoJ2VzY2FwZU1hcmt1cCcpO1xcclxcblxcclxcbiAgICB2YXIgY29udGVudCA9IHRlbXBsYXRlKHJlc3VsdCwgY29udGFpbmVyKTtcXHJcXG5cXHJcXG4gICAgaWYgKGNvbnRlbnQgPT0gbnVsbCkge1xcclxcbiAgICAgIGNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xcclxcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykge1xcclxcbiAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSBlc2NhcGVNYXJrdXAoY29udGVudCk7XFxyXFxuICAgIH0gZWxzZSB7XFxyXFxuICAgICAgJChjb250YWluZXIpLmFwcGVuZChjb250ZW50KTtcXHJcXG4gICAgfVxcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBSZXN1bHRzO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9rZXlzJyxbXFxyXFxuXFxyXFxuXSwgZnVuY3Rpb24gKCkge1xcclxcbiAgdmFyIEtFWVMgPSB7XFxyXFxuICAgIEJBQ0tTUEFDRTogOCxcXHJcXG4gICAgVEFCOiA5LFxcclxcbiAgICBFTlRFUjogMTMsXFxyXFxuICAgIFNISUZUOiAxNixcXHJcXG4gICAgQ1RSTDogMTcsXFxyXFxuICAgIEFMVDogMTgsXFxyXFxuICAgIEVTQzogMjcsXFxyXFxuICAgIFNQQUNFOiAzMixcXHJcXG4gICAgUEFHRV9VUDogMzMsXFxyXFxuICAgIFBBR0VfRE9XTjogMzQsXFxyXFxuICAgIEVORDogMzUsXFxyXFxuICAgIEhPTUU6IDM2LFxcclxcbiAgICBMRUZUOiAzNyxcXHJcXG4gICAgVVA6IDM4LFxcclxcbiAgICBSSUdIVDogMzksXFxyXFxuICAgIERPV046IDQwLFxcclxcbiAgICBERUxFVEU6IDQ2XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIEtFWVM7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL3NlbGVjdGlvbi9iYXNlJyxbXFxyXFxuICAnanF1ZXJ5JyxcXHJcXG4gICcuLi91dGlscycsXFxyXFxuICAnLi4va2V5cydcXHJcXG5dLCBmdW5jdGlvbiAoJCwgVXRpbHMsIEtFWVMpIHtcXHJcXG4gIGZ1bmN0aW9uIEJhc2VTZWxlY3Rpb24gKCRlbGVtZW50LCBvcHRpb25zKSB7XFxyXFxuICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcXHJcXG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcXHJcXG5cXHJcXG4gICAgQmFzZVNlbGVjdGlvbi5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIFV0aWxzLkV4dGVuZChCYXNlU2VsZWN0aW9uLCBVdGlscy5PYnNlcnZhYmxlKTtcXHJcXG5cXHJcXG4gIEJhc2VTZWxlY3Rpb24ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdmFyICRzZWxlY3Rpb24gPSAkKFxcclxcbiAgICAgICc8c3BhbiBjbGFzcz1cXFwic2VsZWN0Mi1zZWxlY3Rpb25cXFwiIHJvbGU9XFxcImNvbWJvYm94XFxcIiAnICtcXHJcXG4gICAgICAnIGFyaWEtaGFzcG9wdXA9XFxcInRydWVcXFwiIGFyaWEtZXhwYW5kZWQ9XFxcImZhbHNlXFxcIj4nICtcXHJcXG4gICAgICAnPC9zcGFuPidcXHJcXG4gICAgKTtcXHJcXG5cXHJcXG4gICAgdGhpcy5fdGFiaW5kZXggPSAwO1xcclxcblxcclxcbiAgICBpZiAodGhpcy4kZWxlbWVudC5kYXRhKCdvbGQtdGFiaW5kZXgnKSAhPSBudWxsKSB7XFxyXFxuICAgICAgdGhpcy5fdGFiaW5kZXggPSB0aGlzLiRlbGVtZW50LmRhdGEoJ29sZC10YWJpbmRleCcpO1xcclxcbiAgICB9IGVsc2UgaWYgKHRoaXMuJGVsZW1lbnQuYXR0cigndGFiaW5kZXgnKSAhPSBudWxsKSB7XFxyXFxuICAgICAgdGhpcy5fdGFiaW5kZXggPSB0aGlzLiRlbGVtZW50LmF0dHIoJ3RhYmluZGV4Jyk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgJHNlbGVjdGlvbi5hdHRyKCd0aXRsZScsIHRoaXMuJGVsZW1lbnQuYXR0cigndGl0bGUnKSk7XFxyXFxuICAgICRzZWxlY3Rpb24uYXR0cigndGFiaW5kZXgnLCB0aGlzLl90YWJpbmRleCk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbiA9ICRzZWxlY3Rpb247XFxyXFxuXFxyXFxuICAgIHJldHVybiAkc2VsZWN0aW9uO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEJhc2VTZWxlY3Rpb24ucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgdmFyIGlkID0gY29udGFpbmVyLmlkICsgJy1jb250YWluZXInO1xcclxcbiAgICB2YXIgcmVzdWx0c0lkID0gY29udGFpbmVyLmlkICsgJy1yZXN1bHRzJztcXHJcXG5cXHJcXG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5vbignZm9jdXMnLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgc2VsZi50cmlnZ2VyKCdmb2N1cycsIGV2dCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ2JsdXInLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgc2VsZi5faGFuZGxlQmx1cihldnQpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kc2VsZWN0aW9uLm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIHNlbGYudHJpZ2dlcigna2V5cHJlc3MnLCBldnQpO1xcclxcblxcclxcbiAgICAgIGlmIChldnQud2hpY2ggPT09IEtFWVMuU1BBQ0UpIHtcXHJcXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbigncmVzdWx0czpmb2N1cycsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBzZWxmLiRzZWxlY3Rpb24uYXR0cignYXJpYS1hY3RpdmVkZXNjZW5kYW50JywgcGFyYW1zLmRhdGEuX3Jlc3VsdElkKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignc2VsZWN0aW9uOnVwZGF0ZScsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBzZWxmLnVwZGF0ZShwYXJhbXMuZGF0YSk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ29wZW4nLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgLy8gV2hlbiB0aGUgZHJvcGRvd24gaXMgb3BlbiwgYXJpYS1leHBhbmRlZD1cXFwidHJ1ZVxcXCJcXHJcXG4gICAgICBzZWxmLiRzZWxlY3Rpb24uYXR0cignYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XFxyXFxuICAgICAgc2VsZi4kc2VsZWN0aW9uLmF0dHIoJ2FyaWEtb3ducycsIHJlc3VsdHNJZCk7XFxyXFxuXFxyXFxuICAgICAgc2VsZi5fYXR0YWNoQ2xvc2VIYW5kbGVyKGNvbnRhaW5lcik7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ2Nsb3NlJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIC8vIFdoZW4gdGhlIGRyb3Bkb3duIGlzIGNsb3NlZCwgYXJpYS1leHBhbmRlZD1cXFwiZmFsc2VcXFwiXFxyXFxuICAgICAgc2VsZi4kc2VsZWN0aW9uLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcXHJcXG4gICAgICBzZWxmLiRzZWxlY3Rpb24ucmVtb3ZlQXR0cignYXJpYS1hY3RpdmVkZXNjZW5kYW50Jyk7XFxyXFxuICAgICAgc2VsZi4kc2VsZWN0aW9uLnJlbW92ZUF0dHIoJ2FyaWEtb3ducycpO1xcclxcblxcclxcbiAgICAgIHNlbGYuJHNlbGVjdGlvbi5mb2N1cygpO1xcclxcblxcclxcbiAgICAgIHNlbGYuX2RldGFjaENsb3NlSGFuZGxlcihjb250YWluZXIpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdlbmFibGUnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi4kc2VsZWN0aW9uLmF0dHIoJ3RhYmluZGV4Jywgc2VsZi5fdGFiaW5kZXgpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdkaXNhYmxlJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHNlbGYuJHNlbGVjdGlvbi5hdHRyKCd0YWJpbmRleCcsICctMScpO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBCYXNlU2VsZWN0aW9uLnByb3RvdHlwZS5faGFuZGxlQmx1ciA9IGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICAvLyBUaGlzIG5lZWRzIHRvIGJlIGRlbGF5ZWQgYXMgdGhlIGFjdGl2ZSBlbGVtZW50IGlzIHRoZSBib2R5IHdoZW4gdGhlIHRhYlxcclxcbiAgICAvLyBrZXkgaXMgcHJlc3NlZCwgcG9zc2libHkgYWxvbmcgd2l0aCBvdGhlcnMuXFxyXFxuICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAvLyBEb24ndCB0cmlnZ2VyIGBibHVyYCBpZiB0aGUgZm9jdXMgaXMgc3RpbGwgaW4gdGhlIHNlbGVjdGlvblxcclxcbiAgICAgIGlmIChcXHJcXG4gICAgICAgIChkb2N1bWVudC5hY3RpdmVFbGVtZW50ID09IHNlbGYuJHNlbGVjdGlvblswXSkgfHxcXHJcXG4gICAgICAgICgkLmNvbnRhaW5zKHNlbGYuJHNlbGVjdGlvblswXSwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpXFxyXFxuICAgICAgKSB7XFxyXFxuICAgICAgICByZXR1cm47XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHNlbGYudHJpZ2dlcignYmx1cicsIGV2dCk7XFxyXFxuICAgIH0sIDEpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEJhc2VTZWxlY3Rpb24ucHJvdG90eXBlLl9hdHRhY2hDbG9zZUhhbmRsZXIgPSBmdW5jdGlvbiAoY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgJChkb2N1bWVudC5ib2R5KS5vbignbW91c2Vkb3duLnNlbGVjdDIuJyArIGNvbnRhaW5lci5pZCwgZnVuY3Rpb24gKGUpIHtcXHJcXG4gICAgICB2YXIgJHRhcmdldCA9ICQoZS50YXJnZXQpO1xcclxcblxcclxcbiAgICAgIHZhciAkc2VsZWN0ID0gJHRhcmdldC5jbG9zZXN0KCcuc2VsZWN0MicpO1xcclxcblxcclxcbiAgICAgIHZhciAkYWxsID0gJCgnLnNlbGVjdDIuc2VsZWN0Mi1jb250YWluZXItLW9wZW4nKTtcXHJcXG5cXHJcXG4gICAgICAkYWxsLmVhY2goZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcXHJcXG5cXHJcXG4gICAgICAgIGlmICh0aGlzID09ICRzZWxlY3RbMF0pIHtcXHJcXG4gICAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgdmFyICRlbGVtZW50ID0gJHRoaXMuZGF0YSgnZWxlbWVudCcpO1xcclxcblxcclxcbiAgICAgICAgJGVsZW1lbnQuc2VsZWN0MignY2xvc2UnKTtcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQmFzZVNlbGVjdGlvbi5wcm90b3R5cGUuX2RldGFjaENsb3NlSGFuZGxlciA9IGZ1bmN0aW9uIChjb250YWluZXIpIHtcXHJcXG4gICAgJChkb2N1bWVudC5ib2R5KS5vZmYoJ21vdXNlZG93bi5zZWxlY3QyLicgKyBjb250YWluZXIuaWQpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEJhc2VTZWxlY3Rpb24ucHJvdG90eXBlLnBvc2l0aW9uID0gZnVuY3Rpb24gKCRzZWxlY3Rpb24sICRjb250YWluZXIpIHtcXHJcXG4gICAgdmFyICRzZWxlY3Rpb25Db250YWluZXIgPSAkY29udGFpbmVyLmZpbmQoJy5zZWxlY3Rpb24nKTtcXHJcXG4gICAgJHNlbGVjdGlvbkNvbnRhaW5lci5hcHBlbmQoJHNlbGVjdGlvbik7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQmFzZVNlbGVjdGlvbi5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdGhpcy5fZGV0YWNoQ2xvc2VIYW5kbGVyKHRoaXMuY29udGFpbmVyKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBCYXNlU2VsZWN0aW9uLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZGF0YSkge1xcclxcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBgdXBkYXRlYCBtZXRob2QgbXVzdCBiZSBkZWZpbmVkIGluIGNoaWxkIGNsYXNzZXMuJyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIEJhc2VTZWxlY3Rpb247XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL3NlbGVjdGlvbi9zaW5nbGUnLFtcXHJcXG4gICdqcXVlcnknLFxcclxcbiAgJy4vYmFzZScsXFxyXFxuICAnLi4vdXRpbHMnLFxcclxcbiAgJy4uL2tleXMnXFxyXFxuXSwgZnVuY3Rpb24gKCQsIEJhc2VTZWxlY3Rpb24sIFV0aWxzLCBLRVlTKSB7XFxyXFxuICBmdW5jdGlvbiBTaW5nbGVTZWxlY3Rpb24gKCkge1xcclxcbiAgICBTaW5nbGVTZWxlY3Rpb24uX19zdXBlcl9fLmNvbnN0cnVjdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBVdGlscy5FeHRlbmQoU2luZ2xlU2VsZWN0aW9uLCBCYXNlU2VsZWN0aW9uKTtcXHJcXG5cXHJcXG4gIFNpbmdsZVNlbGVjdGlvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgJHNlbGVjdGlvbiA9IFNpbmdsZVNlbGVjdGlvbi5fX3N1cGVyX18ucmVuZGVyLmNhbGwodGhpcyk7XFxyXFxuXFxyXFxuICAgICRzZWxlY3Rpb24uYWRkQ2xhc3MoJ3NlbGVjdDItc2VsZWN0aW9uLS1zaW5nbGUnKTtcXHJcXG5cXHJcXG4gICAgJHNlbGVjdGlvbi5odG1sKFxcclxcbiAgICAgICc8c3BhbiBjbGFzcz1cXFwic2VsZWN0Mi1zZWxlY3Rpb25fX3JlbmRlcmVkXFxcIj48L3NwYW4+JyArXFxyXFxuICAgICAgJzxzcGFuIGNsYXNzPVxcXCJzZWxlY3QyLXNlbGVjdGlvbl9fYXJyb3dcXFwiIHJvbGU9XFxcInByZXNlbnRhdGlvblxcXCI+JyArXFxyXFxuICAgICAgICAnPGIgcm9sZT1cXFwicHJlc2VudGF0aW9uXFxcIj48L2I+JyArXFxyXFxuICAgICAgJzwvc3Bhbj4nXFxyXFxuICAgICk7XFxyXFxuXFxyXFxuICAgIHJldHVybiAkc2VsZWN0aW9uO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNpbmdsZVNlbGVjdGlvbi5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChjb250YWluZXIsICRjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICBTaW5nbGVTZWxlY3Rpb24uX19zdXBlcl9fLmJpbmQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcXHJcXG5cXHJcXG4gICAgdmFyIGlkID0gY29udGFpbmVyLmlkICsgJy1jb250YWluZXInO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24uZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uX19yZW5kZXJlZCcpLmF0dHIoJ2lkJywgaWQpO1xcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24uYXR0cignYXJpYS1sYWJlbGxlZGJ5JywgaWQpO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ21vdXNlZG93bicsIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICAvLyBPbmx5IHJlc3BvbmQgdG8gbGVmdCBjbGlja3NcXHJcXG4gICAgICBpZiAoZXZ0LndoaWNoICE9PSAxKSB7XFxyXFxuICAgICAgICByZXR1cm47XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHNlbGYudHJpZ2dlcigndG9nZ2xlJywge1xcclxcbiAgICAgICAgb3JpZ2luYWxFdmVudDogZXZ0XFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ2ZvY3VzJywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIC8vIFVzZXIgZm9jdXNlcyBvbiB0aGUgY29udGFpbmVyXFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ2JsdXInLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgLy8gVXNlciBleGl0cyB0aGUgY29udGFpbmVyXFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ2ZvY3VzJywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIGlmICghY29udGFpbmVyLmlzT3BlbigpKSB7XFxyXFxuICAgICAgICBzZWxmLiRzZWxlY3Rpb24uZm9jdXMoKTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3NlbGVjdGlvbjp1cGRhdGUnLCBmdW5jdGlvbiAocGFyYW1zKSB7XFxyXFxuICAgICAgc2VsZi51cGRhdGUocGFyYW1zLmRhdGEpO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTaW5nbGVTZWxlY3Rpb24ucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24uZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uX19yZW5kZXJlZCcpLmVtcHR5KCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2luZ2xlU2VsZWN0aW9uLnByb3RvdHlwZS5kaXNwbGF5ID0gZnVuY3Rpb24gKGRhdGEsIGNvbnRhaW5lcikge1xcclxcbiAgICB2YXIgdGVtcGxhdGUgPSB0aGlzLm9wdGlvbnMuZ2V0KCd0ZW1wbGF0ZVNlbGVjdGlvbicpO1xcclxcbiAgICB2YXIgZXNjYXBlTWFya3VwID0gdGhpcy5vcHRpb25zLmdldCgnZXNjYXBlTWFya3VwJyk7XFxyXFxuXFxyXFxuICAgIHJldHVybiBlc2NhcGVNYXJrdXAodGVtcGxhdGUoZGF0YSwgY29udGFpbmVyKSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2luZ2xlU2VsZWN0aW9uLnByb3RvdHlwZS5zZWxlY3Rpb25Db250YWluZXIgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHJldHVybiAkKCc8c3Bhbj48L3NwYW4+Jyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2luZ2xlU2VsZWN0aW9uLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZGF0YSkge1xcclxcbiAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHtcXHJcXG4gICAgICB0aGlzLmNsZWFyKCk7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHZhciBzZWxlY3Rpb24gPSBkYXRhWzBdO1xcclxcblxcclxcbiAgICB2YXIgJHJlbmRlcmVkID0gdGhpcy4kc2VsZWN0aW9uLmZpbmQoJy5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWQnKTtcXHJcXG4gICAgdmFyIGZvcm1hdHRlZCA9IHRoaXMuZGlzcGxheShzZWxlY3Rpb24sICRyZW5kZXJlZCk7XFxyXFxuXFxyXFxuICAgICRyZW5kZXJlZC5lbXB0eSgpLmFwcGVuZChmb3JtYXR0ZWQpO1xcclxcbiAgICAkcmVuZGVyZWQucHJvcCgndGl0bGUnLCBzZWxlY3Rpb24udGl0bGUgfHwgc2VsZWN0aW9uLnRleHQpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBTaW5nbGVTZWxlY3Rpb247XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL3NlbGVjdGlvbi9tdWx0aXBsZScsW1xcclxcbiAgJ2pxdWVyeScsXFxyXFxuICAnLi9iYXNlJyxcXHJcXG4gICcuLi91dGlscydcXHJcXG5dLCBmdW5jdGlvbiAoJCwgQmFzZVNlbGVjdGlvbiwgVXRpbHMpIHtcXHJcXG4gIGZ1bmN0aW9uIE11bHRpcGxlU2VsZWN0aW9uICgkZWxlbWVudCwgb3B0aW9ucykge1xcclxcbiAgICBNdWx0aXBsZVNlbGVjdGlvbi5fX3N1cGVyX18uY29uc3RydWN0b3IuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIFV0aWxzLkV4dGVuZChNdWx0aXBsZVNlbGVjdGlvbiwgQmFzZVNlbGVjdGlvbik7XFxyXFxuXFxyXFxuICBNdWx0aXBsZVNlbGVjdGlvbi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgJHNlbGVjdGlvbiA9IE11bHRpcGxlU2VsZWN0aW9uLl9fc3VwZXJfXy5yZW5kZXIuY2FsbCh0aGlzKTtcXHJcXG5cXHJcXG4gICAgJHNlbGVjdGlvbi5hZGRDbGFzcygnc2VsZWN0Mi1zZWxlY3Rpb24tLW11bHRpcGxlJyk7XFxyXFxuXFxyXFxuICAgICRzZWxlY3Rpb24uaHRtbChcXHJcXG4gICAgICAnPHVsIGNsYXNzPVxcXCJzZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWRcXFwiPjwvdWw+J1xcclxcbiAgICApO1xcclxcblxcclxcbiAgICByZXR1cm4gJHNlbGVjdGlvbjtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBNdWx0aXBsZVNlbGVjdGlvbi5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChjb250YWluZXIsICRjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICBNdWx0aXBsZVNlbGVjdGlvbi5fX3N1cGVyX18uYmluZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ2NsaWNrJywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIHNlbGYudHJpZ2dlcigndG9nZ2xlJywge1xcclxcbiAgICAgICAgb3JpZ2luYWxFdmVudDogZXZ0XFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oXFxyXFxuICAgICAgJ2NsaWNrJyxcXHJcXG4gICAgICAnLnNlbGVjdDItc2VsZWN0aW9uX19jaG9pY2VfX3JlbW92ZScsXFxyXFxuICAgICAgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgICAgLy8gSWdub3JlIHRoZSBldmVudCBpZiBpdCBpcyBkaXNhYmxlZFxcclxcbiAgICAgICAgaWYgKHNlbGYub3B0aW9ucy5nZXQoJ2Rpc2FibGVkJykpIHtcXHJcXG4gICAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgdmFyICRyZW1vdmUgPSAkKHRoaXMpO1xcclxcbiAgICAgICAgdmFyICRzZWxlY3Rpb24gPSAkcmVtb3ZlLnBhcmVudCgpO1xcclxcblxcclxcbiAgICAgICAgdmFyIGRhdGEgPSAkc2VsZWN0aW9uLmRhdGEoJ2RhdGEnKTtcXHJcXG5cXHJcXG4gICAgICAgIHNlbGYudHJpZ2dlcigndW5zZWxlY3QnLCB7XFxyXFxuICAgICAgICAgIG9yaWdpbmFsRXZlbnQ6IGV2dCxcXHJcXG4gICAgICAgICAgZGF0YTogZGF0YVxcclxcbiAgICAgICAgfSk7XFxyXFxuICAgICAgfVxcclxcbiAgICApO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIE11bHRpcGxlU2VsZWN0aW9uLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdGhpcy4kc2VsZWN0aW9uLmZpbmQoJy5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWQnKS5lbXB0eSgpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIE11bHRpcGxlU2VsZWN0aW9uLnByb3RvdHlwZS5kaXNwbGF5ID0gZnVuY3Rpb24gKGRhdGEsIGNvbnRhaW5lcikge1xcclxcbiAgICB2YXIgdGVtcGxhdGUgPSB0aGlzLm9wdGlvbnMuZ2V0KCd0ZW1wbGF0ZVNlbGVjdGlvbicpO1xcclxcbiAgICB2YXIgZXNjYXBlTWFya3VwID0gdGhpcy5vcHRpb25zLmdldCgnZXNjYXBlTWFya3VwJyk7XFxyXFxuXFxyXFxuICAgIHJldHVybiBlc2NhcGVNYXJrdXAodGVtcGxhdGUoZGF0YSwgY29udGFpbmVyKSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgTXVsdGlwbGVTZWxlY3Rpb24ucHJvdG90eXBlLnNlbGVjdGlvbkNvbnRhaW5lciA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdmFyICRjb250YWluZXIgPSAkKFxcclxcbiAgICAgICc8bGkgY2xhc3M9XFxcInNlbGVjdDItc2VsZWN0aW9uX19jaG9pY2VcXFwiPicgK1xcclxcbiAgICAgICAgJzxzcGFuIGNsYXNzPVxcXCJzZWxlY3QyLXNlbGVjdGlvbl9fY2hvaWNlX19yZW1vdmVcXFwiIHJvbGU9XFxcInByZXNlbnRhdGlvblxcXCI+JyArXFxyXFxuICAgICAgICAgICcmdGltZXM7JyArXFxyXFxuICAgICAgICAnPC9zcGFuPicgK1xcclxcbiAgICAgICc8L2xpPidcXHJcXG4gICAgKTtcXHJcXG5cXHJcXG4gICAgcmV0dXJuICRjb250YWluZXI7XFxyXFxuICB9O1xcclxcblxcclxcbiAgTXVsdGlwbGVTZWxlY3Rpb24ucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgIHRoaXMuY2xlYXIoKTtcXHJcXG5cXHJcXG4gICAgaWYgKGRhdGEubGVuZ3RoID09PSAwKSB7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHZhciAkc2VsZWN0aW9ucyA9IFtdO1xcclxcblxcclxcbiAgICBmb3IgKHZhciBkID0gMDsgZCA8IGRhdGEubGVuZ3RoOyBkKyspIHtcXHJcXG4gICAgICB2YXIgc2VsZWN0aW9uID0gZGF0YVtkXTtcXHJcXG5cXHJcXG4gICAgICB2YXIgJHNlbGVjdGlvbiA9IHRoaXMuc2VsZWN0aW9uQ29udGFpbmVyKCk7XFxyXFxuICAgICAgdmFyIGZvcm1hdHRlZCA9IHRoaXMuZGlzcGxheShzZWxlY3Rpb24sICRzZWxlY3Rpb24pO1xcclxcblxcclxcbiAgICAgICRzZWxlY3Rpb24uYXBwZW5kKGZvcm1hdHRlZCk7XFxyXFxuICAgICAgJHNlbGVjdGlvbi5wcm9wKCd0aXRsZScsIHNlbGVjdGlvbi50aXRsZSB8fCBzZWxlY3Rpb24udGV4dCk7XFxyXFxuXFxyXFxuICAgICAgJHNlbGVjdGlvbi5kYXRhKCdkYXRhJywgc2VsZWN0aW9uKTtcXHJcXG5cXHJcXG4gICAgICAkc2VsZWN0aW9ucy5wdXNoKCRzZWxlY3Rpb24pO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHZhciAkcmVuZGVyZWQgPSB0aGlzLiRzZWxlY3Rpb24uZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uX19yZW5kZXJlZCcpO1xcclxcblxcclxcbiAgICBVdGlscy5hcHBlbmRNYW55KCRyZW5kZXJlZCwgJHNlbGVjdGlvbnMpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBNdWx0aXBsZVNlbGVjdGlvbjtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvc2VsZWN0aW9uL3BsYWNlaG9sZGVyJyxbXFxyXFxuICAnLi4vdXRpbHMnXFxyXFxuXSwgZnVuY3Rpb24gKFV0aWxzKSB7XFxyXFxuICBmdW5jdGlvbiBQbGFjZWhvbGRlciAoZGVjb3JhdGVkLCAkZWxlbWVudCwgb3B0aW9ucykge1xcclxcbiAgICB0aGlzLnBsYWNlaG9sZGVyID0gdGhpcy5ub3JtYWxpemVQbGFjZWhvbGRlcihvcHRpb25zLmdldCgncGxhY2Vob2xkZXInKSk7XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsICRlbGVtZW50LCBvcHRpb25zKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIFBsYWNlaG9sZGVyLnByb3RvdHlwZS5ub3JtYWxpemVQbGFjZWhvbGRlciA9IGZ1bmN0aW9uIChfLCBwbGFjZWhvbGRlcikge1xcclxcbiAgICBpZiAodHlwZW9mIHBsYWNlaG9sZGVyID09PSAnc3RyaW5nJykge1xcclxcbiAgICAgIHBsYWNlaG9sZGVyID0ge1xcclxcbiAgICAgICAgaWQ6ICcnLFxcclxcbiAgICAgICAgdGV4dDogcGxhY2Vob2xkZXJcXHJcXG4gICAgICB9O1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHJldHVybiBwbGFjZWhvbGRlcjtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBQbGFjZWhvbGRlci5wcm90b3R5cGUuY3JlYXRlUGxhY2Vob2xkZXIgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBwbGFjZWhvbGRlcikge1xcclxcbiAgICB2YXIgJHBsYWNlaG9sZGVyID0gdGhpcy5zZWxlY3Rpb25Db250YWluZXIoKTtcXHJcXG5cXHJcXG4gICAgJHBsYWNlaG9sZGVyLmh0bWwodGhpcy5kaXNwbGF5KHBsYWNlaG9sZGVyKSk7XFxyXFxuICAgICRwbGFjZWhvbGRlci5hZGRDbGFzcygnc2VsZWN0Mi1zZWxlY3Rpb25fX3BsYWNlaG9sZGVyJylcXHJcXG4gICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdzZWxlY3QyLXNlbGVjdGlvbl9fY2hvaWNlJyk7XFxyXFxuXFxyXFxuICAgIHJldHVybiAkcGxhY2Vob2xkZXI7XFxyXFxuICB9O1xcclxcblxcclxcbiAgUGxhY2Vob2xkZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGRhdGEpIHtcXHJcXG4gICAgdmFyIHNpbmdsZVBsYWNlaG9sZGVyID0gKFxcclxcbiAgICAgIGRhdGEubGVuZ3RoID09IDEgJiYgZGF0YVswXS5pZCAhPSB0aGlzLnBsYWNlaG9sZGVyLmlkXFxyXFxuICAgICk7XFxyXFxuICAgIHZhciBtdWx0aXBsZVNlbGVjdGlvbnMgPSBkYXRhLmxlbmd0aCA+IDE7XFxyXFxuXFxyXFxuICAgIGlmIChtdWx0aXBsZVNlbGVjdGlvbnMgfHwgc2luZ2xlUGxhY2Vob2xkZXIpIHtcXHJcXG4gICAgICByZXR1cm4gZGVjb3JhdGVkLmNhbGwodGhpcywgZGF0YSk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy5jbGVhcigpO1xcclxcblxcclxcbiAgICB2YXIgJHBsYWNlaG9sZGVyID0gdGhpcy5jcmVhdGVQbGFjZWhvbGRlcih0aGlzLnBsYWNlaG9sZGVyKTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kc2VsZWN0aW9uLmZpbmQoJy5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWQnKS5hcHBlbmQoJHBsYWNlaG9sZGVyKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gUGxhY2Vob2xkZXI7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL3NlbGVjdGlvbi9hbGxvd0NsZWFyJyxbXFxyXFxuICAnanF1ZXJ5JyxcXHJcXG4gICcuLi9rZXlzJ1xcclxcbl0sIGZ1bmN0aW9uICgkLCBLRVlTKSB7XFxyXFxuICBmdW5jdGlvbiBBbGxvd0NsZWFyICgpIHsgfVxcclxcblxcclxcbiAgQWxsb3dDbGVhci5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGNvbnRhaW5lciwgJGNvbnRhaW5lcikge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIGNvbnRhaW5lciwgJGNvbnRhaW5lcik7XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLnBsYWNlaG9sZGVyID09IG51bGwpIHtcXHJcXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmdldCgnZGVidWcnKSAmJiB3aW5kb3cuY29uc29sZSAmJiBjb25zb2xlLmVycm9yKSB7XFxyXFxuICAgICAgICBjb25zb2xlLmVycm9yKFxcclxcbiAgICAgICAgICAnU2VsZWN0MjogVGhlIGBhbGxvd0NsZWFyYCBvcHRpb24gc2hvdWxkIGJlIHVzZWQgaW4gY29tYmluYXRpb24gJyArXFxyXFxuICAgICAgICAgICd3aXRoIHRoZSBgcGxhY2Vob2xkZXJgIG9wdGlvbi4nXFxyXFxuICAgICAgICApO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ21vdXNlZG93bicsICcuc2VsZWN0Mi1zZWxlY3Rpb25fX2NsZWFyJyxcXHJcXG4gICAgICBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgICBzZWxmLl9oYW5kbGVDbGVhcihldnQpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdrZXlwcmVzcycsIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICBzZWxmLl9oYW5kbGVLZXlib2FyZENsZWFyKGV2dCwgY29udGFpbmVyKTtcXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQWxsb3dDbGVhci5wcm90b3R5cGUuX2hhbmRsZUNsZWFyID0gZnVuY3Rpb24gKF8sIGV2dCkge1xcclxcbiAgICAvLyBJZ25vcmUgdGhlIGV2ZW50IGlmIGl0IGlzIGRpc2FibGVkXFxyXFxuICAgIGlmICh0aGlzLm9wdGlvbnMuZ2V0KCdkaXNhYmxlZCcpKSB7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHZhciAkY2xlYXIgPSB0aGlzLiRzZWxlY3Rpb24uZmluZCgnLnNlbGVjdDItc2VsZWN0aW9uX19jbGVhcicpO1xcclxcblxcclxcbiAgICAvLyBJZ25vcmUgdGhlIGV2ZW50IGlmIG5vdGhpbmcgaGFzIGJlZW4gc2VsZWN0ZWRcXHJcXG4gICAgaWYgKCRjbGVhci5sZW5ndGggPT09IDApIHtcXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xcclxcblxcclxcbiAgICB2YXIgZGF0YSA9ICRjbGVhci5kYXRhKCdkYXRhJyk7XFxyXFxuXFxyXFxuICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGF0YS5sZW5ndGg7IGQrKykge1xcclxcbiAgICAgIHZhciB1bnNlbGVjdERhdGEgPSB7XFxyXFxuICAgICAgICBkYXRhOiBkYXRhW2RdXFxyXFxuICAgICAgfTtcXHJcXG5cXHJcXG4gICAgICAvLyBUcmlnZ2VyIHRoZSBgdW5zZWxlY3RgIGV2ZW50LCBzbyBwZW9wbGUgY2FuIHByZXZlbnQgaXQgZnJvbSBiZWluZ1xcclxcbiAgICAgIC8vIGNsZWFyZWQuXFxyXFxuICAgICAgdGhpcy50cmlnZ2VyKCd1bnNlbGVjdCcsIHVuc2VsZWN0RGF0YSk7XFxyXFxuXFxyXFxuICAgICAgLy8gSWYgdGhlIGV2ZW50IHdhcyBwcmV2ZW50ZWQsIGRvbid0IGNsZWFyIGl0IG91dC5cXHJcXG4gICAgICBpZiAodW5zZWxlY3REYXRhLnByZXZlbnRlZCkge1xcclxcbiAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLiRlbGVtZW50LnZhbCh0aGlzLnBsYWNlaG9sZGVyLmlkKS50cmlnZ2VyKCdjaGFuZ2UnKTtcXHJcXG5cXHJcXG4gICAgdGhpcy50cmlnZ2VyKCd0b2dnbGUnLCB7fSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQWxsb3dDbGVhci5wcm90b3R5cGUuX2hhbmRsZUtleWJvYXJkQ2xlYXIgPSBmdW5jdGlvbiAoXywgZXZ0LCBjb250YWluZXIpIHtcXHJcXG4gICAgaWYgKGNvbnRhaW5lci5pc09wZW4oKSkge1xcclxcbiAgICAgIHJldHVybjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAoZXZ0LndoaWNoID09IEtFWVMuREVMRVRFIHx8IGV2dC53aGljaCA9PSBLRVlTLkJBQ0tTUEFDRSkge1xcclxcbiAgICAgIHRoaXMuX2hhbmRsZUNsZWFyKGV2dCk7XFxyXFxuICAgIH1cXHJcXG4gIH07XFxyXFxuXFxyXFxuICBBbGxvd0NsZWFyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBkYXRhKSB7XFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIGRhdGEpO1xcclxcblxcclxcbiAgICBpZiAodGhpcy4kc2VsZWN0aW9uLmZpbmQoJy5zZWxlY3QyLXNlbGVjdGlvbl9fcGxhY2Vob2xkZXInKS5sZW5ndGggPiAwIHx8XFxyXFxuICAgICAgICBkYXRhLmxlbmd0aCA9PT0gMCkge1xcclxcbiAgICAgIHJldHVybjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB2YXIgJHJlbW92ZSA9ICQoXFxyXFxuICAgICAgJzxzcGFuIGNsYXNzPVxcXCJzZWxlY3QyLXNlbGVjdGlvbl9fY2xlYXJcXFwiPicgK1xcclxcbiAgICAgICAgJyZ0aW1lczsnICtcXHJcXG4gICAgICAnPC9zcGFuPidcXHJcXG4gICAgKTtcXHJcXG4gICAgJHJlbW92ZS5kYXRhKCdkYXRhJywgZGF0YSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5maW5kKCcuc2VsZWN0Mi1zZWxlY3Rpb25fX3JlbmRlcmVkJykucHJlcGVuZCgkcmVtb3ZlKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gQWxsb3dDbGVhcjtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvc2VsZWN0aW9uL3NlYXJjaCcsW1xcclxcbiAgJ2pxdWVyeScsXFxyXFxuICAnLi4vdXRpbHMnLFxcclxcbiAgJy4uL2tleXMnXFxyXFxuXSwgZnVuY3Rpb24gKCQsIFV0aWxzLCBLRVlTKSB7XFxyXFxuICBmdW5jdGlvbiBTZWFyY2ggKGRlY29yYXRlZCwgJGVsZW1lbnQsIG9wdGlvbnMpIHtcXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgJGVsZW1lbnQsIG9wdGlvbnMpO1xcclxcbiAgfVxcclxcblxcclxcbiAgU2VhcmNoLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoZGVjb3JhdGVkKSB7XFxyXFxuICAgIHZhciAkc2VhcmNoID0gJChcXHJcXG4gICAgICAnPGxpIGNsYXNzPVxcXCJzZWxlY3QyLXNlYXJjaCBzZWxlY3QyLXNlYXJjaC0taW5saW5lXFxcIj4nICtcXHJcXG4gICAgICAgICc8aW5wdXQgY2xhc3M9XFxcInNlbGVjdDItc2VhcmNoX19maWVsZFxcXCIgdHlwZT1cXFwic2VhcmNoXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiJyArXFxyXFxuICAgICAgICAnIGF1dG9jb21wbGV0ZT1cXFwib2ZmXFxcIiBhdXRvY29ycmVjdD1cXFwib2ZmXFxcIiBhdXRvY2FwaXRhbGl6ZT1cXFwib2ZmXFxcIicgK1xcclxcbiAgICAgICAgJyBzcGVsbGNoZWNrPVxcXCJmYWxzZVxcXCIgcm9sZT1cXFwidGV4dGJveFxcXCIgYXJpYS1hdXRvY29tcGxldGU9XFxcImxpc3RcXFwiIC8+JyArXFxyXFxuICAgICAgJzwvbGk+J1xcclxcbiAgICApO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWFyY2hDb250YWluZXIgPSAkc2VhcmNoO1xcclxcbiAgICB0aGlzLiRzZWFyY2ggPSAkc2VhcmNoLmZpbmQoJ2lucHV0Jyk7XFxyXFxuXFxyXFxuICAgIHZhciAkcmVuZGVyZWQgPSBkZWNvcmF0ZWQuY2FsbCh0aGlzKTtcXHJcXG5cXHJcXG4gICAgdGhpcy5fdHJhbnNmZXJUYWJJbmRleCgpO1xcclxcblxcclxcbiAgICByZXR1cm4gJHJlbmRlcmVkO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlYXJjaC5wcm90b3R5cGUuYmluZCA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGNvbnRhaW5lciwgJGNvbnRhaW5lcikge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIGNvbnRhaW5lciwgJGNvbnRhaW5lcik7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignb3BlbicsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICBzZWxmLiRzZWFyY2gudHJpZ2dlcignZm9jdXMnKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignY2xvc2UnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi4kc2VhcmNoLnZhbCgnJyk7XFxyXFxuICAgICAgc2VsZi4kc2VhcmNoLnJlbW92ZUF0dHIoJ2FyaWEtYWN0aXZlZGVzY2VuZGFudCcpO1xcclxcbiAgICAgIHNlbGYuJHNlYXJjaC50cmlnZ2VyKCdmb2N1cycpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdlbmFibGUnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi4kc2VhcmNoLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xcclxcblxcclxcbiAgICAgIHNlbGYuX3RyYW5zZmVyVGFiSW5kZXgoKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignZGlzYWJsZScsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICBzZWxmLiRzZWFyY2gucHJvcCgnZGlzYWJsZWQnLCB0cnVlKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignZm9jdXMnLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgc2VsZi4kc2VhcmNoLnRyaWdnZXIoJ2ZvY3VzJyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6Zm9jdXMnLCBmdW5jdGlvbiAocGFyYW1zKSB7XFxyXFxuICAgICAgc2VsZi4kc2VhcmNoLmF0dHIoJ2FyaWEtYWN0aXZlZGVzY2VuZGFudCcsIHBhcmFtcy5pZCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ2ZvY3VzaW4nLCAnLnNlbGVjdDItc2VhcmNoLS1pbmxpbmUnLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgc2VsZi50cmlnZ2VyKCdmb2N1cycsIGV2dCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oJ2ZvY3Vzb3V0JywgJy5zZWxlY3QyLXNlYXJjaC0taW5saW5lJywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIHNlbGYuX2hhbmRsZUJsdXIoZXZ0KTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5vbigna2V5ZG93bicsICcuc2VsZWN0Mi1zZWFyY2gtLWlubGluZScsIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XFxyXFxuXFxyXFxuICAgICAgc2VsZi50cmlnZ2VyKCdrZXlwcmVzcycsIGV2dCk7XFxyXFxuXFxyXFxuICAgICAgc2VsZi5fa2V5VXBQcmV2ZW50ZWQgPSBldnQuaXNEZWZhdWx0UHJldmVudGVkKCk7XFxyXFxuXFxyXFxuICAgICAgdmFyIGtleSA9IGV2dC53aGljaDtcXHJcXG5cXHJcXG4gICAgICBpZiAoa2V5ID09PSBLRVlTLkJBQ0tTUEFDRSAmJiBzZWxmLiRzZWFyY2gudmFsKCkgPT09ICcnKSB7XFxyXFxuICAgICAgICB2YXIgJHByZXZpb3VzQ2hvaWNlID0gc2VsZi4kc2VhcmNoQ29udGFpbmVyXFxyXFxuICAgICAgICAgIC5wcmV2KCcuc2VsZWN0Mi1zZWxlY3Rpb25fX2Nob2ljZScpO1xcclxcblxcclxcbiAgICAgICAgaWYgKCRwcmV2aW91c0Nob2ljZS5sZW5ndGggPiAwKSB7XFxyXFxuICAgICAgICAgIHZhciBpdGVtID0gJHByZXZpb3VzQ2hvaWNlLmRhdGEoJ2RhdGEnKTtcXHJcXG5cXHJcXG4gICAgICAgICAgc2VsZi5zZWFyY2hSZW1vdmVDaG9pY2UoaXRlbSk7XFxyXFxuXFxyXFxuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgIH1cXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIC8vIFRyeSB0byBkZXRlY3QgdGhlIElFIHZlcnNpb24gc2hvdWxkIHRoZSBgZG9jdW1lbnRNb2RlYCBwcm9wZXJ0eSB0aGF0XFxyXFxuICAgIC8vIGlzIHN0b3JlZCBvbiB0aGUgZG9jdW1lbnQuIFRoaXMgaXMgb25seSBpbXBsZW1lbnRlZCBpbiBJRSBhbmQgaXNcXHJcXG4gICAgLy8gc2xpZ2h0bHkgY2xlYW5lciB0aGFuIGRvaW5nIGEgdXNlciBhZ2VudCBjaGVjay5cXHJcXG4gICAgLy8gVGhpcyBwcm9wZXJ0eSBpcyBub3QgYXZhaWxhYmxlIGluIEVkZ2UsIGJ1dCBFZGdlIGFsc28gZG9lc24ndCBoYXZlXFxyXFxuICAgIC8vIHRoaXMgYnVnLlxcclxcbiAgICB2YXIgbXNpZSA9IGRvY3VtZW50LmRvY3VtZW50TW9kZTtcXHJcXG4gICAgdmFyIGRpc2FibGVJbnB1dEV2ZW50cyA9IG1zaWUgJiYgbXNpZSA8PSAxMTtcXHJcXG5cXHJcXG4gICAgLy8gV29ya2Fyb3VuZCBmb3IgYnJvd3NlcnMgd2hpY2ggZG8gbm90IHN1cHBvcnQgdGhlIGBpbnB1dGAgZXZlbnRcXHJcXG4gICAgLy8gVGhpcyB3aWxsIHByZXZlbnQgZG91YmxlLXRyaWdnZXJpbmcgb2YgZXZlbnRzIGZvciBicm93c2VycyB3aGljaCBzdXBwb3J0XFxyXFxuICAgIC8vIGJvdGggdGhlIGBrZXl1cGAgYW5kIGBpbnB1dGAgZXZlbnRzLlxcclxcbiAgICB0aGlzLiRzZWxlY3Rpb24ub24oXFxyXFxuICAgICAgJ2lucHV0LnNlYXJjaGNoZWNrJyxcXHJcXG4gICAgICAnLnNlbGVjdDItc2VhcmNoLS1pbmxpbmUnLFxcclxcbiAgICAgIGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgICAgIC8vIElFIHdpbGwgdHJpZ2dlciB0aGUgYGlucHV0YCBldmVudCB3aGVuIGEgcGxhY2Vob2xkZXIgaXMgdXNlZCBvbiBhXFxyXFxuICAgICAgICAvLyBzZWFyY2ggYm94LiBUbyBnZXQgYXJvdW5kIHRoaXMgaXNzdWUsIHdlIGFyZSBmb3JjZWQgdG8gaWdub3JlIGFsbFxcclxcbiAgICAgICAgLy8gYGlucHV0YCBldmVudHMgaW4gSUUgYW5kIGtlZXAgdXNpbmcgYGtleXVwYC5cXHJcXG4gICAgICAgIGlmIChkaXNhYmxlSW5wdXRFdmVudHMpIHtcXHJcXG4gICAgICAgICAgc2VsZi4kc2VsZWN0aW9uLm9mZignaW5wdXQuc2VhcmNoIGlucHV0LnNlYXJjaGNoZWNrJyk7XFxyXFxuICAgICAgICAgIHJldHVybjtcXHJcXG4gICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgIC8vIFVuYmluZCB0aGUgZHVwbGljYXRlZCBga2V5dXBgIGV2ZW50XFxyXFxuICAgICAgICBzZWxmLiRzZWxlY3Rpb24ub2ZmKCdrZXl1cC5zZWFyY2gnKTtcXHJcXG4gICAgICB9XFxyXFxuICAgICk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbi5vbihcXHJcXG4gICAgICAna2V5dXAuc2VhcmNoIGlucHV0LnNlYXJjaCcsXFxyXFxuICAgICAgJy5zZWxlY3QyLXNlYXJjaC0taW5saW5lJyxcXHJcXG4gICAgICBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgICAvLyBJRSB3aWxsIHRyaWdnZXIgdGhlIGBpbnB1dGAgZXZlbnQgd2hlbiBhIHBsYWNlaG9sZGVyIGlzIHVzZWQgb24gYVxcclxcbiAgICAgICAgLy8gc2VhcmNoIGJveC4gVG8gZ2V0IGFyb3VuZCB0aGlzIGlzc3VlLCB3ZSBhcmUgZm9yY2VkIHRvIGlnbm9yZSBhbGxcXHJcXG4gICAgICAgIC8vIGBpbnB1dGAgZXZlbnRzIGluIElFIGFuZCBrZWVwIHVzaW5nIGBrZXl1cGAuXFxyXFxuICAgICAgICBpZiAoZGlzYWJsZUlucHV0RXZlbnRzICYmIGV2dC50eXBlID09PSAnaW5wdXQnKSB7XFxyXFxuICAgICAgICAgIHNlbGYuJHNlbGVjdGlvbi5vZmYoJ2lucHV0LnNlYXJjaCBpbnB1dC5zZWFyY2hjaGVjaycpO1xcclxcbiAgICAgICAgICByZXR1cm47XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICB2YXIga2V5ID0gZXZ0LndoaWNoO1xcclxcblxcclxcbiAgICAgICAgLy8gV2UgY2FuIGZyZWVseSBpZ25vcmUgZXZlbnRzIGZyb20gbW9kaWZpZXIga2V5c1xcclxcbiAgICAgICAgaWYgKGtleSA9PSBLRVlTLlNISUZUIHx8IGtleSA9PSBLRVlTLkNUUkwgfHwga2V5ID09IEtFWVMuQUxUKSB7XFxyXFxuICAgICAgICAgIHJldHVybjtcXHJcXG4gICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgIC8vIFRhYmJpbmcgd2lsbCBiZSBoYW5kbGVkIGR1cmluZyB0aGUgYGtleWRvd25gIHBoYXNlXFxyXFxuICAgICAgICBpZiAoa2V5ID09IEtFWVMuVEFCKSB7XFxyXFxuICAgICAgICAgIHJldHVybjtcXHJcXG4gICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgIHNlbGYuaGFuZGxlU2VhcmNoKGV2dCk7XFxyXFxuICAgICAgfVxcclxcbiAgICApO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIC8qKlxcclxcbiAgICogVGhpcyBtZXRob2Qgd2lsbCB0cmFuc2ZlciB0aGUgdGFiaW5kZXggYXR0cmlidXRlIGZyb20gdGhlIHJlbmRlcmVkXFxyXFxuICAgKiBzZWxlY3Rpb24gdG8gdGhlIHNlYXJjaCBib3guIFRoaXMgYWxsb3dzIGZvciB0aGUgc2VhcmNoIGJveCB0byBiZSB1c2VkIGFzXFxyXFxuICAgKiB0aGUgcHJpbWFyeSBmb2N1cyBpbnN0ZWFkIG9mIHRoZSBzZWxlY3Rpb24gY29udGFpbmVyLlxcclxcbiAgICpcXHJcXG4gICAqIEBwcml2YXRlXFxyXFxuICAgKi9cXHJcXG4gIFNlYXJjaC5wcm90b3R5cGUuX3RyYW5zZmVyVGFiSW5kZXggPSBmdW5jdGlvbiAoZGVjb3JhdGVkKSB7XFxyXFxuICAgIHRoaXMuJHNlYXJjaC5hdHRyKCd0YWJpbmRleCcsIHRoaXMuJHNlbGVjdGlvbi5hdHRyKCd0YWJpbmRleCcpKTtcXHJcXG4gICAgdGhpcy4kc2VsZWN0aW9uLmF0dHIoJ3RhYmluZGV4JywgJy0xJyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VhcmNoLnByb3RvdHlwZS5jcmVhdGVQbGFjZWhvbGRlciA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIHBsYWNlaG9sZGVyKSB7XFxyXFxuICAgIHRoaXMuJHNlYXJjaC5hdHRyKCdwbGFjZWhvbGRlcicsIHBsYWNlaG9sZGVyLnRleHQpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlYXJjaC5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgZGF0YSkge1xcclxcbiAgICB2YXIgc2VhcmNoSGFkRm9jdXMgPSB0aGlzLiRzZWFyY2hbMF0gPT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcXHJcXG5cXHJcXG4gICAgdGhpcy4kc2VhcmNoLmF0dHIoJ3BsYWNlaG9sZGVyJywgJycpO1xcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBkYXRhKTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kc2VsZWN0aW9uLmZpbmQoJy5zZWxlY3QyLXNlbGVjdGlvbl9fcmVuZGVyZWQnKVxcclxcbiAgICAgICAgICAgICAgICAgICAuYXBwZW5kKHRoaXMuJHNlYXJjaENvbnRhaW5lcik7XFxyXFxuXFxyXFxuICAgIHRoaXMucmVzaXplU2VhcmNoKCk7XFxyXFxuICAgIGlmIChzZWFyY2hIYWRGb2N1cykge1xcclxcbiAgICAgIHRoaXMuJHNlYXJjaC5mb2N1cygpO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VhcmNoLnByb3RvdHlwZS5oYW5kbGVTZWFyY2ggPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHRoaXMucmVzaXplU2VhcmNoKCk7XFxyXFxuXFxyXFxuICAgIGlmICghdGhpcy5fa2V5VXBQcmV2ZW50ZWQpIHtcXHJcXG4gICAgICB2YXIgaW5wdXQgPSB0aGlzLiRzZWFyY2gudmFsKCk7XFxyXFxuXFxyXFxuICAgICAgdGhpcy50cmlnZ2VyKCdxdWVyeScsIHtcXHJcXG4gICAgICAgIHRlcm06IGlucHV0XFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy5fa2V5VXBQcmV2ZW50ZWQgPSBmYWxzZTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWFyY2gucHJvdG90eXBlLnNlYXJjaFJlbW92ZUNob2ljZSA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGl0ZW0pIHtcXHJcXG4gICAgdGhpcy50cmlnZ2VyKCd1bnNlbGVjdCcsIHtcXHJcXG4gICAgICBkYXRhOiBpdGVtXFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWFyY2gudmFsKGl0ZW0udGV4dCk7XFxyXFxuICAgIHRoaXMuaGFuZGxlU2VhcmNoKCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VhcmNoLnByb3RvdHlwZS5yZXNpemVTZWFyY2ggPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHRoaXMuJHNlYXJjaC5jc3MoJ3dpZHRoJywgJzI1cHgnKTtcXHJcXG5cXHJcXG4gICAgdmFyIHdpZHRoID0gJyc7XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLiRzZWFyY2guYXR0cigncGxhY2Vob2xkZXInKSAhPT0gJycpIHtcXHJcXG4gICAgICB3aWR0aCA9IHRoaXMuJHNlbGVjdGlvbi5maW5kKCcuc2VsZWN0Mi1zZWxlY3Rpb25fX3JlbmRlcmVkJykuaW5uZXJXaWR0aCgpO1xcclxcbiAgICB9IGVsc2Uge1xcclxcbiAgICAgIHZhciBtaW5pbXVtV2lkdGggPSB0aGlzLiRzZWFyY2gudmFsKCkubGVuZ3RoICsgMTtcXHJcXG5cXHJcXG4gICAgICB3aWR0aCA9IChtaW5pbXVtV2lkdGggKiAwLjc1KSArICdlbSc7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy4kc2VhcmNoLmNzcygnd2lkdGgnLCB3aWR0aCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIFNlYXJjaDtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvc2VsZWN0aW9uL2V2ZW50UmVsYXknLFtcXHJcXG4gICdqcXVlcnknXFxyXFxuXSwgZnVuY3Rpb24gKCQpIHtcXHJcXG4gIGZ1bmN0aW9uIEV2ZW50UmVsYXkgKCkgeyB9XFxyXFxuXFxyXFxuICBFdmVudFJlbGF5LnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG4gICAgdmFyIHJlbGF5RXZlbnRzID0gW1xcclxcbiAgICAgICdvcGVuJywgJ29wZW5pbmcnLFxcclxcbiAgICAgICdjbG9zZScsICdjbG9zaW5nJyxcXHJcXG4gICAgICAnc2VsZWN0JywgJ3NlbGVjdGluZycsXFxyXFxuICAgICAgJ3Vuc2VsZWN0JywgJ3Vuc2VsZWN0aW5nJ1xcclxcbiAgICBdO1xcclxcblxcclxcbiAgICB2YXIgcHJldmVudGFibGVFdmVudHMgPSBbJ29wZW5pbmcnLCAnY2xvc2luZycsICdzZWxlY3RpbmcnLCAndW5zZWxlY3RpbmcnXTtcXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgY29udGFpbmVyLCAkY29udGFpbmVyKTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCcqJywgZnVuY3Rpb24gKG5hbWUsIHBhcmFtcykge1xcclxcbiAgICAgIC8vIElnbm9yZSBldmVudHMgdGhhdCBzaG91bGQgbm90IGJlIHJlbGF5ZWRcXHJcXG4gICAgICBpZiAoJC5pbkFycmF5KG5hbWUsIHJlbGF5RXZlbnRzKSA9PT0gLTEpIHtcXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgLy8gVGhlIHBhcmFtZXRlcnMgc2hvdWxkIGFsd2F5cyBiZSBhbiBvYmplY3RcXHJcXG4gICAgICBwYXJhbXMgPSBwYXJhbXMgfHwge307XFxyXFxuXFxyXFxuICAgICAgLy8gR2VuZXJhdGUgdGhlIGpRdWVyeSBldmVudCBmb3IgdGhlIFNlbGVjdDIgZXZlbnRcXHJcXG4gICAgICB2YXIgZXZ0ID0gJC5FdmVudCgnc2VsZWN0MjonICsgbmFtZSwge1xcclxcbiAgICAgICAgcGFyYW1zOiBwYXJhbXNcXHJcXG4gICAgICB9KTtcXHJcXG5cXHJcXG4gICAgICBzZWxmLiRlbGVtZW50LnRyaWdnZXIoZXZ0KTtcXHJcXG5cXHJcXG4gICAgICAvLyBPbmx5IGhhbmRsZSBwcmV2ZW50YWJsZSBldmVudHMgaWYgaXQgd2FzIG9uZVxcclxcbiAgICAgIGlmICgkLmluQXJyYXkobmFtZSwgcHJldmVudGFibGVFdmVudHMpID09PSAtMSkge1xcclxcbiAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBwYXJhbXMucHJldmVudGVkID0gZXZ0LmlzRGVmYXVsdFByZXZlbnRlZCgpO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gRXZlbnRSZWxheTtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvdHJhbnNsYXRpb24nLFtcXHJcXG4gICdqcXVlcnknLFxcclxcbiAgJ3JlcXVpcmUnXFxyXFxuXSwgZnVuY3Rpb24gKCQsIHJlcXVpcmUpIHtcXHJcXG4gIGZ1bmN0aW9uIFRyYW5zbGF0aW9uIChkaWN0KSB7XFxyXFxuICAgIHRoaXMuZGljdCA9IGRpY3QgfHwge307XFxyXFxuICB9XFxyXFxuXFxyXFxuICBUcmFuc2xhdGlvbi5wcm90b3R5cGUuYWxsID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICByZXR1cm4gdGhpcy5kaWN0O1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFRyYW5zbGF0aW9uLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XFxyXFxuICAgIHJldHVybiB0aGlzLmRpY3Rba2V5XTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBUcmFuc2xhdGlvbi5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24gKHRyYW5zbGF0aW9uKSB7XFxyXFxuICAgIHRoaXMuZGljdCA9ICQuZXh0ZW5kKHt9LCB0cmFuc2xhdGlvbi5hbGwoKSwgdGhpcy5kaWN0KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICAvLyBTdGF0aWMgZnVuY3Rpb25zXFxyXFxuXFxyXFxuICBUcmFuc2xhdGlvbi5fY2FjaGUgPSB7fTtcXHJcXG5cXHJcXG4gIFRyYW5zbGF0aW9uLmxvYWRQYXRoID0gZnVuY3Rpb24gKHBhdGgpIHtcXHJcXG4gICAgaWYgKCEocGF0aCBpbiBUcmFuc2xhdGlvbi5fY2FjaGUpKSB7XFxyXFxuICAgICAgdmFyIHRyYW5zbGF0aW9ucyA9IHJlcXVpcmUocGF0aCk7XFxyXFxuXFxyXFxuICAgICAgVHJhbnNsYXRpb24uX2NhY2hlW3BhdGhdID0gdHJhbnNsYXRpb25zO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHJldHVybiBuZXcgVHJhbnNsYXRpb24oVHJhbnNsYXRpb24uX2NhY2hlW3BhdGhdKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gVHJhbnNsYXRpb247XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL2RpYWNyaXRpY3MnLFtcXHJcXG5cXHJcXG5dLCBmdW5jdGlvbiAoKSB7XFxyXFxuICB2YXIgZGlhY3JpdGljcyA9IHtcXHJcXG4gICAgJ1xcXFx1MjRCNic6ICdBJyxcXHJcXG4gICAgJ1xcXFx1RkYyMSc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDBDMCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDBDMSc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDBDMic6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVBNic6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVBNCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVBQSc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVBOCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDBDMyc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDEwMCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDEwMic6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVCMCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVBRSc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVCNCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVCMic6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDIyNic6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDFFMCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDBDNCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDFERSc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVBMic6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDBDNSc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDFGQSc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDFDRCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDIwMCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDIwMic6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVBMCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVBQyc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUVCNic6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MUUwMCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDEwNCc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MDIzQSc6ICdBJyxcXHJcXG4gICAgJ1xcXFx1MkM2Ric6ICdBJyxcXHJcXG4gICAgJ1xcXFx1QTczMic6ICdBQScsXFxyXFxuICAgICdcXFxcdTAwQzYnOiAnQUUnLFxcclxcbiAgICAnXFxcXHUwMUZDJzogJ0FFJyxcXHJcXG4gICAgJ1xcXFx1MDFFMic6ICdBRScsXFxyXFxuICAgICdcXFxcdUE3MzQnOiAnQU8nLFxcclxcbiAgICAnXFxcXHVBNzM2JzogJ0FVJyxcXHJcXG4gICAgJ1xcXFx1QTczOCc6ICdBVicsXFxyXFxuICAgICdcXFxcdUE3M0EnOiAnQVYnLFxcclxcbiAgICAnXFxcXHVBNzNDJzogJ0FZJyxcXHJcXG4gICAgJ1xcXFx1MjRCNyc6ICdCJyxcXHJcXG4gICAgJ1xcXFx1RkYyMic6ICdCJyxcXHJcXG4gICAgJ1xcXFx1MUUwMic6ICdCJyxcXHJcXG4gICAgJ1xcXFx1MUUwNCc6ICdCJyxcXHJcXG4gICAgJ1xcXFx1MUUwNic6ICdCJyxcXHJcXG4gICAgJ1xcXFx1MDI0Myc6ICdCJyxcXHJcXG4gICAgJ1xcXFx1MDE4Mic6ICdCJyxcXHJcXG4gICAgJ1xcXFx1MDE4MSc6ICdCJyxcXHJcXG4gICAgJ1xcXFx1MjRCOCc6ICdDJyxcXHJcXG4gICAgJ1xcXFx1RkYyMyc6ICdDJyxcXHJcXG4gICAgJ1xcXFx1MDEwNic6ICdDJyxcXHJcXG4gICAgJ1xcXFx1MDEwOCc6ICdDJyxcXHJcXG4gICAgJ1xcXFx1MDEwQSc6ICdDJyxcXHJcXG4gICAgJ1xcXFx1MDEwQyc6ICdDJyxcXHJcXG4gICAgJ1xcXFx1MDBDNyc6ICdDJyxcXHJcXG4gICAgJ1xcXFx1MUUwOCc6ICdDJyxcXHJcXG4gICAgJ1xcXFx1MDE4Nyc6ICdDJyxcXHJcXG4gICAgJ1xcXFx1MDIzQic6ICdDJyxcXHJcXG4gICAgJ1xcXFx1QTczRSc6ICdDJyxcXHJcXG4gICAgJ1xcXFx1MjRCOSc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1RkYyNCc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MUUwQSc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MDEwRSc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MUUwQyc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MUUxMCc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MUUxMic6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MUUwRSc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MDExMCc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MDE4Qic6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MDE4QSc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MDE4OSc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1QTc3OSc6ICdEJyxcXHJcXG4gICAgJ1xcXFx1MDFGMSc6ICdEWicsXFxyXFxuICAgICdcXFxcdTAxQzQnOiAnRFonLFxcclxcbiAgICAnXFxcXHUwMUYyJzogJ0R6JyxcXHJcXG4gICAgJ1xcXFx1MDFDNSc6ICdEeicsXFxyXFxuICAgICdcXFxcdTI0QkEnOiAnRScsXFxyXFxuICAgICdcXFxcdUZGMjUnOiAnRScsXFxyXFxuICAgICdcXFxcdTAwQzgnOiAnRScsXFxyXFxuICAgICdcXFxcdTAwQzknOiAnRScsXFxyXFxuICAgICdcXFxcdTAwQ0EnOiAnRScsXFxyXFxuICAgICdcXFxcdTFFQzAnOiAnRScsXFxyXFxuICAgICdcXFxcdTFFQkUnOiAnRScsXFxyXFxuICAgICdcXFxcdTFFQzQnOiAnRScsXFxyXFxuICAgICdcXFxcdTFFQzInOiAnRScsXFxyXFxuICAgICdcXFxcdTFFQkMnOiAnRScsXFxyXFxuICAgICdcXFxcdTAxMTInOiAnRScsXFxyXFxuICAgICdcXFxcdTFFMTQnOiAnRScsXFxyXFxuICAgICdcXFxcdTFFMTYnOiAnRScsXFxyXFxuICAgICdcXFxcdTAxMTQnOiAnRScsXFxyXFxuICAgICdcXFxcdTAxMTYnOiAnRScsXFxyXFxuICAgICdcXFxcdTAwQ0InOiAnRScsXFxyXFxuICAgICdcXFxcdTFFQkEnOiAnRScsXFxyXFxuICAgICdcXFxcdTAxMUEnOiAnRScsXFxyXFxuICAgICdcXFxcdTAyMDQnOiAnRScsXFxyXFxuICAgICdcXFxcdTAyMDYnOiAnRScsXFxyXFxuICAgICdcXFxcdTFFQjgnOiAnRScsXFxyXFxuICAgICdcXFxcdTFFQzYnOiAnRScsXFxyXFxuICAgICdcXFxcdTAyMjgnOiAnRScsXFxyXFxuICAgICdcXFxcdTFFMUMnOiAnRScsXFxyXFxuICAgICdcXFxcdTAxMTgnOiAnRScsXFxyXFxuICAgICdcXFxcdTFFMTgnOiAnRScsXFxyXFxuICAgICdcXFxcdTFFMUEnOiAnRScsXFxyXFxuICAgICdcXFxcdTAxOTAnOiAnRScsXFxyXFxuICAgICdcXFxcdTAxOEUnOiAnRScsXFxyXFxuICAgICdcXFxcdTI0QkInOiAnRicsXFxyXFxuICAgICdcXFxcdUZGMjYnOiAnRicsXFxyXFxuICAgICdcXFxcdTFFMUUnOiAnRicsXFxyXFxuICAgICdcXFxcdTAxOTEnOiAnRicsXFxyXFxuICAgICdcXFxcdUE3N0InOiAnRicsXFxyXFxuICAgICdcXFxcdTI0QkMnOiAnRycsXFxyXFxuICAgICdcXFxcdUZGMjcnOiAnRycsXFxyXFxuICAgICdcXFxcdTAxRjQnOiAnRycsXFxyXFxuICAgICdcXFxcdTAxMUMnOiAnRycsXFxyXFxuICAgICdcXFxcdTFFMjAnOiAnRycsXFxyXFxuICAgICdcXFxcdTAxMUUnOiAnRycsXFxyXFxuICAgICdcXFxcdTAxMjAnOiAnRycsXFxyXFxuICAgICdcXFxcdTAxRTYnOiAnRycsXFxyXFxuICAgICdcXFxcdTAxMjInOiAnRycsXFxyXFxuICAgICdcXFxcdTAxRTQnOiAnRycsXFxyXFxuICAgICdcXFxcdTAxOTMnOiAnRycsXFxyXFxuICAgICdcXFxcdUE3QTAnOiAnRycsXFxyXFxuICAgICdcXFxcdUE3N0QnOiAnRycsXFxyXFxuICAgICdcXFxcdUE3N0UnOiAnRycsXFxyXFxuICAgICdcXFxcdTI0QkQnOiAnSCcsXFxyXFxuICAgICdcXFxcdUZGMjgnOiAnSCcsXFxyXFxuICAgICdcXFxcdTAxMjQnOiAnSCcsXFxyXFxuICAgICdcXFxcdTFFMjInOiAnSCcsXFxyXFxuICAgICdcXFxcdTFFMjYnOiAnSCcsXFxyXFxuICAgICdcXFxcdTAyMUUnOiAnSCcsXFxyXFxuICAgICdcXFxcdTFFMjQnOiAnSCcsXFxyXFxuICAgICdcXFxcdTFFMjgnOiAnSCcsXFxyXFxuICAgICdcXFxcdTFFMkEnOiAnSCcsXFxyXFxuICAgICdcXFxcdTAxMjYnOiAnSCcsXFxyXFxuICAgICdcXFxcdTJDNjcnOiAnSCcsXFxyXFxuICAgICdcXFxcdTJDNzUnOiAnSCcsXFxyXFxuICAgICdcXFxcdUE3OEQnOiAnSCcsXFxyXFxuICAgICdcXFxcdTI0QkUnOiAnSScsXFxyXFxuICAgICdcXFxcdUZGMjknOiAnSScsXFxyXFxuICAgICdcXFxcdTAwQ0MnOiAnSScsXFxyXFxuICAgICdcXFxcdTAwQ0QnOiAnSScsXFxyXFxuICAgICdcXFxcdTAwQ0UnOiAnSScsXFxyXFxuICAgICdcXFxcdTAxMjgnOiAnSScsXFxyXFxuICAgICdcXFxcdTAxMkEnOiAnSScsXFxyXFxuICAgICdcXFxcdTAxMkMnOiAnSScsXFxyXFxuICAgICdcXFxcdTAxMzAnOiAnSScsXFxyXFxuICAgICdcXFxcdTAwQ0YnOiAnSScsXFxyXFxuICAgICdcXFxcdTFFMkUnOiAnSScsXFxyXFxuICAgICdcXFxcdTFFQzgnOiAnSScsXFxyXFxuICAgICdcXFxcdTAxQ0YnOiAnSScsXFxyXFxuICAgICdcXFxcdTAyMDgnOiAnSScsXFxyXFxuICAgICdcXFxcdTAyMEEnOiAnSScsXFxyXFxuICAgICdcXFxcdTFFQ0EnOiAnSScsXFxyXFxuICAgICdcXFxcdTAxMkUnOiAnSScsXFxyXFxuICAgICdcXFxcdTFFMkMnOiAnSScsXFxyXFxuICAgICdcXFxcdTAxOTcnOiAnSScsXFxyXFxuICAgICdcXFxcdTI0QkYnOiAnSicsXFxyXFxuICAgICdcXFxcdUZGMkEnOiAnSicsXFxyXFxuICAgICdcXFxcdTAxMzQnOiAnSicsXFxyXFxuICAgICdcXFxcdTAyNDgnOiAnSicsXFxyXFxuICAgICdcXFxcdTI0QzAnOiAnSycsXFxyXFxuICAgICdcXFxcdUZGMkInOiAnSycsXFxyXFxuICAgICdcXFxcdTFFMzAnOiAnSycsXFxyXFxuICAgICdcXFxcdTAxRTgnOiAnSycsXFxyXFxuICAgICdcXFxcdTFFMzInOiAnSycsXFxyXFxuICAgICdcXFxcdTAxMzYnOiAnSycsXFxyXFxuICAgICdcXFxcdTFFMzQnOiAnSycsXFxyXFxuICAgICdcXFxcdTAxOTgnOiAnSycsXFxyXFxuICAgICdcXFxcdTJDNjknOiAnSycsXFxyXFxuICAgICdcXFxcdUE3NDAnOiAnSycsXFxyXFxuICAgICdcXFxcdUE3NDInOiAnSycsXFxyXFxuICAgICdcXFxcdUE3NDQnOiAnSycsXFxyXFxuICAgICdcXFxcdUE3QTInOiAnSycsXFxyXFxuICAgICdcXFxcdTI0QzEnOiAnTCcsXFxyXFxuICAgICdcXFxcdUZGMkMnOiAnTCcsXFxyXFxuICAgICdcXFxcdTAxM0YnOiAnTCcsXFxyXFxuICAgICdcXFxcdTAxMzknOiAnTCcsXFxyXFxuICAgICdcXFxcdTAxM0QnOiAnTCcsXFxyXFxuICAgICdcXFxcdTFFMzYnOiAnTCcsXFxyXFxuICAgICdcXFxcdTFFMzgnOiAnTCcsXFxyXFxuICAgICdcXFxcdTAxM0InOiAnTCcsXFxyXFxuICAgICdcXFxcdTFFM0MnOiAnTCcsXFxyXFxuICAgICdcXFxcdTFFM0EnOiAnTCcsXFxyXFxuICAgICdcXFxcdTAxNDEnOiAnTCcsXFxyXFxuICAgICdcXFxcdTAyM0QnOiAnTCcsXFxyXFxuICAgICdcXFxcdTJDNjInOiAnTCcsXFxyXFxuICAgICdcXFxcdTJDNjAnOiAnTCcsXFxyXFxuICAgICdcXFxcdUE3NDgnOiAnTCcsXFxyXFxuICAgICdcXFxcdUE3NDYnOiAnTCcsXFxyXFxuICAgICdcXFxcdUE3ODAnOiAnTCcsXFxyXFxuICAgICdcXFxcdTAxQzcnOiAnTEonLFxcclxcbiAgICAnXFxcXHUwMUM4JzogJ0xqJyxcXHJcXG4gICAgJ1xcXFx1MjRDMic6ICdNJyxcXHJcXG4gICAgJ1xcXFx1RkYyRCc6ICdNJyxcXHJcXG4gICAgJ1xcXFx1MUUzRSc6ICdNJyxcXHJcXG4gICAgJ1xcXFx1MUU0MCc6ICdNJyxcXHJcXG4gICAgJ1xcXFx1MUU0Mic6ICdNJyxcXHJcXG4gICAgJ1xcXFx1MkM2RSc6ICdNJyxcXHJcXG4gICAgJ1xcXFx1MDE5Qyc6ICdNJyxcXHJcXG4gICAgJ1xcXFx1MjRDMyc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1RkYyRSc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MDFGOCc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MDE0Myc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MDBEMSc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MUU0NCc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MDE0Nyc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MUU0Nic6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MDE0NSc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MUU0QSc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MUU0OCc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MDIyMCc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MDE5RCc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1QTc5MCc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1QTdBNCc6ICdOJyxcXHJcXG4gICAgJ1xcXFx1MDFDQSc6ICdOSicsXFxyXFxuICAgICdcXFxcdTAxQ0InOiAnTmonLFxcclxcbiAgICAnXFxcXHUyNEM0JzogJ08nLFxcclxcbiAgICAnXFxcXHVGRjJGJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMEQyJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMEQzJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMEQ0JzogJ08nLFxcclxcbiAgICAnXFxcXHUxRUQyJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRUQwJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRUQ2JzogJ08nLFxcclxcbiAgICAnXFxcXHUxRUQ0JzogJ08nLFxcclxcbiAgICAnXFxcXHUwMEQ1JzogJ08nLFxcclxcbiAgICAnXFxcXHUxRTRDJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMjJDJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRTRFJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMTRDJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRTUwJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRTUyJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMTRFJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMjJFJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMjMwJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMEQ2JzogJ08nLFxcclxcbiAgICAnXFxcXHUwMjJBJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRUNFJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMTUwJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMUQxJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMjBDJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMjBFJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMUEwJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRURDJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRURBJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRUUwJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRURFJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRUUyJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRUNDJzogJ08nLFxcclxcbiAgICAnXFxcXHUxRUQ4JzogJ08nLFxcclxcbiAgICAnXFxcXHUwMUVBJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMUVDJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMEQ4JzogJ08nLFxcclxcbiAgICAnXFxcXHUwMUZFJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMTg2JzogJ08nLFxcclxcbiAgICAnXFxcXHUwMTlGJzogJ08nLFxcclxcbiAgICAnXFxcXHVBNzRBJzogJ08nLFxcclxcbiAgICAnXFxcXHVBNzRDJzogJ08nLFxcclxcbiAgICAnXFxcXHUwMUEyJzogJ09JJyxcXHJcXG4gICAgJ1xcXFx1QTc0RSc6ICdPTycsXFxyXFxuICAgICdcXFxcdTAyMjInOiAnT1UnLFxcclxcbiAgICAnXFxcXHUyNEM1JzogJ1AnLFxcclxcbiAgICAnXFxcXHVGRjMwJzogJ1AnLFxcclxcbiAgICAnXFxcXHUxRTU0JzogJ1AnLFxcclxcbiAgICAnXFxcXHUxRTU2JzogJ1AnLFxcclxcbiAgICAnXFxcXHUwMUE0JzogJ1AnLFxcclxcbiAgICAnXFxcXHUyQzYzJzogJ1AnLFxcclxcbiAgICAnXFxcXHVBNzUwJzogJ1AnLFxcclxcbiAgICAnXFxcXHVBNzUyJzogJ1AnLFxcclxcbiAgICAnXFxcXHVBNzU0JzogJ1AnLFxcclxcbiAgICAnXFxcXHUyNEM2JzogJ1EnLFxcclxcbiAgICAnXFxcXHVGRjMxJzogJ1EnLFxcclxcbiAgICAnXFxcXHVBNzU2JzogJ1EnLFxcclxcbiAgICAnXFxcXHVBNzU4JzogJ1EnLFxcclxcbiAgICAnXFxcXHUwMjRBJzogJ1EnLFxcclxcbiAgICAnXFxcXHUyNEM3JzogJ1InLFxcclxcbiAgICAnXFxcXHVGRjMyJzogJ1InLFxcclxcbiAgICAnXFxcXHUwMTU0JzogJ1InLFxcclxcbiAgICAnXFxcXHUxRTU4JzogJ1InLFxcclxcbiAgICAnXFxcXHUwMTU4JzogJ1InLFxcclxcbiAgICAnXFxcXHUwMjEwJzogJ1InLFxcclxcbiAgICAnXFxcXHUwMjEyJzogJ1InLFxcclxcbiAgICAnXFxcXHUxRTVBJzogJ1InLFxcclxcbiAgICAnXFxcXHUxRTVDJzogJ1InLFxcclxcbiAgICAnXFxcXHUwMTU2JzogJ1InLFxcclxcbiAgICAnXFxcXHUxRTVFJzogJ1InLFxcclxcbiAgICAnXFxcXHUwMjRDJzogJ1InLFxcclxcbiAgICAnXFxcXHUyQzY0JzogJ1InLFxcclxcbiAgICAnXFxcXHVBNzVBJzogJ1InLFxcclxcbiAgICAnXFxcXHVBN0E2JzogJ1InLFxcclxcbiAgICAnXFxcXHVBNzgyJzogJ1InLFxcclxcbiAgICAnXFxcXHUyNEM4JzogJ1MnLFxcclxcbiAgICAnXFxcXHVGRjMzJzogJ1MnLFxcclxcbiAgICAnXFxcXHUxRTlFJzogJ1MnLFxcclxcbiAgICAnXFxcXHUwMTVBJzogJ1MnLFxcclxcbiAgICAnXFxcXHUxRTY0JzogJ1MnLFxcclxcbiAgICAnXFxcXHUwMTVDJzogJ1MnLFxcclxcbiAgICAnXFxcXHUxRTYwJzogJ1MnLFxcclxcbiAgICAnXFxcXHUwMTYwJzogJ1MnLFxcclxcbiAgICAnXFxcXHUxRTY2JzogJ1MnLFxcclxcbiAgICAnXFxcXHUxRTYyJzogJ1MnLFxcclxcbiAgICAnXFxcXHUxRTY4JzogJ1MnLFxcclxcbiAgICAnXFxcXHUwMjE4JzogJ1MnLFxcclxcbiAgICAnXFxcXHUwMTVFJzogJ1MnLFxcclxcbiAgICAnXFxcXHUyQzdFJzogJ1MnLFxcclxcbiAgICAnXFxcXHVBN0E4JzogJ1MnLFxcclxcbiAgICAnXFxcXHVBNzg0JzogJ1MnLFxcclxcbiAgICAnXFxcXHUyNEM5JzogJ1QnLFxcclxcbiAgICAnXFxcXHVGRjM0JzogJ1QnLFxcclxcbiAgICAnXFxcXHUxRTZBJzogJ1QnLFxcclxcbiAgICAnXFxcXHUwMTY0JzogJ1QnLFxcclxcbiAgICAnXFxcXHUxRTZDJzogJ1QnLFxcclxcbiAgICAnXFxcXHUwMjFBJzogJ1QnLFxcclxcbiAgICAnXFxcXHUwMTYyJzogJ1QnLFxcclxcbiAgICAnXFxcXHUxRTcwJzogJ1QnLFxcclxcbiAgICAnXFxcXHUxRTZFJzogJ1QnLFxcclxcbiAgICAnXFxcXHUwMTY2JzogJ1QnLFxcclxcbiAgICAnXFxcXHUwMUFDJzogJ1QnLFxcclxcbiAgICAnXFxcXHUwMUFFJzogJ1QnLFxcclxcbiAgICAnXFxcXHUwMjNFJzogJ1QnLFxcclxcbiAgICAnXFxcXHVBNzg2JzogJ1QnLFxcclxcbiAgICAnXFxcXHVBNzI4JzogJ1RaJyxcXHJcXG4gICAgJ1xcXFx1MjRDQSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1RkYzNSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDBEOSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDBEQSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDBEQic6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDE2OCc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUU3OCc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDE2QSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUU3QSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDE2Qyc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDBEQyc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDFEQic6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDFENyc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDFENSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDFEOSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUVFNic6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDE2RSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDE3MCc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDFEMyc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDIxNCc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDIxNic6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDFBRic6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUVFQSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUVFOCc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUVFRSc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUVFQyc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUVGMCc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUVFNCc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUU3Mic6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDE3Mic6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUU3Nic6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MUU3NCc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MDI0NCc6ICdVJyxcXHJcXG4gICAgJ1xcXFx1MjRDQic6ICdWJyxcXHJcXG4gICAgJ1xcXFx1RkYzNic6ICdWJyxcXHJcXG4gICAgJ1xcXFx1MUU3Qyc6ICdWJyxcXHJcXG4gICAgJ1xcXFx1MUU3RSc6ICdWJyxcXHJcXG4gICAgJ1xcXFx1MDFCMic6ICdWJyxcXHJcXG4gICAgJ1xcXFx1QTc1RSc6ICdWJyxcXHJcXG4gICAgJ1xcXFx1MDI0NSc6ICdWJyxcXHJcXG4gICAgJ1xcXFx1QTc2MCc6ICdWWScsXFxyXFxuICAgICdcXFxcdTI0Q0MnOiAnVycsXFxyXFxuICAgICdcXFxcdUZGMzcnOiAnVycsXFxyXFxuICAgICdcXFxcdTFFODAnOiAnVycsXFxyXFxuICAgICdcXFxcdTFFODInOiAnVycsXFxyXFxuICAgICdcXFxcdTAxNzQnOiAnVycsXFxyXFxuICAgICdcXFxcdTFFODYnOiAnVycsXFxyXFxuICAgICdcXFxcdTFFODQnOiAnVycsXFxyXFxuICAgICdcXFxcdTFFODgnOiAnVycsXFxyXFxuICAgICdcXFxcdTJDNzInOiAnVycsXFxyXFxuICAgICdcXFxcdTI0Q0QnOiAnWCcsXFxyXFxuICAgICdcXFxcdUZGMzgnOiAnWCcsXFxyXFxuICAgICdcXFxcdTFFOEEnOiAnWCcsXFxyXFxuICAgICdcXFxcdTFFOEMnOiAnWCcsXFxyXFxuICAgICdcXFxcdTI0Q0UnOiAnWScsXFxyXFxuICAgICdcXFxcdUZGMzknOiAnWScsXFxyXFxuICAgICdcXFxcdTFFRjInOiAnWScsXFxyXFxuICAgICdcXFxcdTAwREQnOiAnWScsXFxyXFxuICAgICdcXFxcdTAxNzYnOiAnWScsXFxyXFxuICAgICdcXFxcdTFFRjgnOiAnWScsXFxyXFxuICAgICdcXFxcdTAyMzInOiAnWScsXFxyXFxuICAgICdcXFxcdTFFOEUnOiAnWScsXFxyXFxuICAgICdcXFxcdTAxNzgnOiAnWScsXFxyXFxuICAgICdcXFxcdTFFRjYnOiAnWScsXFxyXFxuICAgICdcXFxcdTFFRjQnOiAnWScsXFxyXFxuICAgICdcXFxcdTAxQjMnOiAnWScsXFxyXFxuICAgICdcXFxcdTAyNEUnOiAnWScsXFxyXFxuICAgICdcXFxcdTFFRkUnOiAnWScsXFxyXFxuICAgICdcXFxcdTI0Q0YnOiAnWicsXFxyXFxuICAgICdcXFxcdUZGM0EnOiAnWicsXFxyXFxuICAgICdcXFxcdTAxNzknOiAnWicsXFxyXFxuICAgICdcXFxcdTFFOTAnOiAnWicsXFxyXFxuICAgICdcXFxcdTAxN0InOiAnWicsXFxyXFxuICAgICdcXFxcdTAxN0QnOiAnWicsXFxyXFxuICAgICdcXFxcdTFFOTInOiAnWicsXFxyXFxuICAgICdcXFxcdTFFOTQnOiAnWicsXFxyXFxuICAgICdcXFxcdTAxQjUnOiAnWicsXFxyXFxuICAgICdcXFxcdTAyMjQnOiAnWicsXFxyXFxuICAgICdcXFxcdTJDN0YnOiAnWicsXFxyXFxuICAgICdcXFxcdTJDNkInOiAnWicsXFxyXFxuICAgICdcXFxcdUE3NjInOiAnWicsXFxyXFxuICAgICdcXFxcdTI0RDAnOiAnYScsXFxyXFxuICAgICdcXFxcdUZGNDEnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFOUEnOiAnYScsXFxyXFxuICAgICdcXFxcdTAwRTAnOiAnYScsXFxyXFxuICAgICdcXFxcdTAwRTEnOiAnYScsXFxyXFxuICAgICdcXFxcdTAwRTInOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQTcnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQTUnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQUInOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQTknOiAnYScsXFxyXFxuICAgICdcXFxcdTAwRTMnOiAnYScsXFxyXFxuICAgICdcXFxcdTAxMDEnOiAnYScsXFxyXFxuICAgICdcXFxcdTAxMDMnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQjEnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQUYnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQjUnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQjMnOiAnYScsXFxyXFxuICAgICdcXFxcdTAyMjcnOiAnYScsXFxyXFxuICAgICdcXFxcdTAxRTEnOiAnYScsXFxyXFxuICAgICdcXFxcdTAwRTQnOiAnYScsXFxyXFxuICAgICdcXFxcdTAxREYnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQTMnOiAnYScsXFxyXFxuICAgICdcXFxcdTAwRTUnOiAnYScsXFxyXFxuICAgICdcXFxcdTAxRkInOiAnYScsXFxyXFxuICAgICdcXFxcdTAxQ0UnOiAnYScsXFxyXFxuICAgICdcXFxcdTAyMDEnOiAnYScsXFxyXFxuICAgICdcXFxcdTAyMDMnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQTEnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQUQnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFQjcnOiAnYScsXFxyXFxuICAgICdcXFxcdTFFMDEnOiAnYScsXFxyXFxuICAgICdcXFxcdTAxMDUnOiAnYScsXFxyXFxuICAgICdcXFxcdTJDNjUnOiAnYScsXFxyXFxuICAgICdcXFxcdTAyNTAnOiAnYScsXFxyXFxuICAgICdcXFxcdUE3MzMnOiAnYWEnLFxcclxcbiAgICAnXFxcXHUwMEU2JzogJ2FlJyxcXHJcXG4gICAgJ1xcXFx1MDFGRCc6ICdhZScsXFxyXFxuICAgICdcXFxcdTAxRTMnOiAnYWUnLFxcclxcbiAgICAnXFxcXHVBNzM1JzogJ2FvJyxcXHJcXG4gICAgJ1xcXFx1QTczNyc6ICdhdScsXFxyXFxuICAgICdcXFxcdUE3MzknOiAnYXYnLFxcclxcbiAgICAnXFxcXHVBNzNCJzogJ2F2JyxcXHJcXG4gICAgJ1xcXFx1QTczRCc6ICdheScsXFxyXFxuICAgICdcXFxcdTI0RDEnOiAnYicsXFxyXFxuICAgICdcXFxcdUZGNDInOiAnYicsXFxyXFxuICAgICdcXFxcdTFFMDMnOiAnYicsXFxyXFxuICAgICdcXFxcdTFFMDUnOiAnYicsXFxyXFxuICAgICdcXFxcdTFFMDcnOiAnYicsXFxyXFxuICAgICdcXFxcdTAxODAnOiAnYicsXFxyXFxuICAgICdcXFxcdTAxODMnOiAnYicsXFxyXFxuICAgICdcXFxcdTAyNTMnOiAnYicsXFxyXFxuICAgICdcXFxcdTI0RDInOiAnYycsXFxyXFxuICAgICdcXFxcdUZGNDMnOiAnYycsXFxyXFxuICAgICdcXFxcdTAxMDcnOiAnYycsXFxyXFxuICAgICdcXFxcdTAxMDknOiAnYycsXFxyXFxuICAgICdcXFxcdTAxMEInOiAnYycsXFxyXFxuICAgICdcXFxcdTAxMEQnOiAnYycsXFxyXFxuICAgICdcXFxcdTAwRTcnOiAnYycsXFxyXFxuICAgICdcXFxcdTFFMDknOiAnYycsXFxyXFxuICAgICdcXFxcdTAxODgnOiAnYycsXFxyXFxuICAgICdcXFxcdTAyM0MnOiAnYycsXFxyXFxuICAgICdcXFxcdUE3M0YnOiAnYycsXFxyXFxuICAgICdcXFxcdTIxODQnOiAnYycsXFxyXFxuICAgICdcXFxcdTI0RDMnOiAnZCcsXFxyXFxuICAgICdcXFxcdUZGNDQnOiAnZCcsXFxyXFxuICAgICdcXFxcdTFFMEInOiAnZCcsXFxyXFxuICAgICdcXFxcdTAxMEYnOiAnZCcsXFxyXFxuICAgICdcXFxcdTFFMEQnOiAnZCcsXFxyXFxuICAgICdcXFxcdTFFMTEnOiAnZCcsXFxyXFxuICAgICdcXFxcdTFFMTMnOiAnZCcsXFxyXFxuICAgICdcXFxcdTFFMEYnOiAnZCcsXFxyXFxuICAgICdcXFxcdTAxMTEnOiAnZCcsXFxyXFxuICAgICdcXFxcdTAxOEMnOiAnZCcsXFxyXFxuICAgICdcXFxcdTAyNTYnOiAnZCcsXFxyXFxuICAgICdcXFxcdTAyNTcnOiAnZCcsXFxyXFxuICAgICdcXFxcdUE3N0EnOiAnZCcsXFxyXFxuICAgICdcXFxcdTAxRjMnOiAnZHonLFxcclxcbiAgICAnXFxcXHUwMUM2JzogJ2R6JyxcXHJcXG4gICAgJ1xcXFx1MjRENCc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1RkY0NSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDBFOCc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDBFOSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDBFQSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUVDMSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUVCRic6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUVDNSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUVDMyc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUVCRCc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDExMyc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUUxNSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUUxNyc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDExNSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDExNyc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDBFQic6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUVCQic6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDExQic6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDIwNSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDIwNyc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUVCOSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUVDNyc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDIyOSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUUxRCc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDExOSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUUxOSc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MUUxQic6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDI0Nyc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDI1Qic6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MDFERCc6ICdlJyxcXHJcXG4gICAgJ1xcXFx1MjRENSc6ICdmJyxcXHJcXG4gICAgJ1xcXFx1RkY0Nic6ICdmJyxcXHJcXG4gICAgJ1xcXFx1MUUxRic6ICdmJyxcXHJcXG4gICAgJ1xcXFx1MDE5Mic6ICdmJyxcXHJcXG4gICAgJ1xcXFx1QTc3Qyc6ICdmJyxcXHJcXG4gICAgJ1xcXFx1MjRENic6ICdnJyxcXHJcXG4gICAgJ1xcXFx1RkY0Nyc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MDFGNSc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MDExRCc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MUUyMSc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MDExRic6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MDEyMSc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MDFFNyc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MDEyMyc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MDFFNSc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MDI2MCc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1QTdBMSc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MUQ3OSc6ICdnJyxcXHJcXG4gICAgJ1xcXFx1QTc3Ric6ICdnJyxcXHJcXG4gICAgJ1xcXFx1MjRENyc6ICdoJyxcXHJcXG4gICAgJ1xcXFx1RkY0OCc6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MDEyNSc6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MUUyMyc6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MUUyNyc6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MDIxRic6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MUUyNSc6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MUUyOSc6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MUUyQic6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MUU5Nic6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MDEyNyc6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MkM2OCc6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MkM3Nic6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MDI2NSc6ICdoJyxcXHJcXG4gICAgJ1xcXFx1MDE5NSc6ICdodicsXFxyXFxuICAgICdcXFxcdTI0RDgnOiAnaScsXFxyXFxuICAgICdcXFxcdUZGNDknOiAnaScsXFxyXFxuICAgICdcXFxcdTAwRUMnOiAnaScsXFxyXFxuICAgICdcXFxcdTAwRUQnOiAnaScsXFxyXFxuICAgICdcXFxcdTAwRUUnOiAnaScsXFxyXFxuICAgICdcXFxcdTAxMjknOiAnaScsXFxyXFxuICAgICdcXFxcdTAxMkInOiAnaScsXFxyXFxuICAgICdcXFxcdTAxMkQnOiAnaScsXFxyXFxuICAgICdcXFxcdTAwRUYnOiAnaScsXFxyXFxuICAgICdcXFxcdTFFMkYnOiAnaScsXFxyXFxuICAgICdcXFxcdTFFQzknOiAnaScsXFxyXFxuICAgICdcXFxcdTAxRDAnOiAnaScsXFxyXFxuICAgICdcXFxcdTAyMDknOiAnaScsXFxyXFxuICAgICdcXFxcdTAyMEInOiAnaScsXFxyXFxuICAgICdcXFxcdTFFQ0InOiAnaScsXFxyXFxuICAgICdcXFxcdTAxMkYnOiAnaScsXFxyXFxuICAgICdcXFxcdTFFMkQnOiAnaScsXFxyXFxuICAgICdcXFxcdTAyNjgnOiAnaScsXFxyXFxuICAgICdcXFxcdTAxMzEnOiAnaScsXFxyXFxuICAgICdcXFxcdTI0RDknOiAnaicsXFxyXFxuICAgICdcXFxcdUZGNEEnOiAnaicsXFxyXFxuICAgICdcXFxcdTAxMzUnOiAnaicsXFxyXFxuICAgICdcXFxcdTAxRjAnOiAnaicsXFxyXFxuICAgICdcXFxcdTAyNDknOiAnaicsXFxyXFxuICAgICdcXFxcdTI0REEnOiAnaycsXFxyXFxuICAgICdcXFxcdUZGNEInOiAnaycsXFxyXFxuICAgICdcXFxcdTFFMzEnOiAnaycsXFxyXFxuICAgICdcXFxcdTAxRTknOiAnaycsXFxyXFxuICAgICdcXFxcdTFFMzMnOiAnaycsXFxyXFxuICAgICdcXFxcdTAxMzcnOiAnaycsXFxyXFxuICAgICdcXFxcdTFFMzUnOiAnaycsXFxyXFxuICAgICdcXFxcdTAxOTknOiAnaycsXFxyXFxuICAgICdcXFxcdTJDNkEnOiAnaycsXFxyXFxuICAgICdcXFxcdUE3NDEnOiAnaycsXFxyXFxuICAgICdcXFxcdUE3NDMnOiAnaycsXFxyXFxuICAgICdcXFxcdUE3NDUnOiAnaycsXFxyXFxuICAgICdcXFxcdUE3QTMnOiAnaycsXFxyXFxuICAgICdcXFxcdTI0REInOiAnbCcsXFxyXFxuICAgICdcXFxcdUZGNEMnOiAnbCcsXFxyXFxuICAgICdcXFxcdTAxNDAnOiAnbCcsXFxyXFxuICAgICdcXFxcdTAxM0EnOiAnbCcsXFxyXFxuICAgICdcXFxcdTAxM0UnOiAnbCcsXFxyXFxuICAgICdcXFxcdTFFMzcnOiAnbCcsXFxyXFxuICAgICdcXFxcdTFFMzknOiAnbCcsXFxyXFxuICAgICdcXFxcdTAxM0MnOiAnbCcsXFxyXFxuICAgICdcXFxcdTFFM0QnOiAnbCcsXFxyXFxuICAgICdcXFxcdTFFM0InOiAnbCcsXFxyXFxuICAgICdcXFxcdTAxN0YnOiAnbCcsXFxyXFxuICAgICdcXFxcdTAxNDInOiAnbCcsXFxyXFxuICAgICdcXFxcdTAxOUEnOiAnbCcsXFxyXFxuICAgICdcXFxcdTAyNkInOiAnbCcsXFxyXFxuICAgICdcXFxcdTJDNjEnOiAnbCcsXFxyXFxuICAgICdcXFxcdUE3NDknOiAnbCcsXFxyXFxuICAgICdcXFxcdUE3ODEnOiAnbCcsXFxyXFxuICAgICdcXFxcdUE3NDcnOiAnbCcsXFxyXFxuICAgICdcXFxcdTAxQzknOiAnbGonLFxcclxcbiAgICAnXFxcXHUyNERDJzogJ20nLFxcclxcbiAgICAnXFxcXHVGRjREJzogJ20nLFxcclxcbiAgICAnXFxcXHUxRTNGJzogJ20nLFxcclxcbiAgICAnXFxcXHUxRTQxJzogJ20nLFxcclxcbiAgICAnXFxcXHUxRTQzJzogJ20nLFxcclxcbiAgICAnXFxcXHUwMjcxJzogJ20nLFxcclxcbiAgICAnXFxcXHUwMjZGJzogJ20nLFxcclxcbiAgICAnXFxcXHUyNEREJzogJ24nLFxcclxcbiAgICAnXFxcXHVGRjRFJzogJ24nLFxcclxcbiAgICAnXFxcXHUwMUY5JzogJ24nLFxcclxcbiAgICAnXFxcXHUwMTQ0JzogJ24nLFxcclxcbiAgICAnXFxcXHUwMEYxJzogJ24nLFxcclxcbiAgICAnXFxcXHUxRTQ1JzogJ24nLFxcclxcbiAgICAnXFxcXHUwMTQ4JzogJ24nLFxcclxcbiAgICAnXFxcXHUxRTQ3JzogJ24nLFxcclxcbiAgICAnXFxcXHUwMTQ2JzogJ24nLFxcclxcbiAgICAnXFxcXHUxRTRCJzogJ24nLFxcclxcbiAgICAnXFxcXHUxRTQ5JzogJ24nLFxcclxcbiAgICAnXFxcXHUwMTlFJzogJ24nLFxcclxcbiAgICAnXFxcXHUwMjcyJzogJ24nLFxcclxcbiAgICAnXFxcXHUwMTQ5JzogJ24nLFxcclxcbiAgICAnXFxcXHVBNzkxJzogJ24nLFxcclxcbiAgICAnXFxcXHVBN0E1JzogJ24nLFxcclxcbiAgICAnXFxcXHUwMUNDJzogJ25qJyxcXHJcXG4gICAgJ1xcXFx1MjRERSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1RkY0Ric6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDBGMic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDBGMyc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDBGNCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVEMyc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVEMSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVENyc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVENSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDBGNSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUU0RCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDIyRCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUU0Ric6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDE0RCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUU1MSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUU1Myc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDE0Ric6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDIyRic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDIzMSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDBGNic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDIyQic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVDRic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDE1MSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDFEMic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDIwRCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDIwRic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDFBMSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVERCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVEQic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVFMSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVERic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVFMyc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVDRCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MUVEOSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDFFQic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDFFRCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDBGOCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDFGRic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDI1NCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1QTc0Qic6ICdvJyxcXHJcXG4gICAgJ1xcXFx1QTc0RCc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDI3NSc6ICdvJyxcXHJcXG4gICAgJ1xcXFx1MDFBMyc6ICdvaScsXFxyXFxuICAgICdcXFxcdTAyMjMnOiAnb3UnLFxcclxcbiAgICAnXFxcXHVBNzRGJzogJ29vJyxcXHJcXG4gICAgJ1xcXFx1MjRERic6ICdwJyxcXHJcXG4gICAgJ1xcXFx1RkY1MCc6ICdwJyxcXHJcXG4gICAgJ1xcXFx1MUU1NSc6ICdwJyxcXHJcXG4gICAgJ1xcXFx1MUU1Nyc6ICdwJyxcXHJcXG4gICAgJ1xcXFx1MDFBNSc6ICdwJyxcXHJcXG4gICAgJ1xcXFx1MUQ3RCc6ICdwJyxcXHJcXG4gICAgJ1xcXFx1QTc1MSc6ICdwJyxcXHJcXG4gICAgJ1xcXFx1QTc1Myc6ICdwJyxcXHJcXG4gICAgJ1xcXFx1QTc1NSc6ICdwJyxcXHJcXG4gICAgJ1xcXFx1MjRFMCc6ICdxJyxcXHJcXG4gICAgJ1xcXFx1RkY1MSc6ICdxJyxcXHJcXG4gICAgJ1xcXFx1MDI0Qic6ICdxJyxcXHJcXG4gICAgJ1xcXFx1QTc1Nyc6ICdxJyxcXHJcXG4gICAgJ1xcXFx1QTc1OSc6ICdxJyxcXHJcXG4gICAgJ1xcXFx1MjRFMSc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1RkY1Mic6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MDE1NSc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MUU1OSc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MDE1OSc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MDIxMSc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MDIxMyc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MUU1Qic6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MUU1RCc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MDE1Nyc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MUU1Ric6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MDI0RCc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MDI3RCc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1QTc1Qic6ICdyJyxcXHJcXG4gICAgJ1xcXFx1QTdBNyc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1QTc4Myc6ICdyJyxcXHJcXG4gICAgJ1xcXFx1MjRFMic6ICdzJyxcXHJcXG4gICAgJ1xcXFx1RkY1Myc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MDBERic6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MDE1Qic6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MUU2NSc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MDE1RCc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MUU2MSc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MDE2MSc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MUU2Nyc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MUU2Myc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MUU2OSc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MDIxOSc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MDE1Ric6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MDIzRic6ICdzJyxcXHJcXG4gICAgJ1xcXFx1QTdBOSc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1QTc4NSc6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MUU5Qic6ICdzJyxcXHJcXG4gICAgJ1xcXFx1MjRFMyc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1RkY1NCc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MUU2Qic6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MUU5Nyc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MDE2NSc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MUU2RCc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MDIxQic6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MDE2Myc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MUU3MSc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MUU2Ric6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MDE2Nyc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MDFBRCc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MDI4OCc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1MkM2Nic6ICd0JyxcXHJcXG4gICAgJ1xcXFx1QTc4Nyc6ICd0JyxcXHJcXG4gICAgJ1xcXFx1QTcyOSc6ICd0eicsXFxyXFxuICAgICdcXFxcdTI0RTQnOiAndScsXFxyXFxuICAgICdcXFxcdUZGNTUnOiAndScsXFxyXFxuICAgICdcXFxcdTAwRjknOiAndScsXFxyXFxuICAgICdcXFxcdTAwRkEnOiAndScsXFxyXFxuICAgICdcXFxcdTAwRkInOiAndScsXFxyXFxuICAgICdcXFxcdTAxNjknOiAndScsXFxyXFxuICAgICdcXFxcdTFFNzknOiAndScsXFxyXFxuICAgICdcXFxcdTAxNkInOiAndScsXFxyXFxuICAgICdcXFxcdTFFN0InOiAndScsXFxyXFxuICAgICdcXFxcdTAxNkQnOiAndScsXFxyXFxuICAgICdcXFxcdTAwRkMnOiAndScsXFxyXFxuICAgICdcXFxcdTAxREMnOiAndScsXFxyXFxuICAgICdcXFxcdTAxRDgnOiAndScsXFxyXFxuICAgICdcXFxcdTAxRDYnOiAndScsXFxyXFxuICAgICdcXFxcdTAxREEnOiAndScsXFxyXFxuICAgICdcXFxcdTFFRTcnOiAndScsXFxyXFxuICAgICdcXFxcdTAxNkYnOiAndScsXFxyXFxuICAgICdcXFxcdTAxNzEnOiAndScsXFxyXFxuICAgICdcXFxcdTAxRDQnOiAndScsXFxyXFxuICAgICdcXFxcdTAyMTUnOiAndScsXFxyXFxuICAgICdcXFxcdTAyMTcnOiAndScsXFxyXFxuICAgICdcXFxcdTAxQjAnOiAndScsXFxyXFxuICAgICdcXFxcdTFFRUInOiAndScsXFxyXFxuICAgICdcXFxcdTFFRTknOiAndScsXFxyXFxuICAgICdcXFxcdTFFRUYnOiAndScsXFxyXFxuICAgICdcXFxcdTFFRUQnOiAndScsXFxyXFxuICAgICdcXFxcdTFFRjEnOiAndScsXFxyXFxuICAgICdcXFxcdTFFRTUnOiAndScsXFxyXFxuICAgICdcXFxcdTFFNzMnOiAndScsXFxyXFxuICAgICdcXFxcdTAxNzMnOiAndScsXFxyXFxuICAgICdcXFxcdTFFNzcnOiAndScsXFxyXFxuICAgICdcXFxcdTFFNzUnOiAndScsXFxyXFxuICAgICdcXFxcdTAyODknOiAndScsXFxyXFxuICAgICdcXFxcdTI0RTUnOiAndicsXFxyXFxuICAgICdcXFxcdUZGNTYnOiAndicsXFxyXFxuICAgICdcXFxcdTFFN0QnOiAndicsXFxyXFxuICAgICdcXFxcdTFFN0YnOiAndicsXFxyXFxuICAgICdcXFxcdTAyOEInOiAndicsXFxyXFxuICAgICdcXFxcdUE3NUYnOiAndicsXFxyXFxuICAgICdcXFxcdTAyOEMnOiAndicsXFxyXFxuICAgICdcXFxcdUE3NjEnOiAndnknLFxcclxcbiAgICAnXFxcXHUyNEU2JzogJ3cnLFxcclxcbiAgICAnXFxcXHVGRjU3JzogJ3cnLFxcclxcbiAgICAnXFxcXHUxRTgxJzogJ3cnLFxcclxcbiAgICAnXFxcXHUxRTgzJzogJ3cnLFxcclxcbiAgICAnXFxcXHUwMTc1JzogJ3cnLFxcclxcbiAgICAnXFxcXHUxRTg3JzogJ3cnLFxcclxcbiAgICAnXFxcXHUxRTg1JzogJ3cnLFxcclxcbiAgICAnXFxcXHUxRTk4JzogJ3cnLFxcclxcbiAgICAnXFxcXHUxRTg5JzogJ3cnLFxcclxcbiAgICAnXFxcXHUyQzczJzogJ3cnLFxcclxcbiAgICAnXFxcXHUyNEU3JzogJ3gnLFxcclxcbiAgICAnXFxcXHVGRjU4JzogJ3gnLFxcclxcbiAgICAnXFxcXHUxRThCJzogJ3gnLFxcclxcbiAgICAnXFxcXHUxRThEJzogJ3gnLFxcclxcbiAgICAnXFxcXHUyNEU4JzogJ3knLFxcclxcbiAgICAnXFxcXHVGRjU5JzogJ3knLFxcclxcbiAgICAnXFxcXHUxRUYzJzogJ3knLFxcclxcbiAgICAnXFxcXHUwMEZEJzogJ3knLFxcclxcbiAgICAnXFxcXHUwMTc3JzogJ3knLFxcclxcbiAgICAnXFxcXHUxRUY5JzogJ3knLFxcclxcbiAgICAnXFxcXHUwMjMzJzogJ3knLFxcclxcbiAgICAnXFxcXHUxRThGJzogJ3knLFxcclxcbiAgICAnXFxcXHUwMEZGJzogJ3knLFxcclxcbiAgICAnXFxcXHUxRUY3JzogJ3knLFxcclxcbiAgICAnXFxcXHUxRTk5JzogJ3knLFxcclxcbiAgICAnXFxcXHUxRUY1JzogJ3knLFxcclxcbiAgICAnXFxcXHUwMUI0JzogJ3knLFxcclxcbiAgICAnXFxcXHUwMjRGJzogJ3knLFxcclxcbiAgICAnXFxcXHUxRUZGJzogJ3knLFxcclxcbiAgICAnXFxcXHUyNEU5JzogJ3onLFxcclxcbiAgICAnXFxcXHVGRjVBJzogJ3onLFxcclxcbiAgICAnXFxcXHUwMTdBJzogJ3onLFxcclxcbiAgICAnXFxcXHUxRTkxJzogJ3onLFxcclxcbiAgICAnXFxcXHUwMTdDJzogJ3onLFxcclxcbiAgICAnXFxcXHUwMTdFJzogJ3onLFxcclxcbiAgICAnXFxcXHUxRTkzJzogJ3onLFxcclxcbiAgICAnXFxcXHUxRTk1JzogJ3onLFxcclxcbiAgICAnXFxcXHUwMUI2JzogJ3onLFxcclxcbiAgICAnXFxcXHUwMjI1JzogJ3onLFxcclxcbiAgICAnXFxcXHUwMjQwJzogJ3onLFxcclxcbiAgICAnXFxcXHUyQzZDJzogJ3onLFxcclxcbiAgICAnXFxcXHVBNzYzJzogJ3onLFxcclxcbiAgICAnXFxcXHUwMzg2JzogJ1xcXFx1MDM5MScsXFxyXFxuICAgICdcXFxcdTAzODgnOiAnXFxcXHUwMzk1JyxcXHJcXG4gICAgJ1xcXFx1MDM4OSc6ICdcXFxcdTAzOTcnLFxcclxcbiAgICAnXFxcXHUwMzhBJzogJ1xcXFx1MDM5OScsXFxyXFxuICAgICdcXFxcdTAzQUEnOiAnXFxcXHUwMzk5JyxcXHJcXG4gICAgJ1xcXFx1MDM4Qyc6ICdcXFxcdTAzOUYnLFxcclxcbiAgICAnXFxcXHUwMzhFJzogJ1xcXFx1MDNBNScsXFxyXFxuICAgICdcXFxcdTAzQUInOiAnXFxcXHUwM0E1JyxcXHJcXG4gICAgJ1xcXFx1MDM4Ric6ICdcXFxcdTAzQTknLFxcclxcbiAgICAnXFxcXHUwM0FDJzogJ1xcXFx1MDNCMScsXFxyXFxuICAgICdcXFxcdTAzQUQnOiAnXFxcXHUwM0I1JyxcXHJcXG4gICAgJ1xcXFx1MDNBRSc6ICdcXFxcdTAzQjcnLFxcclxcbiAgICAnXFxcXHUwM0FGJzogJ1xcXFx1MDNCOScsXFxyXFxuICAgICdcXFxcdTAzQ0EnOiAnXFxcXHUwM0I5JyxcXHJcXG4gICAgJ1xcXFx1MDM5MCc6ICdcXFxcdTAzQjknLFxcclxcbiAgICAnXFxcXHUwM0NDJzogJ1xcXFx1MDNCRicsXFxyXFxuICAgICdcXFxcdTAzQ0QnOiAnXFxcXHUwM0M1JyxcXHJcXG4gICAgJ1xcXFx1MDNDQic6ICdcXFxcdTAzQzUnLFxcclxcbiAgICAnXFxcXHUwM0IwJzogJ1xcXFx1MDNDNScsXFxyXFxuICAgICdcXFxcdTAzQzknOiAnXFxcXHUwM0M5JyxcXHJcXG4gICAgJ1xcXFx1MDNDMic6ICdcXFxcdTAzQzMnXFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIGRpYWNyaXRpY3M7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL2RhdGEvYmFzZScsW1xcclxcbiAgJy4uL3V0aWxzJ1xcclxcbl0sIGZ1bmN0aW9uIChVdGlscykge1xcclxcbiAgZnVuY3Rpb24gQmFzZUFkYXB0ZXIgKCRlbGVtZW50LCBvcHRpb25zKSB7XFxyXFxuICAgIEJhc2VBZGFwdGVyLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xcclxcbiAgfVxcclxcblxcclxcbiAgVXRpbHMuRXh0ZW5kKEJhc2VBZGFwdGVyLCBVdGlscy5PYnNlcnZhYmxlKTtcXHJcXG5cXHJcXG4gIEJhc2VBZGFwdGVyLnByb3RvdHlwZS5jdXJyZW50ID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XFxyXFxuICAgIHRocm93IG5ldyBFcnJvcignVGhlIGBjdXJyZW50YCBtZXRob2QgbXVzdCBiZSBkZWZpbmVkIGluIGNoaWxkIGNsYXNzZXMuJyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQmFzZUFkYXB0ZXIucHJvdG90eXBlLnF1ZXJ5ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHtcXHJcXG4gICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgYHF1ZXJ5YCBtZXRob2QgbXVzdCBiZSBkZWZpbmVkIGluIGNoaWxkIGNsYXNzZXMuJyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQmFzZUFkYXB0ZXIucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIC8vIENhbiBiZSBpbXBsZW1lbnRlZCBpbiBzdWJjbGFzc2VzXFxyXFxuICB9O1xcclxcblxcclxcbiAgQmFzZUFkYXB0ZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIC8vIENhbiBiZSBpbXBsZW1lbnRlZCBpbiBzdWJjbGFzc2VzXFxyXFxuICB9O1xcclxcblxcclxcbiAgQmFzZUFkYXB0ZXIucHJvdG90eXBlLmdlbmVyYXRlUmVzdWx0SWQgPSBmdW5jdGlvbiAoY29udGFpbmVyLCBkYXRhKSB7XFxyXFxuICAgIHZhciBpZCA9IGNvbnRhaW5lci5pZCArICctcmVzdWx0LSc7XFxyXFxuXFxyXFxuICAgIGlkICs9IFV0aWxzLmdlbmVyYXRlQ2hhcnMoNCk7XFxyXFxuXFxyXFxuICAgIGlmIChkYXRhLmlkICE9IG51bGwpIHtcXHJcXG4gICAgICBpZCArPSAnLScgKyBkYXRhLmlkLnRvU3RyaW5nKCk7XFxyXFxuICAgIH0gZWxzZSB7XFxyXFxuICAgICAgaWQgKz0gJy0nICsgVXRpbHMuZ2VuZXJhdGVDaGFycyg0KTtcXHJcXG4gICAgfVxcclxcbiAgICByZXR1cm4gaWQ7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIEJhc2VBZGFwdGVyO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9kYXRhL3NlbGVjdCcsW1xcclxcbiAgJy4vYmFzZScsXFxyXFxuICAnLi4vdXRpbHMnLFxcclxcbiAgJ2pxdWVyeSdcXHJcXG5dLCBmdW5jdGlvbiAoQmFzZUFkYXB0ZXIsIFV0aWxzLCAkKSB7XFxyXFxuICBmdW5jdGlvbiBTZWxlY3RBZGFwdGVyICgkZWxlbWVudCwgb3B0aW9ucykge1xcclxcbiAgICB0aGlzLiRlbGVtZW50ID0gJGVsZW1lbnQ7XFxyXFxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XFxyXFxuXFxyXFxuICAgIFNlbGVjdEFkYXB0ZXIuX19zdXBlcl9fLmNvbnN0cnVjdG9yLmNhbGwodGhpcyk7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBVdGlscy5FeHRlbmQoU2VsZWN0QWRhcHRlciwgQmFzZUFkYXB0ZXIpO1xcclxcblxcclxcbiAgU2VsZWN0QWRhcHRlci5wcm90b3R5cGUuY3VycmVudCA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xcclxcbiAgICB2YXIgZGF0YSA9IFtdO1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIHRoaXMuJGVsZW1lbnQuZmluZCgnOnNlbGVjdGVkJykuZWFjaChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgdmFyICRvcHRpb24gPSAkKHRoaXMpO1xcclxcblxcclxcbiAgICAgIHZhciBvcHRpb24gPSBzZWxmLml0ZW0oJG9wdGlvbik7XFxyXFxuXFxyXFxuICAgICAgZGF0YS5wdXNoKG9wdGlvbik7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjYWxsYmFjayhkYXRhKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3RBZGFwdGVyLnByb3RvdHlwZS5zZWxlY3QgPSBmdW5jdGlvbiAoZGF0YSkge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIGRhdGEuc2VsZWN0ZWQgPSB0cnVlO1xcclxcblxcclxcbiAgICAvLyBJZiBkYXRhLmVsZW1lbnQgaXMgYSBET00gbm9kZSwgdXNlIGl0IGluc3RlYWRcXHJcXG4gICAgaWYgKCQoZGF0YS5lbGVtZW50KS5pcygnb3B0aW9uJykpIHtcXHJcXG4gICAgICBkYXRhLmVsZW1lbnQuc2VsZWN0ZWQgPSB0cnVlO1xcclxcblxcclxcbiAgICAgIHRoaXMuJGVsZW1lbnQudHJpZ2dlcignY2hhbmdlJyk7XFxyXFxuXFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLiRlbGVtZW50LnByb3AoJ211bHRpcGxlJykpIHtcXHJcXG4gICAgICB0aGlzLmN1cnJlbnQoZnVuY3Rpb24gKGN1cnJlbnREYXRhKSB7XFxyXFxuICAgICAgICB2YXIgdmFsID0gW107XFxyXFxuXFxyXFxuICAgICAgICBkYXRhID0gW2RhdGFdO1xcclxcbiAgICAgICAgZGF0YS5wdXNoLmFwcGx5KGRhdGEsIGN1cnJlbnREYXRhKTtcXHJcXG5cXHJcXG4gICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGF0YS5sZW5ndGg7IGQrKykge1xcclxcbiAgICAgICAgICB2YXIgaWQgPSBkYXRhW2RdLmlkO1xcclxcblxcclxcbiAgICAgICAgICBpZiAoJC5pbkFycmF5KGlkLCB2YWwpID09PSAtMSkge1xcclxcbiAgICAgICAgICAgIHZhbC5wdXNoKGlkKTtcXHJcXG4gICAgICAgICAgfVxcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgc2VsZi4kZWxlbWVudC52YWwodmFsKTtcXHJcXG4gICAgICAgIHNlbGYuJGVsZW1lbnQudHJpZ2dlcignY2hhbmdlJyk7XFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH0gZWxzZSB7XFxyXFxuICAgICAgdmFyIHZhbCA9IGRhdGEuaWQ7XFxyXFxuXFxyXFxuICAgICAgdGhpcy4kZWxlbWVudC52YWwodmFsKTtcXHJcXG4gICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ2NoYW5nZScpO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0QWRhcHRlci5wcm90b3R5cGUudW5zZWxlY3QgPSBmdW5jdGlvbiAoZGF0YSkge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIGlmICghdGhpcy4kZWxlbWVudC5wcm9wKCdtdWx0aXBsZScpKSB7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGRhdGEuc2VsZWN0ZWQgPSBmYWxzZTtcXHJcXG5cXHJcXG4gICAgaWYgKCQoZGF0YS5lbGVtZW50KS5pcygnb3B0aW9uJykpIHtcXHJcXG4gICAgICBkYXRhLmVsZW1lbnQuc2VsZWN0ZWQgPSBmYWxzZTtcXHJcXG5cXHJcXG4gICAgICB0aGlzLiRlbGVtZW50LnRyaWdnZXIoJ2NoYW5nZScpO1xcclxcblxcclxcbiAgICAgIHJldHVybjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLmN1cnJlbnQoZnVuY3Rpb24gKGN1cnJlbnREYXRhKSB7XFxyXFxuICAgICAgdmFyIHZhbCA9IFtdO1xcclxcblxcclxcbiAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgY3VycmVudERhdGEubGVuZ3RoOyBkKyspIHtcXHJcXG4gICAgICAgIHZhciBpZCA9IGN1cnJlbnREYXRhW2RdLmlkO1xcclxcblxcclxcbiAgICAgICAgaWYgKGlkICE9PSBkYXRhLmlkICYmICQuaW5BcnJheShpZCwgdmFsKSA9PT0gLTEpIHtcXHJcXG4gICAgICAgICAgdmFsLnB1c2goaWQpO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBzZWxmLiRlbGVtZW50LnZhbCh2YWwpO1xcclxcblxcclxcbiAgICAgIHNlbGYuJGVsZW1lbnQudHJpZ2dlcignY2hhbmdlJyk7XFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdEFkYXB0ZXIucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignc2VsZWN0JywgZnVuY3Rpb24gKHBhcmFtcykge1xcclxcbiAgICAgIHNlbGYuc2VsZWN0KHBhcmFtcy5kYXRhKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbigndW5zZWxlY3QnLCBmdW5jdGlvbiAocGFyYW1zKSB7XFxyXFxuICAgICAgc2VsZi51bnNlbGVjdChwYXJhbXMuZGF0YSk7XFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdEFkYXB0ZXIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIC8vIFJlbW92ZSBhbnl0aGluZyBhZGRlZCB0byBjaGlsZCBlbGVtZW50c1xcclxcbiAgICB0aGlzLiRlbGVtZW50LmZpbmQoJyonKS5lYWNoKGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAvLyBSZW1vdmUgYW55IGN1c3RvbSBkYXRhIHNldCBieSBTZWxlY3QyXFxyXFxuICAgICAgJC5yZW1vdmVEYXRhKHRoaXMsICdkYXRhJyk7XFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdEFkYXB0ZXIucHJvdG90eXBlLnF1ZXJ5ID0gZnVuY3Rpb24gKHBhcmFtcywgY2FsbGJhY2spIHtcXHJcXG4gICAgdmFyIGRhdGEgPSBbXTtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICB2YXIgJG9wdGlvbnMgPSB0aGlzLiRlbGVtZW50LmNoaWxkcmVuKCk7XFxyXFxuXFxyXFxuICAgICRvcHRpb25zLmVhY2goZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHZhciAkb3B0aW9uID0gJCh0aGlzKTtcXHJcXG5cXHJcXG4gICAgICBpZiAoISRvcHRpb24uaXMoJ29wdGlvbicpICYmICEkb3B0aW9uLmlzKCdvcHRncm91cCcpKSB7XFxyXFxuICAgICAgICByZXR1cm47XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHZhciBvcHRpb24gPSBzZWxmLml0ZW0oJG9wdGlvbik7XFxyXFxuXFxyXFxuICAgICAgdmFyIG1hdGNoZXMgPSBzZWxmLm1hdGNoZXMocGFyYW1zLCBvcHRpb24pO1xcclxcblxcclxcbiAgICAgIGlmIChtYXRjaGVzICE9PSBudWxsKSB7XFxyXFxuICAgICAgICBkYXRhLnB1c2gobWF0Y2hlcyk7XFxyXFxuICAgICAgfVxcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY2FsbGJhY2soe1xcclxcbiAgICAgIHJlc3VsdHM6IGRhdGFcXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0QWRhcHRlci5wcm90b3R5cGUuYWRkT3B0aW9ucyA9IGZ1bmN0aW9uICgkb3B0aW9ucykge1xcclxcbiAgICBVdGlscy5hcHBlbmRNYW55KHRoaXMuJGVsZW1lbnQsICRvcHRpb25zKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3RBZGFwdGVyLnByb3RvdHlwZS5vcHRpb24gPSBmdW5jdGlvbiAoZGF0YSkge1xcclxcbiAgICB2YXIgb3B0aW9uO1xcclxcblxcclxcbiAgICBpZiAoZGF0YS5jaGlsZHJlbikge1xcclxcbiAgICAgIG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGdyb3VwJyk7XFxyXFxuICAgICAgb3B0aW9uLmxhYmVsID0gZGF0YS50ZXh0O1xcclxcbiAgICB9IGVsc2Uge1xcclxcbiAgICAgIG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xcclxcblxcclxcbiAgICAgIGlmIChvcHRpb24udGV4dENvbnRlbnQgIT09IHVuZGVmaW5lZCkge1xcclxcbiAgICAgICAgb3B0aW9uLnRleHRDb250ZW50ID0gZGF0YS50ZXh0O1xcclxcbiAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICBvcHRpb24uaW5uZXJUZXh0ID0gZGF0YS50ZXh0O1xcclxcbiAgICAgIH1cXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAoZGF0YS5pZCkge1xcclxcbiAgICAgIG9wdGlvbi52YWx1ZSA9IGRhdGEuaWQ7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKGRhdGEuZGlzYWJsZWQpIHtcXHJcXG4gICAgICBvcHRpb24uZGlzYWJsZWQgPSB0cnVlO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChkYXRhLnNlbGVjdGVkKSB7XFxyXFxuICAgICAgb3B0aW9uLnNlbGVjdGVkID0gdHJ1ZTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAoZGF0YS50aXRsZSkge1xcclxcbiAgICAgIG9wdGlvbi50aXRsZSA9IGRhdGEudGl0bGU7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyICRvcHRpb24gPSAkKG9wdGlvbik7XFxyXFxuXFxyXFxuICAgIHZhciBub3JtYWxpemVkRGF0YSA9IHRoaXMuX25vcm1hbGl6ZUl0ZW0oZGF0YSk7XFxyXFxuICAgIG5vcm1hbGl6ZWREYXRhLmVsZW1lbnQgPSBvcHRpb247XFxyXFxuXFxyXFxuICAgIC8vIE92ZXJyaWRlIHRoZSBvcHRpb24ncyBkYXRhIHdpdGggdGhlIGNvbWJpbmVkIGRhdGFcXHJcXG4gICAgJC5kYXRhKG9wdGlvbiwgJ2RhdGEnLCBub3JtYWxpemVkRGF0YSk7XFxyXFxuXFxyXFxuICAgIHJldHVybiAkb3B0aW9uO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdEFkYXB0ZXIucHJvdG90eXBlLml0ZW0gPSBmdW5jdGlvbiAoJG9wdGlvbikge1xcclxcbiAgICB2YXIgZGF0YSA9IHt9O1xcclxcblxcclxcbiAgICBkYXRhID0gJC5kYXRhKCRvcHRpb25bMF0sICdkYXRhJyk7XFxyXFxuXFxyXFxuICAgIGlmIChkYXRhICE9IG51bGwpIHtcXHJcXG4gICAgICByZXR1cm4gZGF0YTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAoJG9wdGlvbi5pcygnb3B0aW9uJykpIHtcXHJcXG4gICAgICBkYXRhID0ge1xcclxcbiAgICAgICAgaWQ6ICRvcHRpb24udmFsKCksXFxyXFxuICAgICAgICB0ZXh0OiAkb3B0aW9uLnRleHQoKSxcXHJcXG4gICAgICAgIGRpc2FibGVkOiAkb3B0aW9uLnByb3AoJ2Rpc2FibGVkJyksXFxyXFxuICAgICAgICBzZWxlY3RlZDogJG9wdGlvbi5wcm9wKCdzZWxlY3RlZCcpLFxcclxcbiAgICAgICAgdGl0bGU6ICRvcHRpb24ucHJvcCgndGl0bGUnKVxcclxcbiAgICAgIH07XFxyXFxuICAgIH0gZWxzZSBpZiAoJG9wdGlvbi5pcygnb3B0Z3JvdXAnKSkge1xcclxcbiAgICAgIGRhdGEgPSB7XFxyXFxuICAgICAgICB0ZXh0OiAkb3B0aW9uLnByb3AoJ2xhYmVsJyksXFxyXFxuICAgICAgICBjaGlsZHJlbjogW10sXFxyXFxuICAgICAgICB0aXRsZTogJG9wdGlvbi5wcm9wKCd0aXRsZScpXFxyXFxuICAgICAgfTtcXHJcXG5cXHJcXG4gICAgICB2YXIgJGNoaWxkcmVuID0gJG9wdGlvbi5jaGlsZHJlbignb3B0aW9uJyk7XFxyXFxuICAgICAgdmFyIGNoaWxkcmVuID0gW107XFxyXFxuXFxyXFxuICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCAkY2hpbGRyZW4ubGVuZ3RoOyBjKyspIHtcXHJcXG4gICAgICAgIHZhciAkY2hpbGQgPSAkKCRjaGlsZHJlbltjXSk7XFxyXFxuXFxyXFxuICAgICAgICB2YXIgY2hpbGQgPSB0aGlzLml0ZW0oJGNoaWxkKTtcXHJcXG5cXHJcXG4gICAgICAgIGNoaWxkcmVuLnB1c2goY2hpbGQpO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBkYXRhLmNoaWxkcmVuID0gY2hpbGRyZW47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZGF0YSA9IHRoaXMuX25vcm1hbGl6ZUl0ZW0oZGF0YSk7XFxyXFxuICAgIGRhdGEuZWxlbWVudCA9ICRvcHRpb25bMF07XFxyXFxuXFxyXFxuICAgICQuZGF0YSgkb3B0aW9uWzBdLCAnZGF0YScsIGRhdGEpO1xcclxcblxcclxcbiAgICByZXR1cm4gZGF0YTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3RBZGFwdGVyLnByb3RvdHlwZS5fbm9ybWFsaXplSXRlbSA9IGZ1bmN0aW9uIChpdGVtKSB7XFxyXFxuICAgIGlmICghJC5pc1BsYWluT2JqZWN0KGl0ZW0pKSB7XFxyXFxuICAgICAgaXRlbSA9IHtcXHJcXG4gICAgICAgIGlkOiBpdGVtLFxcclxcbiAgICAgICAgdGV4dDogaXRlbVxcclxcbiAgICAgIH07XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaXRlbSA9ICQuZXh0ZW5kKHt9LCB7XFxyXFxuICAgICAgdGV4dDogJydcXHJcXG4gICAgfSwgaXRlbSk7XFxyXFxuXFxyXFxuICAgIHZhciBkZWZhdWx0cyA9IHtcXHJcXG4gICAgICBzZWxlY3RlZDogZmFsc2UsXFxyXFxuICAgICAgZGlzYWJsZWQ6IGZhbHNlXFxyXFxuICAgIH07XFxyXFxuXFxyXFxuICAgIGlmIChpdGVtLmlkICE9IG51bGwpIHtcXHJcXG4gICAgICBpdGVtLmlkID0gaXRlbS5pZC50b1N0cmluZygpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChpdGVtLnRleHQgIT0gbnVsbCkge1xcclxcbiAgICAgIGl0ZW0udGV4dCA9IGl0ZW0udGV4dC50b1N0cmluZygpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChpdGVtLl9yZXN1bHRJZCA9PSBudWxsICYmIGl0ZW0uaWQgJiYgdGhpcy5jb250YWluZXIgIT0gbnVsbCkge1xcclxcbiAgICAgIGl0ZW0uX3Jlc3VsdElkID0gdGhpcy5nZW5lcmF0ZVJlc3VsdElkKHRoaXMuY29udGFpbmVyLCBpdGVtKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICByZXR1cm4gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBpdGVtKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3RBZGFwdGVyLnByb3RvdHlwZS5tYXRjaGVzID0gZnVuY3Rpb24gKHBhcmFtcywgZGF0YSkge1xcclxcbiAgICB2YXIgbWF0Y2hlciA9IHRoaXMub3B0aW9ucy5nZXQoJ21hdGNoZXInKTtcXHJcXG5cXHJcXG4gICAgcmV0dXJuIG1hdGNoZXIocGFyYW1zLCBkYXRhKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gU2VsZWN0QWRhcHRlcjtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZGF0YS9hcnJheScsW1xcclxcbiAgJy4vc2VsZWN0JyxcXHJcXG4gICcuLi91dGlscycsXFxyXFxuICAnanF1ZXJ5J1xcclxcbl0sIGZ1bmN0aW9uIChTZWxlY3RBZGFwdGVyLCBVdGlscywgJCkge1xcclxcbiAgZnVuY3Rpb24gQXJyYXlBZGFwdGVyICgkZWxlbWVudCwgb3B0aW9ucykge1xcclxcbiAgICB2YXIgZGF0YSA9IG9wdGlvbnMuZ2V0KCdkYXRhJykgfHwgW107XFxyXFxuXFxyXFxuICAgIEFycmF5QWRhcHRlci5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzLCAkZWxlbWVudCwgb3B0aW9ucyk7XFxyXFxuXFxyXFxuICAgIHRoaXMuYWRkT3B0aW9ucyh0aGlzLmNvbnZlcnRUb09wdGlvbnMoZGF0YSkpO1xcclxcbiAgfVxcclxcblxcclxcbiAgVXRpbHMuRXh0ZW5kKEFycmF5QWRhcHRlciwgU2VsZWN0QWRhcHRlcik7XFxyXFxuXFxyXFxuICBBcnJheUFkYXB0ZXIucHJvdG90eXBlLnNlbGVjdCA9IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgIHZhciAkb3B0aW9uID0gdGhpcy4kZWxlbWVudC5maW5kKCdvcHRpb24nKS5maWx0ZXIoZnVuY3Rpb24gKGksIGVsbSkge1xcclxcbiAgICAgIHJldHVybiBlbG0udmFsdWUgPT0gZGF0YS5pZC50b1N0cmluZygpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgaWYgKCRvcHRpb24ubGVuZ3RoID09PSAwKSB7XFxyXFxuICAgICAgJG9wdGlvbiA9IHRoaXMub3B0aW9uKGRhdGEpO1xcclxcblxcclxcbiAgICAgIHRoaXMuYWRkT3B0aW9ucygkb3B0aW9uKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBBcnJheUFkYXB0ZXIuX19zdXBlcl9fLnNlbGVjdC5jYWxsKHRoaXMsIGRhdGEpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEFycmF5QWRhcHRlci5wcm90b3R5cGUuY29udmVydFRvT3B0aW9ucyA9IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgdmFyICRleGlzdGluZyA9IHRoaXMuJGVsZW1lbnQuZmluZCgnb3B0aW9uJyk7XFxyXFxuICAgIHZhciBleGlzdGluZ0lkcyA9ICRleGlzdGluZy5tYXAoZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHJldHVybiBzZWxmLml0ZW0oJCh0aGlzKSkuaWQ7XFxyXFxuICAgIH0pLmdldCgpO1xcclxcblxcclxcbiAgICB2YXIgJG9wdGlvbnMgPSBbXTtcXHJcXG5cXHJcXG4gICAgLy8gRmlsdGVyIG91dCBhbGwgaXRlbXMgZXhjZXB0IGZvciB0aGUgb25lIHBhc3NlZCBpbiB0aGUgYXJndW1lbnRcXHJcXG4gICAgZnVuY3Rpb24gb25seUl0ZW0gKGl0ZW0pIHtcXHJcXG4gICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgcmV0dXJuICQodGhpcykudmFsKCkgPT0gaXRlbS5pZDtcXHJcXG4gICAgICB9O1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGF0YS5sZW5ndGg7IGQrKykge1xcclxcbiAgICAgIHZhciBpdGVtID0gdGhpcy5fbm9ybWFsaXplSXRlbShkYXRhW2RdKTtcXHJcXG5cXHJcXG4gICAgICAvLyBTa2lwIGl0ZW1zIHdoaWNoIHdlcmUgcHJlLWxvYWRlZCwgb25seSBtZXJnZSB0aGUgZGF0YVxcclxcbiAgICAgIGlmICgkLmluQXJyYXkoaXRlbS5pZCwgZXhpc3RpbmdJZHMpID49IDApIHtcXHJcXG4gICAgICAgIHZhciAkZXhpc3RpbmdPcHRpb24gPSAkZXhpc3RpbmcuZmlsdGVyKG9ubHlJdGVtKGl0ZW0pKTtcXHJcXG5cXHJcXG4gICAgICAgIHZhciBleGlzdGluZ0RhdGEgPSB0aGlzLml0ZW0oJGV4aXN0aW5nT3B0aW9uKTtcXHJcXG4gICAgICAgIHZhciBuZXdEYXRhID0gJC5leHRlbmQodHJ1ZSwge30sIGl0ZW0sIGV4aXN0aW5nRGF0YSk7XFxyXFxuXFxyXFxuICAgICAgICB2YXIgJG5ld09wdGlvbiA9IHRoaXMub3B0aW9uKG5ld0RhdGEpO1xcclxcblxcclxcbiAgICAgICAgJGV4aXN0aW5nT3B0aW9uLnJlcGxhY2VXaXRoKCRuZXdPcHRpb24pO1xcclxcblxcclxcbiAgICAgICAgY29udGludWU7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHZhciAkb3B0aW9uID0gdGhpcy5vcHRpb24oaXRlbSk7XFxyXFxuXFxyXFxuICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHtcXHJcXG4gICAgICAgIHZhciAkY2hpbGRyZW4gPSB0aGlzLmNvbnZlcnRUb09wdGlvbnMoaXRlbS5jaGlsZHJlbik7XFxyXFxuXFxyXFxuICAgICAgICBVdGlscy5hcHBlbmRNYW55KCRvcHRpb24sICRjaGlsZHJlbik7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgICRvcHRpb25zLnB1c2goJG9wdGlvbik7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuICRvcHRpb25zO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBBcnJheUFkYXB0ZXI7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL2RhdGEvYWpheCcsW1xcclxcbiAgJy4vYXJyYXknLFxcclxcbiAgJy4uL3V0aWxzJyxcXHJcXG4gICdqcXVlcnknXFxyXFxuXSwgZnVuY3Rpb24gKEFycmF5QWRhcHRlciwgVXRpbHMsICQpIHtcXHJcXG4gIGZ1bmN0aW9uIEFqYXhBZGFwdGVyICgkZWxlbWVudCwgb3B0aW9ucykge1xcclxcbiAgICB0aGlzLmFqYXhPcHRpb25zID0gdGhpcy5fYXBwbHlEZWZhdWx0cyhvcHRpb25zLmdldCgnYWpheCcpKTtcXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMuYWpheE9wdGlvbnMucHJvY2Vzc1Jlc3VsdHMgIT0gbnVsbCkge1xcclxcbiAgICAgIHRoaXMucHJvY2Vzc1Jlc3VsdHMgPSB0aGlzLmFqYXhPcHRpb25zLnByb2Nlc3NSZXN1bHRzO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIEFqYXhBZGFwdGVyLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsICRlbGVtZW50LCBvcHRpb25zKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIFV0aWxzLkV4dGVuZChBamF4QWRhcHRlciwgQXJyYXlBZGFwdGVyKTtcXHJcXG5cXHJcXG4gIEFqYXhBZGFwdGVyLnByb3RvdHlwZS5fYXBwbHlEZWZhdWx0cyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XFxyXFxuICAgIHZhciBkZWZhdWx0cyA9IHtcXHJcXG4gICAgICBkYXRhOiBmdW5jdGlvbiAocGFyYW1zKSB7XFxyXFxuICAgICAgICByZXR1cm4gJC5leHRlbmQoe30sIHBhcmFtcywge1xcclxcbiAgICAgICAgICBxOiBwYXJhbXMudGVybVxcclxcbiAgICAgICAgfSk7XFxyXFxuICAgICAgfSxcXHJcXG4gICAgICB0cmFuc3BvcnQ6IGZ1bmN0aW9uIChwYXJhbXMsIHN1Y2Nlc3MsIGZhaWx1cmUpIHtcXHJcXG4gICAgICAgIHZhciAkcmVxdWVzdCA9ICQuYWpheChwYXJhbXMpO1xcclxcblxcclxcbiAgICAgICAgJHJlcXVlc3QudGhlbihzdWNjZXNzKTtcXHJcXG4gICAgICAgICRyZXF1ZXN0LmZhaWwoZmFpbHVyZSk7XFxyXFxuXFxyXFxuICAgICAgICByZXR1cm4gJHJlcXVlc3Q7XFxyXFxuICAgICAgfVxcclxcbiAgICB9O1xcclxcblxcclxcbiAgICByZXR1cm4gJC5leHRlbmQoe30sIGRlZmF1bHRzLCBvcHRpb25zLCB0cnVlKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBBamF4QWRhcHRlci5wcm90b3R5cGUucHJvY2Vzc1Jlc3VsdHMgPSBmdW5jdGlvbiAocmVzdWx0cykge1xcclxcbiAgICByZXR1cm4gcmVzdWx0cztcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBBamF4QWRhcHRlci5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbiAocGFyYW1zLCBjYWxsYmFjaykge1xcclxcbiAgICB2YXIgbWF0Y2hlcyA9IFtdO1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLl9yZXF1ZXN0ICE9IG51bGwpIHtcXHJcXG4gICAgICAvLyBKU09OUCByZXF1ZXN0cyBjYW5ub3QgYWx3YXlzIGJlIGFib3J0ZWRcXHJcXG4gICAgICBpZiAoJC5pc0Z1bmN0aW9uKHRoaXMuX3JlcXVlc3QuYWJvcnQpKSB7XFxyXFxuICAgICAgICB0aGlzLl9yZXF1ZXN0LmFib3J0KCk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHRoaXMuX3JlcXVlc3QgPSBudWxsO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHZhciBvcHRpb25zID0gJC5leHRlbmQoe1xcclxcbiAgICAgIHR5cGU6ICdHRVQnXFxyXFxuICAgIH0sIHRoaXMuYWpheE9wdGlvbnMpO1xcclxcblxcclxcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMudXJsID09PSAnZnVuY3Rpb24nKSB7XFxyXFxuICAgICAgb3B0aW9ucy51cmwgPSBvcHRpb25zLnVybC5jYWxsKHRoaXMuJGVsZW1lbnQsIHBhcmFtcyk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmRhdGEgPT09ICdmdW5jdGlvbicpIHtcXHJcXG4gICAgICBvcHRpb25zLmRhdGEgPSBvcHRpb25zLmRhdGEuY2FsbCh0aGlzLiRlbGVtZW50LCBwYXJhbXMpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGZ1bmN0aW9uIHJlcXVlc3QgKCkge1xcclxcbiAgICAgIHZhciAkcmVxdWVzdCA9IG9wdGlvbnMudHJhbnNwb3J0KG9wdGlvbnMsIGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgICAgICB2YXIgcmVzdWx0cyA9IHNlbGYucHJvY2Vzc1Jlc3VsdHMoZGF0YSwgcGFyYW1zKTtcXHJcXG5cXHJcXG4gICAgICAgIGlmIChzZWxmLm9wdGlvbnMuZ2V0KCdkZWJ1ZycpICYmIHdpbmRvdy5jb25zb2xlICYmIGNvbnNvbGUuZXJyb3IpIHtcXHJcXG4gICAgICAgICAgLy8gQ2hlY2sgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIHJlc3BvbnNlIGluY2x1ZGVkIGEgYHJlc3VsdHNgIGtleS5cXHJcXG4gICAgICAgICAgaWYgKCFyZXN1bHRzIHx8ICFyZXN1bHRzLnJlc3VsdHMgfHwgISQuaXNBcnJheShyZXN1bHRzLnJlc3VsdHMpKSB7XFxyXFxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcXHJcXG4gICAgICAgICAgICAgICdTZWxlY3QyOiBUaGUgQUpBWCByZXN1bHRzIGRpZCBub3QgcmV0dXJuIGFuIGFycmF5IGluIHRoZSAnICtcXHJcXG4gICAgICAgICAgICAgICdgcmVzdWx0c2Aga2V5IG9mIHRoZSByZXNwb25zZS4nXFxyXFxuICAgICAgICAgICAgKTtcXHJcXG4gICAgICAgICAgfVxcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgY2FsbGJhY2socmVzdWx0cyk7XFxyXFxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgLy8gQXR0ZW1wdCB0byBkZXRlY3QgaWYgYSByZXF1ZXN0IHdhcyBhYm9ydGVkXFxyXFxuICAgICAgICAvLyBPbmx5IHdvcmtzIGlmIHRoZSB0cmFuc3BvcnQgZXhwb3NlcyBhIHN0YXR1cyBwcm9wZXJ0eVxcclxcbiAgICAgICAgaWYgKCRyZXF1ZXN0LnN0YXR1cyAmJiAkcmVxdWVzdC5zdGF0dXMgPT09ICcwJykge1xcclxcbiAgICAgICAgICByZXR1cm47XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICBzZWxmLnRyaWdnZXIoJ3Jlc3VsdHM6bWVzc2FnZScsIHtcXHJcXG4gICAgICAgICAgbWVzc2FnZTogJ2Vycm9yTG9hZGluZydcXHJcXG4gICAgICAgIH0pO1xcclxcbiAgICAgIH0pO1xcclxcblxcclxcbiAgICAgIHNlbGYuX3JlcXVlc3QgPSAkcmVxdWVzdDtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAodGhpcy5hamF4T3B0aW9ucy5kZWxheSAmJiBwYXJhbXMudGVybSAhPSBudWxsKSB7XFxyXFxuICAgICAgaWYgKHRoaXMuX3F1ZXJ5VGltZW91dCkge1xcclxcbiAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLl9xdWVyeVRpbWVvdXQpO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICB0aGlzLl9xdWVyeVRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dChyZXF1ZXN0LCB0aGlzLmFqYXhPcHRpb25zLmRlbGF5KTtcXHJcXG4gICAgfSBlbHNlIHtcXHJcXG4gICAgICByZXF1ZXN0KCk7XFxyXFxuICAgIH1cXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gQWpheEFkYXB0ZXI7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL2RhdGEvdGFncycsW1xcclxcbiAgJ2pxdWVyeSdcXHJcXG5dLCBmdW5jdGlvbiAoJCkge1xcclxcbiAgZnVuY3Rpb24gVGFncyAoZGVjb3JhdGVkLCAkZWxlbWVudCwgb3B0aW9ucykge1xcclxcbiAgICB2YXIgdGFncyA9IG9wdGlvbnMuZ2V0KCd0YWdzJyk7XFxyXFxuXFxyXFxuICAgIHZhciBjcmVhdGVUYWcgPSBvcHRpb25zLmdldCgnY3JlYXRlVGFnJyk7XFxyXFxuXFxyXFxuICAgIGlmIChjcmVhdGVUYWcgIT09IHVuZGVmaW5lZCkge1xcclxcbiAgICAgIHRoaXMuY3JlYXRlVGFnID0gY3JlYXRlVGFnO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHZhciBpbnNlcnRUYWcgPSBvcHRpb25zLmdldCgnaW5zZXJ0VGFnJyk7XFxyXFxuXFxyXFxuICAgIGlmIChpbnNlcnRUYWcgIT09IHVuZGVmaW5lZCkge1xcclxcbiAgICAgICAgdGhpcy5pbnNlcnRUYWcgPSBpbnNlcnRUYWc7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgJGVsZW1lbnQsIG9wdGlvbnMpO1xcclxcblxcclxcbiAgICBpZiAoJC5pc0FycmF5KHRhZ3MpKSB7XFxyXFxuICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCB0YWdzLmxlbmd0aDsgdCsrKSB7XFxyXFxuICAgICAgICB2YXIgdGFnID0gdGFnc1t0XTtcXHJcXG4gICAgICAgIHZhciBpdGVtID0gdGhpcy5fbm9ybWFsaXplSXRlbSh0YWcpO1xcclxcblxcclxcbiAgICAgICAgdmFyICRvcHRpb24gPSB0aGlzLm9wdGlvbihpdGVtKTtcXHJcXG5cXHJcXG4gICAgICAgIHRoaXMuJGVsZW1lbnQuYXBwZW5kKCRvcHRpb24pO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfVxcclxcbiAgfVxcclxcblxcclxcbiAgVGFncy5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBwYXJhbXMsIGNhbGxiYWNrKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgdGhpcy5fcmVtb3ZlT2xkVGFncygpO1xcclxcblxcclxcbiAgICBpZiAocGFyYW1zLnRlcm0gPT0gbnVsbCB8fCBwYXJhbXMucGFnZSAhPSBudWxsKSB7XFxyXFxuICAgICAgZGVjb3JhdGVkLmNhbGwodGhpcywgcGFyYW1zLCBjYWxsYmFjayk7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGZ1bmN0aW9uIHdyYXBwZXIgKG9iaiwgY2hpbGQpIHtcXHJcXG4gICAgICB2YXIgZGF0YSA9IG9iai5yZXN1bHRzO1xcclxcblxcclxcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xcclxcbiAgICAgICAgdmFyIG9wdGlvbiA9IGRhdGFbaV07XFxyXFxuXFxyXFxuICAgICAgICB2YXIgY2hlY2tDaGlsZHJlbiA9IChcXHJcXG4gICAgICAgICAgb3B0aW9uLmNoaWxkcmVuICE9IG51bGwgJiZcXHJcXG4gICAgICAgICAgIXdyYXBwZXIoe1xcclxcbiAgICAgICAgICAgIHJlc3VsdHM6IG9wdGlvbi5jaGlsZHJlblxcclxcbiAgICAgICAgICB9LCB0cnVlKVxcclxcbiAgICAgICAgKTtcXHJcXG5cXHJcXG4gICAgICAgIHZhciBjaGVja1RleHQgPSBvcHRpb24udGV4dCA9PT0gcGFyYW1zLnRlcm07XFxyXFxuXFxyXFxuICAgICAgICBpZiAoY2hlY2tUZXh0IHx8IGNoZWNrQ2hpbGRyZW4pIHtcXHJcXG4gICAgICAgICAgaWYgKGNoaWxkKSB7XFxyXFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xcclxcbiAgICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICAgIG9iai5kYXRhID0gZGF0YTtcXHJcXG4gICAgICAgICAgY2FsbGJhY2sob2JqKTtcXHJcXG5cXHJcXG4gICAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBpZiAoY2hpbGQpIHtcXHJcXG4gICAgICAgIHJldHVybiB0cnVlO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICB2YXIgdGFnID0gc2VsZi5jcmVhdGVUYWcocGFyYW1zKTtcXHJcXG5cXHJcXG4gICAgICBpZiAodGFnICE9IG51bGwpIHtcXHJcXG4gICAgICAgIHZhciAkb3B0aW9uID0gc2VsZi5vcHRpb24odGFnKTtcXHJcXG4gICAgICAgICRvcHRpb24uYXR0cignZGF0YS1zZWxlY3QyLXRhZycsIHRydWUpO1xcclxcblxcclxcbiAgICAgICAgc2VsZi5hZGRPcHRpb25zKFskb3B0aW9uXSk7XFxyXFxuXFxyXFxuICAgICAgICBzZWxmLmluc2VydFRhZyhkYXRhLCB0YWcpO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBvYmoucmVzdWx0cyA9IGRhdGE7XFxyXFxuXFxyXFxuICAgICAgY2FsbGJhY2sob2JqKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBwYXJhbXMsIHdyYXBwZXIpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFRhZ3MucHJvdG90eXBlLmNyZWF0ZVRhZyA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIHBhcmFtcykge1xcclxcbiAgICB2YXIgdGVybSA9ICQudHJpbShwYXJhbXMudGVybSk7XFxyXFxuXFxyXFxuICAgIGlmICh0ZXJtID09PSAnJykge1xcclxcbiAgICAgIHJldHVybiBudWxsO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHJldHVybiB7XFxyXFxuICAgICAgaWQ6IHRlcm0sXFxyXFxuICAgICAgdGV4dDogdGVybVxcclxcbiAgICB9O1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFRhZ3MucHJvdG90eXBlLmluc2VydFRhZyA9IGZ1bmN0aW9uIChfLCBkYXRhLCB0YWcpIHtcXHJcXG4gICAgZGF0YS51bnNoaWZ0KHRhZyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgVGFncy5wcm90b3R5cGUuX3JlbW92ZU9sZFRhZ3MgPSBmdW5jdGlvbiAoXykge1xcclxcbiAgICB2YXIgdGFnID0gdGhpcy5fbGFzdFRhZztcXHJcXG5cXHJcXG4gICAgdmFyICRvcHRpb25zID0gdGhpcy4kZWxlbWVudC5maW5kKCdvcHRpb25bZGF0YS1zZWxlY3QyLXRhZ10nKTtcXHJcXG5cXHJcXG4gICAgJG9wdGlvbnMuZWFjaChmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWQpIHtcXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIFRhZ3M7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL2RhdGEvdG9rZW5pemVyJyxbXFxyXFxuICAnanF1ZXJ5J1xcclxcbl0sIGZ1bmN0aW9uICgkKSB7XFxyXFxuICBmdW5jdGlvbiBUb2tlbml6ZXIgKGRlY29yYXRlZCwgJGVsZW1lbnQsIG9wdGlvbnMpIHtcXHJcXG4gICAgdmFyIHRva2VuaXplciA9IG9wdGlvbnMuZ2V0KCd0b2tlbml6ZXInKTtcXHJcXG5cXHJcXG4gICAgaWYgKHRva2VuaXplciAhPT0gdW5kZWZpbmVkKSB7XFxyXFxuICAgICAgdGhpcy50b2tlbml6ZXIgPSB0b2tlbml6ZXI7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgJGVsZW1lbnQsIG9wdGlvbnMpO1xcclxcbiAgfVxcclxcblxcclxcbiAgVG9rZW5pemVyLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIGNvbnRhaW5lciwgJGNvbnRhaW5lcik7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlYXJjaCA9ICBjb250YWluZXIuZHJvcGRvd24uJHNlYXJjaCB8fCBjb250YWluZXIuc2VsZWN0aW9uLiRzZWFyY2ggfHxcXHJcXG4gICAgICAkY29udGFpbmVyLmZpbmQoJy5zZWxlY3QyLXNlYXJjaF9fZmllbGQnKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBUb2tlbml6ZXIucHJvdG90eXBlLnF1ZXJ5ID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgcGFyYW1zLCBjYWxsYmFjaykge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIGZ1bmN0aW9uIGNyZWF0ZUFuZFNlbGVjdCAoZGF0YSkge1xcclxcbiAgICAgIC8vIE5vcm1hbGl6ZSB0aGUgZGF0YSBvYmplY3Qgc28gd2UgY2FuIHVzZSBpdCBmb3IgY2hlY2tzXFxyXFxuICAgICAgdmFyIGl0ZW0gPSBzZWxmLl9ub3JtYWxpemVJdGVtKGRhdGEpO1xcclxcblxcclxcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBkYXRhIG9iamVjdCBhbHJlYWR5IGV4aXN0cyBhcyBhIHRhZ1xcclxcbiAgICAgIC8vIFNlbGVjdCBpdCBpZiBpdCBkb2Vzbid0XFxyXFxuICAgICAgdmFyICRleGlzdGluZ09wdGlvbnMgPSBzZWxmLiRlbGVtZW50LmZpbmQoJ29wdGlvbicpLmZpbHRlcihmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICByZXR1cm4gJCh0aGlzKS52YWwoKSA9PT0gaXRlbS5pZDtcXHJcXG4gICAgICB9KTtcXHJcXG5cXHJcXG4gICAgICAvLyBJZiBhbiBleGlzdGluZyBvcHRpb24gd2Fzbid0IGZvdW5kIGZvciBpdCwgY3JlYXRlIHRoZSBvcHRpb25cXHJcXG4gICAgICBpZiAoISRleGlzdGluZ09wdGlvbnMubGVuZ3RoKSB7XFxyXFxuICAgICAgICB2YXIgJG9wdGlvbiA9IHNlbGYub3B0aW9uKGl0ZW0pO1xcclxcbiAgICAgICAgJG9wdGlvbi5hdHRyKCdkYXRhLXNlbGVjdDItdGFnJywgdHJ1ZSk7XFxyXFxuXFxyXFxuICAgICAgICBzZWxmLl9yZW1vdmVPbGRUYWdzKCk7XFxyXFxuICAgICAgICBzZWxmLmFkZE9wdGlvbnMoWyRvcHRpb25dKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgLy8gU2VsZWN0IHRoZSBpdGVtLCBub3cgdGhhdCB3ZSBrbm93IHRoZXJlIGlzIGFuIG9wdGlvbiBmb3IgaXRcXHJcXG4gICAgICBzZWxlY3QoaXRlbSk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZnVuY3Rpb24gc2VsZWN0IChkYXRhKSB7XFxyXFxuICAgICAgc2VsZi50cmlnZ2VyKCdzZWxlY3QnLCB7XFxyXFxuICAgICAgICBkYXRhOiBkYXRhXFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcGFyYW1zLnRlcm0gPSBwYXJhbXMudGVybSB8fCAnJztcXHJcXG5cXHJcXG4gICAgdmFyIHRva2VuRGF0YSA9IHRoaXMudG9rZW5pemVyKHBhcmFtcywgdGhpcy5vcHRpb25zLCBjcmVhdGVBbmRTZWxlY3QpO1xcclxcblxcclxcbiAgICBpZiAodG9rZW5EYXRhLnRlcm0gIT09IHBhcmFtcy50ZXJtKSB7XFxyXFxuICAgICAgLy8gUmVwbGFjZSB0aGUgc2VhcmNoIHRlcm0gaWYgd2UgaGF2ZSB0aGUgc2VhcmNoIGJveFxcclxcbiAgICAgIGlmICh0aGlzLiRzZWFyY2gubGVuZ3RoKSB7XFxyXFxuICAgICAgICB0aGlzLiRzZWFyY2gudmFsKHRva2VuRGF0YS50ZXJtKTtcXHJcXG4gICAgICAgIHRoaXMuJHNlYXJjaC5mb2N1cygpO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBwYXJhbXMudGVybSA9IHRva2VuRGF0YS50ZXJtO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsIHBhcmFtcywgY2FsbGJhY2spO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFRva2VuaXplci5wcm90b3R5cGUudG9rZW5pemVyID0gZnVuY3Rpb24gKF8sIHBhcmFtcywgb3B0aW9ucywgY2FsbGJhY2spIHtcXHJcXG4gICAgdmFyIHNlcGFyYXRvcnMgPSBvcHRpb25zLmdldCgndG9rZW5TZXBhcmF0b3JzJykgfHwgW107XFxyXFxuICAgIHZhciB0ZXJtID0gcGFyYW1zLnRlcm07XFxyXFxuICAgIHZhciBpID0gMDtcXHJcXG5cXHJcXG4gICAgdmFyIGNyZWF0ZVRhZyA9IHRoaXMuY3JlYXRlVGFnIHx8IGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICByZXR1cm4ge1xcclxcbiAgICAgICAgaWQ6IHBhcmFtcy50ZXJtLFxcclxcbiAgICAgICAgdGV4dDogcGFyYW1zLnRlcm1cXHJcXG4gICAgICB9O1xcclxcbiAgICB9O1xcclxcblxcclxcbiAgICB3aGlsZSAoaSA8IHRlcm0ubGVuZ3RoKSB7XFxyXFxuICAgICAgdmFyIHRlcm1DaGFyID0gdGVybVtpXTtcXHJcXG5cXHJcXG4gICAgICBpZiAoJC5pbkFycmF5KHRlcm1DaGFyLCBzZXBhcmF0b3JzKSA9PT0gLTEpIHtcXHJcXG4gICAgICAgIGkrKztcXHJcXG5cXHJcXG4gICAgICAgIGNvbnRpbnVlO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICB2YXIgcGFydCA9IHRlcm0uc3Vic3RyKDAsIGkpO1xcclxcbiAgICAgIHZhciBwYXJ0UGFyYW1zID0gJC5leHRlbmQoe30sIHBhcmFtcywge1xcclxcbiAgICAgICAgdGVybTogcGFydFxcclxcbiAgICAgIH0pO1xcclxcblxcclxcbiAgICAgIHZhciBkYXRhID0gY3JlYXRlVGFnKHBhcnRQYXJhbXMpO1xcclxcblxcclxcbiAgICAgIGlmIChkYXRhID09IG51bGwpIHtcXHJcXG4gICAgICAgIGkrKztcXHJcXG4gICAgICAgIGNvbnRpbnVlO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBjYWxsYmFjayhkYXRhKTtcXHJcXG5cXHJcXG4gICAgICAvLyBSZXNldCB0aGUgdGVybSB0byBub3QgaW5jbHVkZSB0aGUgdG9rZW5pemVkIHBvcnRpb25cXHJcXG4gICAgICB0ZXJtID0gdGVybS5zdWJzdHIoaSArIDEpIHx8ICcnO1xcclxcbiAgICAgIGkgPSAwO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHJldHVybiB7XFxyXFxuICAgICAgdGVybTogdGVybVxcclxcbiAgICB9O1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBUb2tlbml6ZXI7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL2RhdGEvbWluaW11bUlucHV0TGVuZ3RoJyxbXFxyXFxuXFxyXFxuXSwgZnVuY3Rpb24gKCkge1xcclxcbiAgZnVuY3Rpb24gTWluaW11bUlucHV0TGVuZ3RoIChkZWNvcmF0ZWQsICRlLCBvcHRpb25zKSB7XFxyXFxuICAgIHRoaXMubWluaW11bUlucHV0TGVuZ3RoID0gb3B0aW9ucy5nZXQoJ21pbmltdW1JbnB1dExlbmd0aCcpO1xcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCAkZSwgb3B0aW9ucyk7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBNaW5pbXVtSW5wdXRMZW5ndGgucHJvdG90eXBlLnF1ZXJ5ID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgcGFyYW1zLCBjYWxsYmFjaykge1xcclxcbiAgICBwYXJhbXMudGVybSA9IHBhcmFtcy50ZXJtIHx8ICcnO1xcclxcblxcclxcbiAgICBpZiAocGFyYW1zLnRlcm0ubGVuZ3RoIDwgdGhpcy5taW5pbXVtSW5wdXRMZW5ndGgpIHtcXHJcXG4gICAgICB0aGlzLnRyaWdnZXIoJ3Jlc3VsdHM6bWVzc2FnZScsIHtcXHJcXG4gICAgICAgIG1lc3NhZ2U6ICdpbnB1dFRvb1Nob3J0JyxcXHJcXG4gICAgICAgIGFyZ3M6IHtcXHJcXG4gICAgICAgICAgbWluaW11bTogdGhpcy5taW5pbXVtSW5wdXRMZW5ndGgsXFxyXFxuICAgICAgICAgIGlucHV0OiBwYXJhbXMudGVybSxcXHJcXG4gICAgICAgICAgcGFyYW1zOiBwYXJhbXNcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICB9KTtcXHJcXG5cXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgcGFyYW1zLCBjYWxsYmFjayk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIE1pbmltdW1JbnB1dExlbmd0aDtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZGF0YS9tYXhpbXVtSW5wdXRMZW5ndGgnLFtcXHJcXG5cXHJcXG5dLCBmdW5jdGlvbiAoKSB7XFxyXFxuICBmdW5jdGlvbiBNYXhpbXVtSW5wdXRMZW5ndGggKGRlY29yYXRlZCwgJGUsIG9wdGlvbnMpIHtcXHJcXG4gICAgdGhpcy5tYXhpbXVtSW5wdXRMZW5ndGggPSBvcHRpb25zLmdldCgnbWF4aW11bUlucHV0TGVuZ3RoJyk7XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsICRlLCBvcHRpb25zKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIE1heGltdW1JbnB1dExlbmd0aC5wcm90b3R5cGUucXVlcnkgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBwYXJhbXMsIGNhbGxiYWNrKSB7XFxyXFxuICAgIHBhcmFtcy50ZXJtID0gcGFyYW1zLnRlcm0gfHwgJyc7XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLm1heGltdW1JbnB1dExlbmd0aCA+IDAgJiZcXHJcXG4gICAgICAgIHBhcmFtcy50ZXJtLmxlbmd0aCA+IHRoaXMubWF4aW11bUlucHV0TGVuZ3RoKSB7XFxyXFxuICAgICAgdGhpcy50cmlnZ2VyKCdyZXN1bHRzOm1lc3NhZ2UnLCB7XFxyXFxuICAgICAgICBtZXNzYWdlOiAnaW5wdXRUb29Mb25nJyxcXHJcXG4gICAgICAgIGFyZ3M6IHtcXHJcXG4gICAgICAgICAgbWF4aW11bTogdGhpcy5tYXhpbXVtSW5wdXRMZW5ndGgsXFxyXFxuICAgICAgICAgIGlucHV0OiBwYXJhbXMudGVybSxcXHJcXG4gICAgICAgICAgcGFyYW1zOiBwYXJhbXNcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICB9KTtcXHJcXG5cXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgcGFyYW1zLCBjYWxsYmFjayk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIE1heGltdW1JbnB1dExlbmd0aDtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZGF0YS9tYXhpbXVtU2VsZWN0aW9uTGVuZ3RoJyxbXFxyXFxuXFxyXFxuXSwgZnVuY3Rpb24gKCl7XFxyXFxuICBmdW5jdGlvbiBNYXhpbXVtU2VsZWN0aW9uTGVuZ3RoIChkZWNvcmF0ZWQsICRlLCBvcHRpb25zKSB7XFxyXFxuICAgIHRoaXMubWF4aW11bVNlbGVjdGlvbkxlbmd0aCA9IG9wdGlvbnMuZ2V0KCdtYXhpbXVtU2VsZWN0aW9uTGVuZ3RoJyk7XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsICRlLCBvcHRpb25zKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIE1heGltdW1TZWxlY3Rpb25MZW5ndGgucHJvdG90eXBlLnF1ZXJ5ID1cXHJcXG4gICAgZnVuY3Rpb24gKGRlY29yYXRlZCwgcGFyYW1zLCBjYWxsYmFjaykge1xcclxcbiAgICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgICB0aGlzLmN1cnJlbnQoZnVuY3Rpb24gKGN1cnJlbnREYXRhKSB7XFxyXFxuICAgICAgICB2YXIgY291bnQgPSBjdXJyZW50RGF0YSAhPSBudWxsID8gY3VycmVudERhdGEubGVuZ3RoIDogMDtcXHJcXG4gICAgICAgIGlmIChzZWxmLm1heGltdW1TZWxlY3Rpb25MZW5ndGggPiAwICYmXFxyXFxuICAgICAgICAgIGNvdW50ID49IHNlbGYubWF4aW11bVNlbGVjdGlvbkxlbmd0aCkge1xcclxcbiAgICAgICAgICBzZWxmLnRyaWdnZXIoJ3Jlc3VsdHM6bWVzc2FnZScsIHtcXHJcXG4gICAgICAgICAgICBtZXNzYWdlOiAnbWF4aW11bVNlbGVjdGVkJyxcXHJcXG4gICAgICAgICAgICBhcmdzOiB7XFxyXFxuICAgICAgICAgICAgICBtYXhpbXVtOiBzZWxmLm1heGltdW1TZWxlY3Rpb25MZW5ndGhcXHJcXG4gICAgICAgICAgICB9XFxyXFxuICAgICAgICAgIH0pO1xcclxcbiAgICAgICAgICByZXR1cm47XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgICBkZWNvcmF0ZWQuY2FsbChzZWxmLCBwYXJhbXMsIGNhbGxiYWNrKTtcXHJcXG4gICAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gTWF4aW11bVNlbGVjdGlvbkxlbmd0aDtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZHJvcGRvd24nLFtcXHJcXG4gICdqcXVlcnknLFxcclxcbiAgJy4vdXRpbHMnXFxyXFxuXSwgZnVuY3Rpb24gKCQsIFV0aWxzKSB7XFxyXFxuICBmdW5jdGlvbiBEcm9wZG93biAoJGVsZW1lbnQsIG9wdGlvbnMpIHtcXHJcXG4gICAgdGhpcy4kZWxlbWVudCA9ICRlbGVtZW50O1xcclxcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xcclxcblxcclxcbiAgICBEcm9wZG93bi5fX3N1cGVyX18uY29uc3RydWN0b3IuY2FsbCh0aGlzKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIFV0aWxzLkV4dGVuZChEcm9wZG93biwgVXRpbHMuT2JzZXJ2YWJsZSk7XFxyXFxuXFxyXFxuICBEcm9wZG93bi5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgJGRyb3Bkb3duID0gJChcXHJcXG4gICAgICAnPHNwYW4gY2xhc3M9XFxcInNlbGVjdDItZHJvcGRvd25cXFwiPicgK1xcclxcbiAgICAgICAgJzxzcGFuIGNsYXNzPVxcXCJzZWxlY3QyLXJlc3VsdHNcXFwiPjwvc3Bhbj4nICtcXHJcXG4gICAgICAnPC9zcGFuPidcXHJcXG4gICAgKTtcXHJcXG5cXHJcXG4gICAgJGRyb3Bkb3duLmF0dHIoJ2RpcicsIHRoaXMub3B0aW9ucy5nZXQoJ2RpcicpKTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kZHJvcGRvd24gPSAkZHJvcGRvd247XFxyXFxuXFxyXFxuICAgIHJldHVybiAkZHJvcGRvd247XFxyXFxuICB9O1xcclxcblxcclxcbiAgRHJvcGRvd24ucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIC8vIFNob3VsZCBiZSBpbXBsZW1lbnRlZCBpbiBzdWJjbGFzc2VzXFxyXFxuICB9O1xcclxcblxcclxcbiAgRHJvcGRvd24ucHJvdG90eXBlLnBvc2l0aW9uID0gZnVuY3Rpb24gKCRkcm9wZG93biwgJGNvbnRhaW5lcikge1xcclxcbiAgICAvLyBTaG91bGQgYmUgaW1wbG1lbnRlZCBpbiBzdWJjbGFzc2VzXFxyXFxuICB9O1xcclxcblxcclxcbiAgRHJvcGRvd24ucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIC8vIFJlbW92ZSB0aGUgZHJvcGRvd24gZnJvbSB0aGUgRE9NXFxyXFxuICAgIHRoaXMuJGRyb3Bkb3duLnJlbW92ZSgpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBEcm9wZG93bjtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZHJvcGRvd24vc2VhcmNoJyxbXFxyXFxuICAnanF1ZXJ5JyxcXHJcXG4gICcuLi91dGlscydcXHJcXG5dLCBmdW5jdGlvbiAoJCwgVXRpbHMpIHtcXHJcXG4gIGZ1bmN0aW9uIFNlYXJjaCAoKSB7IH1cXHJcXG5cXHJcXG4gIFNlYXJjaC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKGRlY29yYXRlZCkge1xcclxcbiAgICB2YXIgJHJlbmRlcmVkID0gZGVjb3JhdGVkLmNhbGwodGhpcyk7XFxyXFxuXFxyXFxuICAgIHZhciAkc2VhcmNoID0gJChcXHJcXG4gICAgICAnPHNwYW4gY2xhc3M9XFxcInNlbGVjdDItc2VhcmNoIHNlbGVjdDItc2VhcmNoLS1kcm9wZG93blxcXCI+JyArXFxyXFxuICAgICAgICAnPGlucHV0IGNsYXNzPVxcXCJzZWxlY3QyLXNlYXJjaF9fZmllbGRcXFwiIHR5cGU9XFxcInNlYXJjaFxcXCIgdGFiaW5kZXg9XFxcIi0xXFxcIicgK1xcclxcbiAgICAgICAgJyBhdXRvY29tcGxldGU9XFxcIm9mZlxcXCIgYXV0b2NvcnJlY3Q9XFxcIm9mZlxcXCIgYXV0b2NhcGl0YWxpemU9XFxcIm9mZlxcXCInICtcXHJcXG4gICAgICAgICcgc3BlbGxjaGVjaz1cXFwiZmFsc2VcXFwiIHJvbGU9XFxcInRleHRib3hcXFwiIC8+JyArXFxyXFxuICAgICAgJzwvc3Bhbj4nXFxyXFxuICAgICk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJHNlYXJjaENvbnRhaW5lciA9ICRzZWFyY2g7XFxyXFxuICAgIHRoaXMuJHNlYXJjaCA9ICRzZWFyY2guZmluZCgnaW5wdXQnKTtcXHJcXG5cXHJcXG4gICAgJHJlbmRlcmVkLnByZXBlbmQoJHNlYXJjaCk7XFxyXFxuXFxyXFxuICAgIHJldHVybiAkcmVuZGVyZWQ7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VhcmNoLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgY29udGFpbmVyLCAkY29udGFpbmVyKTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kc2VhcmNoLm9uKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIHNlbGYudHJpZ2dlcigna2V5cHJlc3MnLCBldnQpO1xcclxcblxcclxcbiAgICAgIHNlbGYuX2tleVVwUHJldmVudGVkID0gZXZ0LmlzRGVmYXVsdFByZXZlbnRlZCgpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgLy8gV29ya2Fyb3VuZCBmb3IgYnJvd3NlcnMgd2hpY2ggZG8gbm90IHN1cHBvcnQgdGhlIGBpbnB1dGAgZXZlbnRcXHJcXG4gICAgLy8gVGhpcyB3aWxsIHByZXZlbnQgZG91YmxlLXRyaWdnZXJpbmcgb2YgZXZlbnRzIGZvciBicm93c2VycyB3aGljaCBzdXBwb3J0XFxyXFxuICAgIC8vIGJvdGggdGhlIGBrZXl1cGAgYW5kIGBpbnB1dGAgZXZlbnRzLlxcclxcbiAgICB0aGlzLiRzZWFyY2gub24oJ2lucHV0JywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIC8vIFVuYmluZCB0aGUgZHVwbGljYXRlZCBga2V5dXBgIGV2ZW50XFxyXFxuICAgICAgJCh0aGlzKS5vZmYoJ2tleXVwJyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRzZWFyY2gub24oJ2tleXVwIGlucHV0JywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIHNlbGYuaGFuZGxlU2VhcmNoKGV2dCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ29wZW4nLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi4kc2VhcmNoLmF0dHIoJ3RhYmluZGV4JywgMCk7XFxyXFxuXFxyXFxuICAgICAgc2VsZi4kc2VhcmNoLmZvY3VzKCk7XFxyXFxuXFxyXFxuICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgc2VsZi4kc2VhcmNoLmZvY3VzKCk7XFxyXFxuICAgICAgfSwgMCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ2Nsb3NlJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHNlbGYuJHNlYXJjaC5hdHRyKCd0YWJpbmRleCcsIC0xKTtcXHJcXG5cXHJcXG4gICAgICBzZWxmLiRzZWFyY2gudmFsKCcnKTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgaWYgKGNvbnRhaW5lci5pc09wZW4oKSkge1xcclxcbiAgICAgICAgc2VsZi4kc2VhcmNoLmZvY3VzKCk7XFxyXFxuICAgICAgfVxcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdyZXN1bHRzOmFsbCcsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBpZiAocGFyYW1zLnF1ZXJ5LnRlcm0gPT0gbnVsbCB8fCBwYXJhbXMucXVlcnkudGVybSA9PT0gJycpIHtcXHJcXG4gICAgICAgIHZhciBzaG93U2VhcmNoID0gc2VsZi5zaG93U2VhcmNoKHBhcmFtcyk7XFxyXFxuXFxyXFxuICAgICAgICBpZiAoc2hvd1NlYXJjaCkge1xcclxcbiAgICAgICAgICBzZWxmLiRzZWFyY2hDb250YWluZXIucmVtb3ZlQ2xhc3MoJ3NlbGVjdDItc2VhcmNoLS1oaWRlJyk7XFxyXFxuICAgICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgICBzZWxmLiRzZWFyY2hDb250YWluZXIuYWRkQ2xhc3MoJ3NlbGVjdDItc2VhcmNoLS1oaWRlJyk7XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgfVxcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWFyY2gucHJvdG90eXBlLmhhbmRsZVNlYXJjaCA9IGZ1bmN0aW9uIChldnQpIHtcXHJcXG4gICAgaWYgKCF0aGlzLl9rZXlVcFByZXZlbnRlZCkge1xcclxcbiAgICAgIHZhciBpbnB1dCA9IHRoaXMuJHNlYXJjaC52YWwoKTtcXHJcXG5cXHJcXG4gICAgICB0aGlzLnRyaWdnZXIoJ3F1ZXJ5Jywge1xcclxcbiAgICAgICAgdGVybTogaW5wdXRcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLl9rZXlVcFByZXZlbnRlZCA9IGZhbHNlO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlYXJjaC5wcm90b3R5cGUuc2hvd1NlYXJjaCA9IGZ1bmN0aW9uIChfLCBwYXJhbXMpIHtcXHJcXG4gICAgcmV0dXJuIHRydWU7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIFNlYXJjaDtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZHJvcGRvd24vaGlkZVBsYWNlaG9sZGVyJyxbXFxyXFxuXFxyXFxuXSwgZnVuY3Rpb24gKCkge1xcclxcbiAgZnVuY3Rpb24gSGlkZVBsYWNlaG9sZGVyIChkZWNvcmF0ZWQsICRlbGVtZW50LCBvcHRpb25zLCBkYXRhQWRhcHRlcikge1xcclxcbiAgICB0aGlzLnBsYWNlaG9sZGVyID0gdGhpcy5ub3JtYWxpemVQbGFjZWhvbGRlcihvcHRpb25zLmdldCgncGxhY2Vob2xkZXInKSk7XFxyXFxuXFxyXFxuICAgIGRlY29yYXRlZC5jYWxsKHRoaXMsICRlbGVtZW50LCBvcHRpb25zLCBkYXRhQWRhcHRlcik7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBIaWRlUGxhY2Vob2xkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGRhdGEpIHtcXHJcXG4gICAgZGF0YS5yZXN1bHRzID0gdGhpcy5yZW1vdmVQbGFjZWhvbGRlcihkYXRhLnJlc3VsdHMpO1xcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBkYXRhKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBIaWRlUGxhY2Vob2xkZXIucHJvdG90eXBlLm5vcm1hbGl6ZVBsYWNlaG9sZGVyID0gZnVuY3Rpb24gKF8sIHBsYWNlaG9sZGVyKSB7XFxyXFxuICAgIGlmICh0eXBlb2YgcGxhY2Vob2xkZXIgPT09ICdzdHJpbmcnKSB7XFxyXFxuICAgICAgcGxhY2Vob2xkZXIgPSB7XFxyXFxuICAgICAgICBpZDogJycsXFxyXFxuICAgICAgICB0ZXh0OiBwbGFjZWhvbGRlclxcclxcbiAgICAgIH07XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuIHBsYWNlaG9sZGVyO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEhpZGVQbGFjZWhvbGRlci5wcm90b3R5cGUucmVtb3ZlUGxhY2Vob2xkZXIgPSBmdW5jdGlvbiAoXywgZGF0YSkge1xcclxcbiAgICB2YXIgbW9kaWZpZWREYXRhID0gZGF0YS5zbGljZSgwKTtcXHJcXG5cXHJcXG4gICAgZm9yICh2YXIgZCA9IGRhdGEubGVuZ3RoIC0gMTsgZCA+PSAwOyBkLS0pIHtcXHJcXG4gICAgICB2YXIgaXRlbSA9IGRhdGFbZF07XFxyXFxuXFxyXFxuICAgICAgaWYgKHRoaXMucGxhY2Vob2xkZXIuaWQgPT09IGl0ZW0uaWQpIHtcXHJcXG4gICAgICAgIG1vZGlmaWVkRGF0YS5zcGxpY2UoZCwgMSk7XFxyXFxuICAgICAgfVxcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHJldHVybiBtb2RpZmllZERhdGE7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIEhpZGVQbGFjZWhvbGRlcjtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZHJvcGRvd24vaW5maW5pdGVTY3JvbGwnLFtcXHJcXG4gICdqcXVlcnknXFxyXFxuXSwgZnVuY3Rpb24gKCQpIHtcXHJcXG4gIGZ1bmN0aW9uIEluZmluaXRlU2Nyb2xsIChkZWNvcmF0ZWQsICRlbGVtZW50LCBvcHRpb25zLCBkYXRhQWRhcHRlcikge1xcclxcbiAgICB0aGlzLmxhc3RQYXJhbXMgPSB7fTtcXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgJGVsZW1lbnQsIG9wdGlvbnMsIGRhdGFBZGFwdGVyKTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kbG9hZGluZ01vcmUgPSB0aGlzLmNyZWF0ZUxvYWRpbmdNb3JlKCk7XFxyXFxuICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xcclxcbiAgfVxcclxcblxcclxcbiAgSW5maW5pdGVTY3JvbGwucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQsIGRhdGEpIHtcXHJcXG4gICAgdGhpcy4kbG9hZGluZ01vcmUucmVtb3ZlKCk7XFxyXFxuICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBkYXRhKTtcXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMuc2hvd0xvYWRpbmdNb3JlKGRhdGEpKSB7XFxyXFxuICAgICAgdGhpcy4kcmVzdWx0cy5hcHBlbmQodGhpcy4kbG9hZGluZ01vcmUpO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgSW5maW5pdGVTY3JvbGwucHJvdG90eXBlLmJpbmQgPSBmdW5jdGlvbiAoZGVjb3JhdGVkLCBjb250YWluZXIsICRjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBjb250YWluZXIsICRjb250YWluZXIpO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3F1ZXJ5JywgZnVuY3Rpb24gKHBhcmFtcykge1xcclxcbiAgICAgIHNlbGYubGFzdFBhcmFtcyA9IHBhcmFtcztcXHJcXG4gICAgICBzZWxmLmxvYWRpbmcgPSB0cnVlO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdxdWVyeTphcHBlbmQnLCBmdW5jdGlvbiAocGFyYW1zKSB7XFxyXFxuICAgICAgc2VsZi5sYXN0UGFyYW1zID0gcGFyYW1zO1xcclxcbiAgICAgIHNlbGYubG9hZGluZyA9IHRydWU7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRyZXN1bHRzLm9uKCdzY3JvbGwnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgdmFyIGlzTG9hZE1vcmVWaXNpYmxlID0gJC5jb250YWlucyhcXHJcXG4gICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcXHJcXG4gICAgICAgIHNlbGYuJGxvYWRpbmdNb3JlWzBdXFxyXFxuICAgICAgKTtcXHJcXG5cXHJcXG4gICAgICBpZiAoc2VsZi5sb2FkaW5nIHx8ICFpc0xvYWRNb3JlVmlzaWJsZSkge1xcclxcbiAgICAgICAgcmV0dXJuO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICB2YXIgY3VycmVudE9mZnNldCA9IHNlbGYuJHJlc3VsdHMub2Zmc2V0KCkudG9wICtcXHJcXG4gICAgICAgIHNlbGYuJHJlc3VsdHMub3V0ZXJIZWlnaHQoZmFsc2UpO1xcclxcbiAgICAgIHZhciBsb2FkaW5nTW9yZU9mZnNldCA9IHNlbGYuJGxvYWRpbmdNb3JlLm9mZnNldCgpLnRvcCArXFxyXFxuICAgICAgICBzZWxmLiRsb2FkaW5nTW9yZS5vdXRlckhlaWdodChmYWxzZSk7XFxyXFxuXFxyXFxuICAgICAgaWYgKGN1cnJlbnRPZmZzZXQgKyA1MCA+PSBsb2FkaW5nTW9yZU9mZnNldCkge1xcclxcbiAgICAgICAgc2VsZi5sb2FkTW9yZSgpO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgSW5maW5pdGVTY3JvbGwucHJvdG90eXBlLmxvYWRNb3JlID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xcclxcblxcclxcbiAgICB2YXIgcGFyYW1zID0gJC5leHRlbmQoe30sIHtwYWdlOiAxfSwgdGhpcy5sYXN0UGFyYW1zKTtcXHJcXG5cXHJcXG4gICAgcGFyYW1zLnBhZ2UrKztcXHJcXG5cXHJcXG4gICAgdGhpcy50cmlnZ2VyKCdxdWVyeTphcHBlbmQnLCBwYXJhbXMpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEluZmluaXRlU2Nyb2xsLnByb3RvdHlwZS5zaG93TG9hZGluZ01vcmUgPSBmdW5jdGlvbiAoXywgZGF0YSkge1xcclxcbiAgICByZXR1cm4gZGF0YS5wYWdpbmF0aW9uICYmIGRhdGEucGFnaW5hdGlvbi5tb3JlO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEluZmluaXRlU2Nyb2xsLnByb3RvdHlwZS5jcmVhdGVMb2FkaW5nTW9yZSA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdmFyICRvcHRpb24gPSAkKFxcclxcbiAgICAgICc8bGkgJyArXFxyXFxuICAgICAgJ2NsYXNzPVxcXCJzZWxlY3QyLXJlc3VsdHNfX29wdGlvbiBzZWxlY3QyLXJlc3VsdHNfX29wdGlvbi0tbG9hZC1tb3JlXFxcIicgK1xcclxcbiAgICAgICdyb2xlPVxcXCJ0cmVlaXRlbVxcXCIgYXJpYS1kaXNhYmxlZD1cXFwidHJ1ZVxcXCI+PC9saT4nXFxyXFxuICAgICk7XFxyXFxuXFxyXFxuICAgIHZhciBtZXNzYWdlID0gdGhpcy5vcHRpb25zLmdldCgndHJhbnNsYXRpb25zJykuZ2V0KCdsb2FkaW5nTW9yZScpO1xcclxcblxcclxcbiAgICAkb3B0aW9uLmh0bWwobWVzc2FnZSh0aGlzLmxhc3RQYXJhbXMpKTtcXHJcXG5cXHJcXG4gICAgcmV0dXJuICRvcHRpb247XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIEluZmluaXRlU2Nyb2xsO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9kcm9wZG93bi9hdHRhY2hCb2R5JyxbXFxyXFxuICAnanF1ZXJ5JyxcXHJcXG4gICcuLi91dGlscydcXHJcXG5dLCBmdW5jdGlvbiAoJCwgVXRpbHMpIHtcXHJcXG4gIGZ1bmN0aW9uIEF0dGFjaEJvZHkgKGRlY29yYXRlZCwgJGVsZW1lbnQsIG9wdGlvbnMpIHtcXHJcXG4gICAgdGhpcy4kZHJvcGRvd25QYXJlbnQgPSBvcHRpb25zLmdldCgnZHJvcGRvd25QYXJlbnQnKSB8fCAkKGRvY3VtZW50LmJvZHkpO1xcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCAkZWxlbWVudCwgb3B0aW9ucyk7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBBdHRhY2hCb2R5LnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgdmFyIHNldHVwUmVzdWx0c0V2ZW50cyA9IGZhbHNlO1xcclxcblxcclxcbiAgICBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBjb250YWluZXIsICRjb250YWluZXIpO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ29wZW4nLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi5fc2hvd0Ryb3Bkb3duKCk7XFxyXFxuICAgICAgc2VsZi5fYXR0YWNoUG9zaXRpb25pbmdIYW5kbGVyKGNvbnRhaW5lcik7XFxyXFxuXFxyXFxuICAgICAgaWYgKCFzZXR1cFJlc3VsdHNFdmVudHMpIHtcXHJcXG4gICAgICAgIHNldHVwUmVzdWx0c0V2ZW50cyA9IHRydWU7XFxyXFxuXFxyXFxuICAgICAgICBjb250YWluZXIub24oJ3Jlc3VsdHM6YWxsJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICBzZWxmLl9wb3NpdGlvbkRyb3Bkb3duKCk7XFxyXFxuICAgICAgICAgIHNlbGYuX3Jlc2l6ZURyb3Bkb3duKCk7XFxyXFxuICAgICAgICB9KTtcXHJcXG5cXHJcXG4gICAgICAgIGNvbnRhaW5lci5vbigncmVzdWx0czphcHBlbmQnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgICAgIHNlbGYuX3Bvc2l0aW9uRHJvcGRvd24oKTtcXHJcXG4gICAgICAgICAgc2VsZi5fcmVzaXplRHJvcGRvd24oKTtcXHJcXG4gICAgICAgIH0pO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIGNvbnRhaW5lci5vbignY2xvc2UnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi5faGlkZURyb3Bkb3duKCk7XFxyXFxuICAgICAgc2VsZi5fZGV0YWNoUG9zaXRpb25pbmdIYW5kbGVyKGNvbnRhaW5lcik7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRkcm9wZG93bkNvbnRhaW5lci5vbignbW91c2Vkb3duJywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQXR0YWNoQm9keS5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQpIHtcXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcyk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJGRyb3Bkb3duQ29udGFpbmVyLnJlbW92ZSgpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEF0dGFjaEJvZHkucHJvdG90eXBlLnBvc2l0aW9uID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgJGRyb3Bkb3duLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIC8vIENsb25lIGFsbCBvZiB0aGUgY29udGFpbmVyIGNsYXNzZXNcXHJcXG4gICAgJGRyb3Bkb3duLmF0dHIoJ2NsYXNzJywgJGNvbnRhaW5lci5hdHRyKCdjbGFzcycpKTtcXHJcXG5cXHJcXG4gICAgJGRyb3Bkb3duLnJlbW92ZUNsYXNzKCdzZWxlY3QyJyk7XFxyXFxuICAgICRkcm9wZG93bi5hZGRDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLW9wZW4nKTtcXHJcXG5cXHJcXG4gICAgJGRyb3Bkb3duLmNzcyh7XFxyXFxuICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXFxyXFxuICAgICAgdG9wOiAtOTk5OTk5XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLiRjb250YWluZXIgPSAkY29udGFpbmVyO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIEF0dGFjaEJvZHkucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQpIHtcXHJcXG4gICAgdmFyICRjb250YWluZXIgPSAkKCc8c3Bhbj48L3NwYW4+Jyk7XFxyXFxuXFxyXFxuICAgIHZhciAkZHJvcGRvd24gPSBkZWNvcmF0ZWQuY2FsbCh0aGlzKTtcXHJcXG4gICAgJGNvbnRhaW5lci5hcHBlbmQoJGRyb3Bkb3duKTtcXHJcXG5cXHJcXG4gICAgdGhpcy4kZHJvcGRvd25Db250YWluZXIgPSAkY29udGFpbmVyO1xcclxcblxcclxcbiAgICByZXR1cm4gJGNvbnRhaW5lcjtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBBdHRhY2hCb2R5LnByb3RvdHlwZS5faGlkZURyb3Bkb3duID0gZnVuY3Rpb24gKGRlY29yYXRlZCkge1xcclxcbiAgICB0aGlzLiRkcm9wZG93bkNvbnRhaW5lci5kZXRhY2goKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBBdHRhY2hCb2R5LnByb3RvdHlwZS5fYXR0YWNoUG9zaXRpb25pbmdIYW5kbGVyID1cXHJcXG4gICAgICBmdW5jdGlvbiAoZGVjb3JhdGVkLCBjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICB2YXIgc2Nyb2xsRXZlbnQgPSAnc2Nyb2xsLnNlbGVjdDIuJyArIGNvbnRhaW5lci5pZDtcXHJcXG4gICAgdmFyIHJlc2l6ZUV2ZW50ID0gJ3Jlc2l6ZS5zZWxlY3QyLicgKyBjb250YWluZXIuaWQ7XFxyXFxuICAgIHZhciBvcmllbnRhdGlvbkV2ZW50ID0gJ29yaWVudGF0aW9uY2hhbmdlLnNlbGVjdDIuJyArIGNvbnRhaW5lci5pZDtcXHJcXG5cXHJcXG4gICAgdmFyICR3YXRjaGVycyA9IHRoaXMuJGNvbnRhaW5lci5wYXJlbnRzKCkuZmlsdGVyKFV0aWxzLmhhc1Njcm9sbCk7XFxyXFxuICAgICR3YXRjaGVycy5lYWNoKGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAkKHRoaXMpLmRhdGEoJ3NlbGVjdDItc2Nyb2xsLXBvc2l0aW9uJywge1xcclxcbiAgICAgICAgeDogJCh0aGlzKS5zY3JvbGxMZWZ0KCksXFxyXFxuICAgICAgICB5OiAkKHRoaXMpLnNjcm9sbFRvcCgpXFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICAkd2F0Y2hlcnMub24oc2Nyb2xsRXZlbnQsIGZ1bmN0aW9uIChldikge1xcclxcbiAgICAgIHZhciBwb3NpdGlvbiA9ICQodGhpcykuZGF0YSgnc2VsZWN0Mi1zY3JvbGwtcG9zaXRpb24nKTtcXHJcXG4gICAgICAkKHRoaXMpLnNjcm9sbFRvcChwb3NpdGlvbi55KTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgICQod2luZG93KS5vbihzY3JvbGxFdmVudCArICcgJyArIHJlc2l6ZUV2ZW50ICsgJyAnICsgb3JpZW50YXRpb25FdmVudCxcXHJcXG4gICAgICBmdW5jdGlvbiAoZSkge1xcclxcbiAgICAgIHNlbGYuX3Bvc2l0aW9uRHJvcGRvd24oKTtcXHJcXG4gICAgICBzZWxmLl9yZXNpemVEcm9wZG93bigpO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBBdHRhY2hCb2R5LnByb3RvdHlwZS5fZGV0YWNoUG9zaXRpb25pbmdIYW5kbGVyID1cXHJcXG4gICAgICBmdW5jdGlvbiAoZGVjb3JhdGVkLCBjb250YWluZXIpIHtcXHJcXG4gICAgdmFyIHNjcm9sbEV2ZW50ID0gJ3Njcm9sbC5zZWxlY3QyLicgKyBjb250YWluZXIuaWQ7XFxyXFxuICAgIHZhciByZXNpemVFdmVudCA9ICdyZXNpemUuc2VsZWN0Mi4nICsgY29udGFpbmVyLmlkO1xcclxcbiAgICB2YXIgb3JpZW50YXRpb25FdmVudCA9ICdvcmllbnRhdGlvbmNoYW5nZS5zZWxlY3QyLicgKyBjb250YWluZXIuaWQ7XFxyXFxuXFxyXFxuICAgIHZhciAkd2F0Y2hlcnMgPSB0aGlzLiRjb250YWluZXIucGFyZW50cygpLmZpbHRlcihVdGlscy5oYXNTY3JvbGwpO1xcclxcbiAgICAkd2F0Y2hlcnMub2ZmKHNjcm9sbEV2ZW50KTtcXHJcXG5cXHJcXG4gICAgJCh3aW5kb3cpLm9mZihzY3JvbGxFdmVudCArICcgJyArIHJlc2l6ZUV2ZW50ICsgJyAnICsgb3JpZW50YXRpb25FdmVudCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQXR0YWNoQm9keS5wcm90b3R5cGUuX3Bvc2l0aW9uRHJvcGRvd24gPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciAkd2luZG93ID0gJCh3aW5kb3cpO1xcclxcblxcclxcbiAgICB2YXIgaXNDdXJyZW50bHlBYm92ZSA9IHRoaXMuJGRyb3Bkb3duLmhhc0NsYXNzKCdzZWxlY3QyLWRyb3Bkb3duLS1hYm92ZScpO1xcclxcbiAgICB2YXIgaXNDdXJyZW50bHlCZWxvdyA9IHRoaXMuJGRyb3Bkb3duLmhhc0NsYXNzKCdzZWxlY3QyLWRyb3Bkb3duLS1iZWxvdycpO1xcclxcblxcclxcbiAgICB2YXIgbmV3RGlyZWN0aW9uID0gbnVsbDtcXHJcXG5cXHJcXG4gICAgdmFyIG9mZnNldCA9IHRoaXMuJGNvbnRhaW5lci5vZmZzZXQoKTtcXHJcXG5cXHJcXG4gICAgb2Zmc2V0LmJvdHRvbSA9IG9mZnNldC50b3AgKyB0aGlzLiRjb250YWluZXIub3V0ZXJIZWlnaHQoZmFsc2UpO1xcclxcblxcclxcbiAgICB2YXIgY29udGFpbmVyID0ge1xcclxcbiAgICAgIGhlaWdodDogdGhpcy4kY29udGFpbmVyLm91dGVySGVpZ2h0KGZhbHNlKVxcclxcbiAgICB9O1xcclxcblxcclxcbiAgICBjb250YWluZXIudG9wID0gb2Zmc2V0LnRvcDtcXHJcXG4gICAgY29udGFpbmVyLmJvdHRvbSA9IG9mZnNldC50b3AgKyBjb250YWluZXIuaGVpZ2h0O1xcclxcblxcclxcbiAgICB2YXIgZHJvcGRvd24gPSB7XFxyXFxuICAgICAgaGVpZ2h0OiB0aGlzLiRkcm9wZG93bi5vdXRlckhlaWdodChmYWxzZSlcXHJcXG4gICAgfTtcXHJcXG5cXHJcXG4gICAgdmFyIHZpZXdwb3J0ID0ge1xcclxcbiAgICAgIHRvcDogJHdpbmRvdy5zY3JvbGxUb3AoKSxcXHJcXG4gICAgICBib3R0b206ICR3aW5kb3cuc2Nyb2xsVG9wKCkgKyAkd2luZG93LmhlaWdodCgpXFxyXFxuICAgIH07XFxyXFxuXFxyXFxuICAgIHZhciBlbm91Z2hSb29tQWJvdmUgPSB2aWV3cG9ydC50b3AgPCAob2Zmc2V0LnRvcCAtIGRyb3Bkb3duLmhlaWdodCk7XFxyXFxuICAgIHZhciBlbm91Z2hSb29tQmVsb3cgPSB2aWV3cG9ydC5ib3R0b20gPiAob2Zmc2V0LmJvdHRvbSArIGRyb3Bkb3duLmhlaWdodCk7XFxyXFxuXFxyXFxuICAgIHZhciBjc3MgPSB7XFxyXFxuICAgICAgbGVmdDogb2Zmc2V0LmxlZnQsXFxyXFxuICAgICAgdG9wOiBjb250YWluZXIuYm90dG9tXFxyXFxuICAgIH07XFxyXFxuXFxyXFxuICAgIC8vIERldGVybWluZSB3aGF0IHRoZSBwYXJlbnQgZWxlbWVudCBpcyB0byB1c2UgZm9yIGNhbGNpdWxhdGluZyB0aGUgb2Zmc2V0XFxyXFxuICAgIHZhciAkb2Zmc2V0UGFyZW50ID0gdGhpcy4kZHJvcGRvd25QYXJlbnQ7XFxyXFxuXFxyXFxuICAgIC8vIEZvciBzdGF0aWNhbGx5IHBvc2l0b25lZCBlbGVtZW50cywgd2UgbmVlZCB0byBnZXQgdGhlIGVsZW1lbnRcXHJcXG4gICAgLy8gdGhhdCBpcyBkZXRlcm1pbmluZyB0aGUgb2Zmc2V0XFxyXFxuICAgIGlmICgkb2Zmc2V0UGFyZW50LmNzcygncG9zaXRpb24nKSA9PT0gJ3N0YXRpYycpIHtcXHJcXG4gICAgICAkb2Zmc2V0UGFyZW50ID0gJG9mZnNldFBhcmVudC5vZmZzZXRQYXJlbnQoKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB2YXIgcGFyZW50T2Zmc2V0ID0gJG9mZnNldFBhcmVudC5vZmZzZXQoKTtcXHJcXG5cXHJcXG4gICAgY3NzLnRvcCAtPSBwYXJlbnRPZmZzZXQudG9wO1xcclxcbiAgICBjc3MubGVmdCAtPSBwYXJlbnRPZmZzZXQubGVmdDtcXHJcXG5cXHJcXG4gICAgaWYgKCFpc0N1cnJlbnRseUFib3ZlICYmICFpc0N1cnJlbnRseUJlbG93KSB7XFxyXFxuICAgICAgbmV3RGlyZWN0aW9uID0gJ2JlbG93JztcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAoIWVub3VnaFJvb21CZWxvdyAmJiBlbm91Z2hSb29tQWJvdmUgJiYgIWlzQ3VycmVudGx5QWJvdmUpIHtcXHJcXG4gICAgICBuZXdEaXJlY3Rpb24gPSAnYWJvdmUnO1xcclxcbiAgICB9IGVsc2UgaWYgKCFlbm91Z2hSb29tQWJvdmUgJiYgZW5vdWdoUm9vbUJlbG93ICYmIGlzQ3VycmVudGx5QWJvdmUpIHtcXHJcXG4gICAgICBuZXdEaXJlY3Rpb24gPSAnYmVsb3cnO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChuZXdEaXJlY3Rpb24gPT0gJ2Fib3ZlJyB8fFxcclxcbiAgICAgIChpc0N1cnJlbnRseUFib3ZlICYmIG5ld0RpcmVjdGlvbiAhPT0gJ2JlbG93JykpIHtcXHJcXG4gICAgICBjc3MudG9wID0gY29udGFpbmVyLnRvcCAtIHBhcmVudE9mZnNldC50b3AgLSBkcm9wZG93bi5oZWlnaHQ7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKG5ld0RpcmVjdGlvbiAhPSBudWxsKSB7XFxyXFxuICAgICAgdGhpcy4kZHJvcGRvd25cXHJcXG4gICAgICAgIC5yZW1vdmVDbGFzcygnc2VsZWN0Mi1kcm9wZG93bi0tYmVsb3cgc2VsZWN0Mi1kcm9wZG93bi0tYWJvdmUnKVxcclxcbiAgICAgICAgLmFkZENsYXNzKCdzZWxlY3QyLWRyb3Bkb3duLS0nICsgbmV3RGlyZWN0aW9uKTtcXHJcXG4gICAgICB0aGlzLiRjb250YWluZXJcXHJcXG4gICAgICAgIC5yZW1vdmVDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLWJlbG93IHNlbGVjdDItY29udGFpbmVyLS1hYm92ZScpXFxyXFxuICAgICAgICAuYWRkQ2xhc3MoJ3NlbGVjdDItY29udGFpbmVyLS0nICsgbmV3RGlyZWN0aW9uKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLiRkcm9wZG93bkNvbnRhaW5lci5jc3MoY3NzKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBBdHRhY2hCb2R5LnByb3RvdHlwZS5fcmVzaXplRHJvcGRvd24gPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciBjc3MgPSB7XFxyXFxuICAgICAgd2lkdGg6IHRoaXMuJGNvbnRhaW5lci5vdXRlcldpZHRoKGZhbHNlKSArICdweCdcXHJcXG4gICAgfTtcXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMub3B0aW9ucy5nZXQoJ2Ryb3Bkb3duQXV0b1dpZHRoJykpIHtcXHJcXG4gICAgICBjc3MubWluV2lkdGggPSBjc3Mud2lkdGg7XFxyXFxuICAgICAgY3NzLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcXHJcXG4gICAgICBjc3Mud2lkdGggPSAnYXV0byc7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy4kZHJvcGRvd24uY3NzKGNzcyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgQXR0YWNoQm9keS5wcm90b3R5cGUuX3Nob3dEcm9wZG93biA9IGZ1bmN0aW9uIChkZWNvcmF0ZWQpIHtcXHJcXG4gICAgdGhpcy4kZHJvcGRvd25Db250YWluZXIuYXBwZW5kVG8odGhpcy4kZHJvcGRvd25QYXJlbnQpO1xcclxcblxcclxcbiAgICB0aGlzLl9wb3NpdGlvbkRyb3Bkb3duKCk7XFxyXFxuICAgIHRoaXMuX3Jlc2l6ZURyb3Bkb3duKCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIEF0dGFjaEJvZHk7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL2Ryb3Bkb3duL21pbmltdW1SZXN1bHRzRm9yU2VhcmNoJyxbXFxyXFxuXFxyXFxuXSwgZnVuY3Rpb24gKCkge1xcclxcbiAgZnVuY3Rpb24gY291bnRSZXN1bHRzIChkYXRhKSB7XFxyXFxuICAgIHZhciBjb3VudCA9IDA7XFxyXFxuXFxyXFxuICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGF0YS5sZW5ndGg7IGQrKykge1xcclxcbiAgICAgIHZhciBpdGVtID0gZGF0YVtkXTtcXHJcXG5cXHJcXG4gICAgICBpZiAoaXRlbS5jaGlsZHJlbikge1xcclxcbiAgICAgICAgY291bnQgKz0gY291bnRSZXN1bHRzKGl0ZW0uY2hpbGRyZW4pO1xcclxcbiAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICBjb3VudCsrO1xcclxcbiAgICAgIH1cXHJcXG4gICAgfVxcclxcblxcclxcbiAgICByZXR1cm4gY291bnQ7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBmdW5jdGlvbiBNaW5pbXVtUmVzdWx0c0ZvclNlYXJjaCAoZGVjb3JhdGVkLCAkZWxlbWVudCwgb3B0aW9ucywgZGF0YUFkYXB0ZXIpIHtcXHJcXG4gICAgdGhpcy5taW5pbXVtUmVzdWx0c0ZvclNlYXJjaCA9IG9wdGlvbnMuZ2V0KCdtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaCcpO1xcclxcblxcclxcbiAgICBpZiAodGhpcy5taW5pbXVtUmVzdWx0c0ZvclNlYXJjaCA8IDApIHtcXHJcXG4gICAgICB0aGlzLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoID0gSW5maW5pdHk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgJGVsZW1lbnQsIG9wdGlvbnMsIGRhdGFBZGFwdGVyKTtcXHJcXG4gIH1cXHJcXG5cXHJcXG4gIE1pbmltdW1SZXN1bHRzRm9yU2VhcmNoLnByb3RvdHlwZS5zaG93U2VhcmNoID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgcGFyYW1zKSB7XFxyXFxuICAgIGlmIChjb3VudFJlc3VsdHMocGFyYW1zLmRhdGEucmVzdWx0cykgPCB0aGlzLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoKSB7XFxyXFxuICAgICAgcmV0dXJuIGZhbHNlO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHJldHVybiBkZWNvcmF0ZWQuY2FsbCh0aGlzLCBwYXJhbXMpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBNaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZHJvcGRvd24vc2VsZWN0T25DbG9zZScsW1xcclxcblxcclxcbl0sIGZ1bmN0aW9uICgpIHtcXHJcXG4gIGZ1bmN0aW9uIFNlbGVjdE9uQ2xvc2UgKCkgeyB9XFxyXFxuXFxyXFxuICBTZWxlY3RPbkNsb3NlLnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgY29udGFpbmVyLCAkY29udGFpbmVyKTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdjbG9zZScsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBzZWxmLl9oYW5kbGVTZWxlY3RPbkNsb3NlKHBhcmFtcyk7XFxyXFxuICAgIH0pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdE9uQ2xvc2UucHJvdG90eXBlLl9oYW5kbGVTZWxlY3RPbkNsb3NlID0gZnVuY3Rpb24gKF8sIHBhcmFtcykge1xcclxcbiAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5vcmlnaW5hbFNlbGVjdDJFdmVudCAhPSBudWxsKSB7XFxyXFxuICAgICAgdmFyIGV2ZW50ID0gcGFyYW1zLm9yaWdpbmFsU2VsZWN0MkV2ZW50O1xcclxcblxcclxcbiAgICAgIC8vIERvbid0IHNlbGVjdCBhbiBpdGVtIGlmIHRoZSBjbG9zZSBldmVudCB3YXMgdHJpZ2dlcmVkIGZyb20gYSBzZWxlY3Qgb3JcXHJcXG4gICAgICAvLyB1bnNlbGVjdCBldmVudFxcclxcbiAgICAgIGlmIChldmVudC5fdHlwZSA9PT0gJ3NlbGVjdCcgfHwgZXZlbnQuX3R5cGUgPT09ICd1bnNlbGVjdCcpIHtcXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyICRoaWdobGlnaHRlZFJlc3VsdHMgPSB0aGlzLmdldEhpZ2hsaWdodGVkUmVzdWx0cygpO1xcclxcblxcclxcbiAgICAvLyBPbmx5IHNlbGVjdCBoaWdobGlnaHRlZCByZXN1bHRzXFxyXFxuICAgIGlmICgkaGlnaGxpZ2h0ZWRSZXN1bHRzLmxlbmd0aCA8IDEpIHtcXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyIGRhdGEgPSAkaGlnaGxpZ2h0ZWRSZXN1bHRzLmRhdGEoJ2RhdGEnKTtcXHJcXG5cXHJcXG4gICAgLy8gRG9uJ3QgcmUtc2VsZWN0IGFscmVhZHkgc2VsZWN0ZWQgcmVzdWx0ZVxcclxcbiAgICBpZiAoXFxyXFxuICAgICAgKGRhdGEuZWxlbWVudCAhPSBudWxsICYmIGRhdGEuZWxlbWVudC5zZWxlY3RlZCkgfHxcXHJcXG4gICAgICAoZGF0YS5lbGVtZW50ID09IG51bGwgJiYgZGF0YS5zZWxlY3RlZClcXHJcXG4gICAgKSB7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMudHJpZ2dlcignc2VsZWN0Jywge1xcclxcbiAgICAgICAgZGF0YTogZGF0YVxcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gU2VsZWN0T25DbG9zZTtcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvZHJvcGRvd24vY2xvc2VPblNlbGVjdCcsW1xcclxcblxcclxcbl0sIGZ1bmN0aW9uICgpIHtcXHJcXG4gIGZ1bmN0aW9uIENsb3NlT25TZWxlY3QgKCkgeyB9XFxyXFxuXFxyXFxuICBDbG9zZU9uU2VsZWN0LnByb3RvdHlwZS5iaW5kID0gZnVuY3Rpb24gKGRlY29yYXRlZCwgY29udGFpbmVyLCAkY29udGFpbmVyKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgZGVjb3JhdGVkLmNhbGwodGhpcywgY29udGFpbmVyLCAkY29udGFpbmVyKTtcXHJcXG5cXHJcXG4gICAgY29udGFpbmVyLm9uKCdzZWxlY3QnLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgc2VsZi5fc2VsZWN0VHJpZ2dlcmVkKGV2dCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICBjb250YWluZXIub24oJ3Vuc2VsZWN0JywgZnVuY3Rpb24gKGV2dCkge1xcclxcbiAgICAgIHNlbGYuX3NlbGVjdFRyaWdnZXJlZChldnQpO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBDbG9zZU9uU2VsZWN0LnByb3RvdHlwZS5fc2VsZWN0VHJpZ2dlcmVkID0gZnVuY3Rpb24gKF8sIGV2dCkge1xcclxcbiAgICB2YXIgb3JpZ2luYWxFdmVudCA9IGV2dC5vcmlnaW5hbEV2ZW50O1xcclxcblxcclxcbiAgICAvLyBEb24ndCBjbG9zZSBpZiB0aGUgY29udHJvbCBrZXkgaXMgYmVpbmcgaGVsZFxcclxcbiAgICBpZiAob3JpZ2luYWxFdmVudCAmJiBvcmlnaW5hbEV2ZW50LmN0cmxLZXkpIHtcXHJcXG4gICAgICByZXR1cm47XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdGhpcy50cmlnZ2VyKCdjbG9zZScsIHtcXHJcXG4gICAgICBvcmlnaW5hbEV2ZW50OiBvcmlnaW5hbEV2ZW50LFxcclxcbiAgICAgIG9yaWdpbmFsU2VsZWN0MkV2ZW50OiBldnRcXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgcmV0dXJuIENsb3NlT25TZWxlY3Q7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdzZWxlY3QyL2kxOG4vZW4nLFtdLGZ1bmN0aW9uICgpIHtcXHJcXG4gIC8vIEVuZ2xpc2hcXHJcXG4gIHJldHVybiB7XFxyXFxuICAgIGVycm9yTG9hZGluZzogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHJldHVybiAnVGhlIHJlc3VsdHMgY291bGQgbm90IGJlIGxvYWRlZC4nO1xcclxcbiAgICB9LFxcclxcbiAgICBpbnB1dFRvb0xvbmc6IGZ1bmN0aW9uIChhcmdzKSB7XFxyXFxuICAgICAgdmFyIG92ZXJDaGFycyA9IGFyZ3MuaW5wdXQubGVuZ3RoIC0gYXJncy5tYXhpbXVtO1xcclxcblxcclxcbiAgICAgIHZhciBtZXNzYWdlID0gJ1BsZWFzZSBkZWxldGUgJyArIG92ZXJDaGFycyArICcgY2hhcmFjdGVyJztcXHJcXG5cXHJcXG4gICAgICBpZiAob3ZlckNoYXJzICE9IDEpIHtcXHJcXG4gICAgICAgIG1lc3NhZ2UgKz0gJ3MnO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICByZXR1cm4gbWVzc2FnZTtcXHJcXG4gICAgfSxcXHJcXG4gICAgaW5wdXRUb29TaG9ydDogZnVuY3Rpb24gKGFyZ3MpIHtcXHJcXG4gICAgICB2YXIgcmVtYWluaW5nQ2hhcnMgPSBhcmdzLm1pbmltdW0gLSBhcmdzLmlucHV0Lmxlbmd0aDtcXHJcXG5cXHJcXG4gICAgICB2YXIgbWVzc2FnZSA9ICdQbGVhc2UgZW50ZXIgJyArIHJlbWFpbmluZ0NoYXJzICsgJyBvciBtb3JlIGNoYXJhY3RlcnMnO1xcclxcblxcclxcbiAgICAgIHJldHVybiBtZXNzYWdlO1xcclxcbiAgICB9LFxcclxcbiAgICBsb2FkaW5nTW9yZTogZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHJldHVybiAnTG9hZGluZyBtb3JlIHJlc3VsdHPigKYnO1xcclxcbiAgICB9LFxcclxcbiAgICBtYXhpbXVtU2VsZWN0ZWQ6IGZ1bmN0aW9uIChhcmdzKSB7XFxyXFxuICAgICAgdmFyIG1lc3NhZ2UgPSAnWW91IGNhbiBvbmx5IHNlbGVjdCAnICsgYXJncy5tYXhpbXVtICsgJyBpdGVtJztcXHJcXG5cXHJcXG4gICAgICBpZiAoYXJncy5tYXhpbXVtICE9IDEpIHtcXHJcXG4gICAgICAgIG1lc3NhZ2UgKz0gJ3MnO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICByZXR1cm4gbWVzc2FnZTtcXHJcXG4gICAgfSxcXHJcXG4gICAgbm9SZXN1bHRzOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgcmV0dXJuICdObyByZXN1bHRzIGZvdW5kJztcXHJcXG4gICAgfSxcXHJcXG4gICAgc2VhcmNoaW5nOiBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgcmV0dXJuICdTZWFyY2hpbmfigKYnO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnc2VsZWN0Mi9kZWZhdWx0cycsW1xcclxcbiAgJ2pxdWVyeScsXFxyXFxuICAncmVxdWlyZScsXFxyXFxuXFxyXFxuICAnLi9yZXN1bHRzJyxcXHJcXG5cXHJcXG4gICcuL3NlbGVjdGlvbi9zaW5nbGUnLFxcclxcbiAgJy4vc2VsZWN0aW9uL211bHRpcGxlJyxcXHJcXG4gICcuL3NlbGVjdGlvbi9wbGFjZWhvbGRlcicsXFxyXFxuICAnLi9zZWxlY3Rpb24vYWxsb3dDbGVhcicsXFxyXFxuICAnLi9zZWxlY3Rpb24vc2VhcmNoJyxcXHJcXG4gICcuL3NlbGVjdGlvbi9ldmVudFJlbGF5JyxcXHJcXG5cXHJcXG4gICcuL3V0aWxzJyxcXHJcXG4gICcuL3RyYW5zbGF0aW9uJyxcXHJcXG4gICcuL2RpYWNyaXRpY3MnLFxcclxcblxcclxcbiAgJy4vZGF0YS9zZWxlY3QnLFxcclxcbiAgJy4vZGF0YS9hcnJheScsXFxyXFxuICAnLi9kYXRhL2FqYXgnLFxcclxcbiAgJy4vZGF0YS90YWdzJyxcXHJcXG4gICcuL2RhdGEvdG9rZW5pemVyJyxcXHJcXG4gICcuL2RhdGEvbWluaW11bUlucHV0TGVuZ3RoJyxcXHJcXG4gICcuL2RhdGEvbWF4aW11bUlucHV0TGVuZ3RoJyxcXHJcXG4gICcuL2RhdGEvbWF4aW11bVNlbGVjdGlvbkxlbmd0aCcsXFxyXFxuXFxyXFxuICAnLi9kcm9wZG93bicsXFxyXFxuICAnLi9kcm9wZG93bi9zZWFyY2gnLFxcclxcbiAgJy4vZHJvcGRvd24vaGlkZVBsYWNlaG9sZGVyJyxcXHJcXG4gICcuL2Ryb3Bkb3duL2luZmluaXRlU2Nyb2xsJyxcXHJcXG4gICcuL2Ryb3Bkb3duL2F0dGFjaEJvZHknLFxcclxcbiAgJy4vZHJvcGRvd24vbWluaW11bVJlc3VsdHNGb3JTZWFyY2gnLFxcclxcbiAgJy4vZHJvcGRvd24vc2VsZWN0T25DbG9zZScsXFxyXFxuICAnLi9kcm9wZG93bi9jbG9zZU9uU2VsZWN0JyxcXHJcXG5cXHJcXG4gICcuL2kxOG4vZW4nXFxyXFxuXSwgZnVuY3Rpb24gKCQsIHJlcXVpcmUsXFxyXFxuXFxyXFxuICAgICAgICAgICAgIFJlc3VsdHNMaXN0LFxcclxcblxcclxcbiAgICAgICAgICAgICBTaW5nbGVTZWxlY3Rpb24sIE11bHRpcGxlU2VsZWN0aW9uLCBQbGFjZWhvbGRlciwgQWxsb3dDbGVhcixcXHJcXG4gICAgICAgICAgICAgU2VsZWN0aW9uU2VhcmNoLCBFdmVudFJlbGF5LFxcclxcblxcclxcbiAgICAgICAgICAgICBVdGlscywgVHJhbnNsYXRpb24sIERJQUNSSVRJQ1MsXFxyXFxuXFxyXFxuICAgICAgICAgICAgIFNlbGVjdERhdGEsIEFycmF5RGF0YSwgQWpheERhdGEsIFRhZ3MsIFRva2VuaXplcixcXHJcXG4gICAgICAgICAgICAgTWluaW11bUlucHV0TGVuZ3RoLCBNYXhpbXVtSW5wdXRMZW5ndGgsIE1heGltdW1TZWxlY3Rpb25MZW5ndGgsXFxyXFxuXFxyXFxuICAgICAgICAgICAgIERyb3Bkb3duLCBEcm9wZG93blNlYXJjaCwgSGlkZVBsYWNlaG9sZGVyLCBJbmZpbml0ZVNjcm9sbCxcXHJcXG4gICAgICAgICAgICAgQXR0YWNoQm9keSwgTWluaW11bVJlc3VsdHNGb3JTZWFyY2gsIFNlbGVjdE9uQ2xvc2UsIENsb3NlT25TZWxlY3QsXFxyXFxuXFxyXFxuICAgICAgICAgICAgIEVuZ2xpc2hUcmFuc2xhdGlvbikge1xcclxcbiAgZnVuY3Rpb24gRGVmYXVsdHMgKCkge1xcclxcbiAgICB0aGlzLnJlc2V0KCk7XFxyXFxuICB9XFxyXFxuXFxyXFxuICBEZWZhdWx0cy5wcm90b3R5cGUuYXBwbHkgPSBmdW5jdGlvbiAob3B0aW9ucykge1xcclxcbiAgICBvcHRpb25zID0gJC5leHRlbmQodHJ1ZSwge30sIHRoaXMuZGVmYXVsdHMsIG9wdGlvbnMpO1xcclxcblxcclxcbiAgICBpZiAob3B0aW9ucy5kYXRhQWRhcHRlciA9PSBudWxsKSB7XFxyXFxuICAgICAgaWYgKG9wdGlvbnMuYWpheCAhPSBudWxsKSB7XFxyXFxuICAgICAgICBvcHRpb25zLmRhdGFBZGFwdGVyID0gQWpheERhdGE7XFxyXFxuICAgICAgfSBlbHNlIGlmIChvcHRpb25zLmRhdGEgIT0gbnVsbCkge1xcclxcbiAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlciA9IEFycmF5RGF0YTtcXHJcXG4gICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlciA9IFNlbGVjdERhdGE7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmIChvcHRpb25zLm1pbmltdW1JbnB1dExlbmd0aCA+IDApIHtcXHJcXG4gICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlcixcXHJcXG4gICAgICAgICAgTWluaW11bUlucHV0TGVuZ3RoXFxyXFxuICAgICAgICApO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBpZiAob3B0aW9ucy5tYXhpbXVtSW5wdXRMZW5ndGggPiAwKSB7XFxyXFxuICAgICAgICBvcHRpb25zLmRhdGFBZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXFxyXFxuICAgICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIsXFxyXFxuICAgICAgICAgIE1heGltdW1JbnB1dExlbmd0aFxcclxcbiAgICAgICAgKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgaWYgKG9wdGlvbnMubWF4aW11bVNlbGVjdGlvbkxlbmd0aCA+IDApIHtcXHJcXG4gICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlcixcXHJcXG4gICAgICAgICAgTWF4aW11bVNlbGVjdGlvbkxlbmd0aFxcclxcbiAgICAgICAgKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgaWYgKG9wdGlvbnMudGFncykge1xcclxcbiAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKG9wdGlvbnMuZGF0YUFkYXB0ZXIsIFRhZ3MpO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBpZiAob3B0aW9ucy50b2tlblNlcGFyYXRvcnMgIT0gbnVsbCB8fCBvcHRpb25zLnRva2VuaXplciAhPSBudWxsKSB7XFxyXFxuICAgICAgICBvcHRpb25zLmRhdGFBZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXFxyXFxuICAgICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIsXFxyXFxuICAgICAgICAgIFRva2VuaXplclxcclxcbiAgICAgICAgKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgaWYgKG9wdGlvbnMucXVlcnkgIT0gbnVsbCkge1xcclxcbiAgICAgICAgdmFyIFF1ZXJ5ID0gcmVxdWlyZShvcHRpb25zLmFtZEJhc2UgKyAnY29tcGF0L3F1ZXJ5Jyk7XFxyXFxuXFxyXFxuICAgICAgICBvcHRpb25zLmRhdGFBZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXFxyXFxuICAgICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIsXFxyXFxuICAgICAgICAgIFF1ZXJ5XFxyXFxuICAgICAgICApO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBpZiAob3B0aW9ucy5pbml0U2VsZWN0aW9uICE9IG51bGwpIHtcXHJcXG4gICAgICAgIHZhciBJbml0U2VsZWN0aW9uID0gcmVxdWlyZShvcHRpb25zLmFtZEJhc2UgKyAnY29tcGF0L2luaXRTZWxlY3Rpb24nKTtcXHJcXG5cXHJcXG4gICAgICAgIG9wdGlvbnMuZGF0YUFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5kYXRhQWRhcHRlcixcXHJcXG4gICAgICAgICAgSW5pdFNlbGVjdGlvblxcclxcbiAgICAgICAgKTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKG9wdGlvbnMucmVzdWx0c0FkYXB0ZXIgPT0gbnVsbCkge1xcclxcbiAgICAgIG9wdGlvbnMucmVzdWx0c0FkYXB0ZXIgPSBSZXN1bHRzTGlzdDtcXHJcXG5cXHJcXG4gICAgICBpZiAob3B0aW9ucy5hamF4ICE9IG51bGwpIHtcXHJcXG4gICAgICAgIG9wdGlvbnMucmVzdWx0c0FkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5yZXN1bHRzQWRhcHRlcixcXHJcXG4gICAgICAgICAgSW5maW5pdGVTY3JvbGxcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmIChvcHRpb25zLnBsYWNlaG9sZGVyICE9IG51bGwpIHtcXHJcXG4gICAgICAgIG9wdGlvbnMucmVzdWx0c0FkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5yZXN1bHRzQWRhcHRlcixcXHJcXG4gICAgICAgICAgSGlkZVBsYWNlaG9sZGVyXFxyXFxuICAgICAgICApO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBpZiAob3B0aW9ucy5zZWxlY3RPbkNsb3NlKSB7XFxyXFxuICAgICAgICBvcHRpb25zLnJlc3VsdHNBZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXFxyXFxuICAgICAgICAgIG9wdGlvbnMucmVzdWx0c0FkYXB0ZXIsXFxyXFxuICAgICAgICAgIFNlbGVjdE9uQ2xvc2VcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmIChvcHRpb25zLmRyb3Bkb3duQWRhcHRlciA9PSBudWxsKSB7XFxyXFxuICAgICAgaWYgKG9wdGlvbnMubXVsdGlwbGUpIHtcXHJcXG4gICAgICAgIG9wdGlvbnMuZHJvcGRvd25BZGFwdGVyID0gRHJvcGRvd247XFxyXFxuICAgICAgfSBlbHNlIHtcXHJcXG4gICAgICAgIHZhciBTZWFyY2hhYmxlRHJvcGRvd24gPSBVdGlscy5EZWNvcmF0ZShEcm9wZG93biwgRHJvcGRvd25TZWFyY2gpO1xcclxcblxcclxcbiAgICAgICAgb3B0aW9ucy5kcm9wZG93bkFkYXB0ZXIgPSBTZWFyY2hhYmxlRHJvcGRvd247XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmIChvcHRpb25zLm1pbmltdW1SZXN1bHRzRm9yU2VhcmNoICE9PSAwKSB7XFxyXFxuICAgICAgICBvcHRpb25zLmRyb3Bkb3duQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKFxcclxcbiAgICAgICAgICBvcHRpb25zLmRyb3Bkb3duQWRhcHRlcixcXHJcXG4gICAgICAgICAgTWluaW11bVJlc3VsdHNGb3JTZWFyY2hcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmIChvcHRpb25zLmNsb3NlT25TZWxlY3QpIHtcXHJcXG4gICAgICAgIG9wdGlvbnMuZHJvcGRvd25BZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXFxyXFxuICAgICAgICAgIG9wdGlvbnMuZHJvcGRvd25BZGFwdGVyLFxcclxcbiAgICAgICAgICBDbG9zZU9uU2VsZWN0XFxyXFxuICAgICAgICApO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICBpZiAoXFxyXFxuICAgICAgICBvcHRpb25zLmRyb3Bkb3duQ3NzQ2xhc3MgIT0gbnVsbCB8fFxcclxcbiAgICAgICAgb3B0aW9ucy5kcm9wZG93bkNzcyAhPSBudWxsIHx8XFxyXFxuICAgICAgICBvcHRpb25zLmFkYXB0RHJvcGRvd25Dc3NDbGFzcyAhPSBudWxsXFxyXFxuICAgICAgKSB7XFxyXFxuICAgICAgICB2YXIgRHJvcGRvd25DU1MgPSByZXF1aXJlKG9wdGlvbnMuYW1kQmFzZSArICdjb21wYXQvZHJvcGRvd25Dc3MnKTtcXHJcXG5cXHJcXG4gICAgICAgIG9wdGlvbnMuZHJvcGRvd25BZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXFxyXFxuICAgICAgICAgIG9wdGlvbnMuZHJvcGRvd25BZGFwdGVyLFxcclxcbiAgICAgICAgICBEcm9wZG93bkNTU1xcclxcbiAgICAgICAgKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgb3B0aW9ucy5kcm9wZG93bkFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgIG9wdGlvbnMuZHJvcGRvd25BZGFwdGVyLFxcclxcbiAgICAgICAgQXR0YWNoQm9keVxcclxcbiAgICAgICk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKG9wdGlvbnMuc2VsZWN0aW9uQWRhcHRlciA9PSBudWxsKSB7XFxyXFxuICAgICAgaWYgKG9wdGlvbnMubXVsdGlwbGUpIHtcXHJcXG4gICAgICAgIG9wdGlvbnMuc2VsZWN0aW9uQWRhcHRlciA9IE11bHRpcGxlU2VsZWN0aW9uO1xcclxcbiAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICBvcHRpb25zLnNlbGVjdGlvbkFkYXB0ZXIgPSBTaW5nbGVTZWxlY3Rpb247XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIC8vIEFkZCB0aGUgcGxhY2Vob2xkZXIgbWl4aW4gaWYgYSBwbGFjZWhvbGRlciB3YXMgc3BlY2lmaWVkXFxyXFxuICAgICAgaWYgKG9wdGlvbnMucGxhY2Vob2xkZXIgIT0gbnVsbCkge1xcclxcbiAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXFxyXFxuICAgICAgICAgIG9wdGlvbnMuc2VsZWN0aW9uQWRhcHRlcixcXHJcXG4gICAgICAgICAgUGxhY2Vob2xkZXJcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmIChvcHRpb25zLmFsbG93Q2xlYXIpIHtcXHJcXG4gICAgICAgIG9wdGlvbnMuc2VsZWN0aW9uQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKFxcclxcbiAgICAgICAgICBvcHRpb25zLnNlbGVjdGlvbkFkYXB0ZXIsXFxyXFxuICAgICAgICAgIEFsbG93Q2xlYXJcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmIChvcHRpb25zLm11bHRpcGxlKSB7XFxyXFxuICAgICAgICBvcHRpb25zLnNlbGVjdGlvbkFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyLFxcclxcbiAgICAgICAgICBTZWxlY3Rpb25TZWFyY2hcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmIChcXHJcXG4gICAgICAgIG9wdGlvbnMuY29udGFpbmVyQ3NzQ2xhc3MgIT0gbnVsbCB8fFxcclxcbiAgICAgICAgb3B0aW9ucy5jb250YWluZXJDc3MgIT0gbnVsbCB8fFxcclxcbiAgICAgICAgb3B0aW9ucy5hZGFwdENvbnRhaW5lckNzc0NsYXNzICE9IG51bGxcXHJcXG4gICAgICApIHtcXHJcXG4gICAgICAgIHZhciBDb250YWluZXJDU1MgPSByZXF1aXJlKG9wdGlvbnMuYW1kQmFzZSArICdjb21wYXQvY29udGFpbmVyQ3NzJyk7XFxyXFxuXFxyXFxuICAgICAgICBvcHRpb25zLnNlbGVjdGlvbkFkYXB0ZXIgPSBVdGlscy5EZWNvcmF0ZShcXHJcXG4gICAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyLFxcclxcbiAgICAgICAgICBDb250YWluZXJDU1NcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIG9wdGlvbnMuc2VsZWN0aW9uQWRhcHRlciA9IFV0aWxzLkRlY29yYXRlKFxcclxcbiAgICAgICAgb3B0aW9ucy5zZWxlY3Rpb25BZGFwdGVyLFxcclxcbiAgICAgICAgRXZlbnRSZWxheVxcclxcbiAgICAgICk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmxhbmd1YWdlID09PSAnc3RyaW5nJykge1xcclxcbiAgICAgIC8vIENoZWNrIGlmIHRoZSBsYW5ndWFnZSBpcyBzcGVjaWZpZWQgd2l0aCBhIHJlZ2lvblxcclxcbiAgICAgIGlmIChvcHRpb25zLmxhbmd1YWdlLmluZGV4T2YoJy0nKSA+IDApIHtcXHJcXG4gICAgICAgIC8vIEV4dHJhY3QgdGhlIHJlZ2lvbiBpbmZvcm1hdGlvbiBpZiBpdCBpcyBpbmNsdWRlZFxcclxcbiAgICAgICAgdmFyIGxhbmd1YWdlUGFydHMgPSBvcHRpb25zLmxhbmd1YWdlLnNwbGl0KCctJyk7XFxyXFxuICAgICAgICB2YXIgYmFzZUxhbmd1YWdlID0gbGFuZ3VhZ2VQYXJ0c1swXTtcXHJcXG5cXHJcXG4gICAgICAgIG9wdGlvbnMubGFuZ3VhZ2UgPSBbb3B0aW9ucy5sYW5ndWFnZSwgYmFzZUxhbmd1YWdlXTtcXHJcXG4gICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgb3B0aW9ucy5sYW5ndWFnZSA9IFtvcHRpb25zLmxhbmd1YWdlXTtcXHJcXG4gICAgICB9XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKCQuaXNBcnJheShvcHRpb25zLmxhbmd1YWdlKSkge1xcclxcbiAgICAgIHZhciBsYW5ndWFnZXMgPSBuZXcgVHJhbnNsYXRpb24oKTtcXHJcXG4gICAgICBvcHRpb25zLmxhbmd1YWdlLnB1c2goJ2VuJyk7XFxyXFxuXFxyXFxuICAgICAgdmFyIGxhbmd1YWdlTmFtZXMgPSBvcHRpb25zLmxhbmd1YWdlO1xcclxcblxcclxcbiAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgbGFuZ3VhZ2VOYW1lcy5sZW5ndGg7IGwrKykge1xcclxcbiAgICAgICAgdmFyIG5hbWUgPSBsYW5ndWFnZU5hbWVzW2xdO1xcclxcbiAgICAgICAgdmFyIGxhbmd1YWdlID0ge307XFxyXFxuXFxyXFxuICAgICAgICB0cnkge1xcclxcbiAgICAgICAgICAvLyBUcnkgdG8gbG9hZCBpdCB3aXRoIHRoZSBvcmlnaW5hbCBuYW1lXFxyXFxuICAgICAgICAgIGxhbmd1YWdlID0gVHJhbnNsYXRpb24ubG9hZFBhdGgobmFtZSk7XFxyXFxuICAgICAgICB9IGNhdGNoIChlKSB7XFxyXFxuICAgICAgICAgIHRyeSB7XFxyXFxuICAgICAgICAgICAgLy8gSWYgd2UgY291bGRuJ3QgbG9hZCBpdCwgY2hlY2sgaWYgaXQgd2Fzbid0IHRoZSBmdWxsIHBhdGhcXHJcXG4gICAgICAgICAgICBuYW1lID0gdGhpcy5kZWZhdWx0cy5hbWRMYW5ndWFnZUJhc2UgKyBuYW1lO1xcclxcbiAgICAgICAgICAgIGxhbmd1YWdlID0gVHJhbnNsYXRpb24ubG9hZFBhdGgobmFtZSk7XFxyXFxuICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XFxyXFxuICAgICAgICAgICAgLy8gVGhlIHRyYW5zbGF0aW9uIGNvdWxkIG5vdCBiZSBsb2FkZWQgYXQgYWxsLiBTb21ldGltZXMgdGhpcyBpc1xcclxcbiAgICAgICAgICAgIC8vIGJlY2F1c2Ugb2YgYSBjb25maWd1cmF0aW9uIHByb2JsZW0sIG90aGVyIHRpbWVzIHRoaXMgY2FuIGJlXFxyXFxuICAgICAgICAgICAgLy8gYmVjYXVzZSBvZiBob3cgU2VsZWN0MiBoZWxwcyBsb2FkIGFsbCBwb3NzaWJsZSB0cmFuc2xhdGlvbiBmaWxlcy5cXHJcXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5kZWJ1ZyAmJiB3aW5kb3cuY29uc29sZSAmJiBjb25zb2xlLndhcm4pIHtcXHJcXG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybihcXHJcXG4gICAgICAgICAgICAgICAgJ1NlbGVjdDI6IFRoZSBsYW5ndWFnZSBmaWxlIGZvciBcXFwiJyArIG5hbWUgKyAnXFxcIiBjb3VsZCBub3QgYmUgJyArXFxyXFxuICAgICAgICAgICAgICAgICdhdXRvbWF0aWNhbGx5IGxvYWRlZC4gQSBmYWxsYmFjayB3aWxsIGJlIHVzZWQgaW5zdGVhZC4nXFxyXFxuICAgICAgICAgICAgICApO1xcclxcbiAgICAgICAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAgICAgICBjb250aW51ZTtcXHJcXG4gICAgICAgICAgfVxcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgbGFuZ3VhZ2VzLmV4dGVuZChsYW5ndWFnZSk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIG9wdGlvbnMudHJhbnNsYXRpb25zID0gbGFuZ3VhZ2VzO1xcclxcbiAgICB9IGVsc2Uge1xcclxcbiAgICAgIHZhciBiYXNlVHJhbnNsYXRpb24gPSBUcmFuc2xhdGlvbi5sb2FkUGF0aChcXHJcXG4gICAgICAgIHRoaXMuZGVmYXVsdHMuYW1kTGFuZ3VhZ2VCYXNlICsgJ2VuJ1xcclxcbiAgICAgICk7XFxyXFxuICAgICAgdmFyIGN1c3RvbVRyYW5zbGF0aW9uID0gbmV3IFRyYW5zbGF0aW9uKG9wdGlvbnMubGFuZ3VhZ2UpO1xcclxcblxcclxcbiAgICAgIGN1c3RvbVRyYW5zbGF0aW9uLmV4dGVuZChiYXNlVHJhbnNsYXRpb24pO1xcclxcblxcclxcbiAgICAgIG9wdGlvbnMudHJhbnNsYXRpb25zID0gY3VzdG9tVHJhbnNsYXRpb247XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgcmV0dXJuIG9wdGlvbnM7XFxyXFxuICB9O1xcclxcblxcclxcbiAgRGVmYXVsdHMucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICBmdW5jdGlvbiBzdHJpcERpYWNyaXRpY3MgKHRleHQpIHtcXHJcXG4gICAgICAvLyBVc2VkICd1bmkgcmFuZ2UgKyBuYW1lZCBmdW5jdGlvbicgZnJvbSBodHRwOi8vanNwZXJmLmNvbS9kaWFjcml0aWNzLzE4XFxyXFxuICAgICAgZnVuY3Rpb24gbWF0Y2goYSkge1xcclxcbiAgICAgICAgcmV0dXJuIERJQUNSSVRJQ1NbYV0gfHwgYTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgcmV0dXJuIHRleHQucmVwbGFjZSgvW15cXFxcdTAwMDAtXFxcXHUwMDdFXS9nLCBtYXRjaCk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgZnVuY3Rpb24gbWF0Y2hlciAocGFyYW1zLCBkYXRhKSB7XFxyXFxuICAgICAgLy8gQWx3YXlzIHJldHVybiB0aGUgb2JqZWN0IGlmIHRoZXJlIGlzIG5vdGhpbmcgdG8gY29tcGFyZVxcclxcbiAgICAgIGlmICgkLnRyaW0ocGFyYW1zLnRlcm0pID09PSAnJykge1xcclxcbiAgICAgICAgcmV0dXJuIGRhdGE7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIC8vIERvIGEgcmVjdXJzaXZlIGNoZWNrIGZvciBvcHRpb25zIHdpdGggY2hpbGRyZW5cXHJcXG4gICAgICBpZiAoZGF0YS5jaGlsZHJlbiAmJiBkYXRhLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcXHJcXG4gICAgICAgIC8vIENsb25lIHRoZSBkYXRhIG9iamVjdCBpZiB0aGVyZSBhcmUgY2hpbGRyZW5cXHJcXG4gICAgICAgIC8vIFRoaXMgaXMgcmVxdWlyZWQgYXMgd2UgbW9kaWZ5IHRoZSBvYmplY3QgdG8gcmVtb3ZlIGFueSBub24tbWF0Y2hlc1xcclxcbiAgICAgICAgdmFyIG1hdGNoID0gJC5leHRlbmQodHJ1ZSwge30sIGRhdGEpO1xcclxcblxcclxcbiAgICAgICAgLy8gQ2hlY2sgZWFjaCBjaGlsZCBvZiB0aGUgb3B0aW9uXFxyXFxuICAgICAgICBmb3IgKHZhciBjID0gZGF0YS5jaGlsZHJlbi5sZW5ndGggLSAxOyBjID49IDA7IGMtLSkge1xcclxcbiAgICAgICAgICB2YXIgY2hpbGQgPSBkYXRhLmNoaWxkcmVuW2NdO1xcclxcblxcclxcbiAgICAgICAgICB2YXIgbWF0Y2hlcyA9IG1hdGNoZXIocGFyYW1zLCBjaGlsZCk7XFxyXFxuXFxyXFxuICAgICAgICAgIC8vIElmIHRoZXJlIHdhc24ndCBhIG1hdGNoLCByZW1vdmUgdGhlIG9iamVjdCBpbiB0aGUgYXJyYXlcXHJcXG4gICAgICAgICAgaWYgKG1hdGNoZXMgPT0gbnVsbCkge1xcclxcbiAgICAgICAgICAgIG1hdGNoLmNoaWxkcmVuLnNwbGljZShjLCAxKTtcXHJcXG4gICAgICAgICAgfVxcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgLy8gSWYgYW55IGNoaWxkcmVuIG1hdGNoZWQsIHJldHVybiB0aGUgbmV3IG9iamVjdFxcclxcbiAgICAgICAgaWYgKG1hdGNoLmNoaWxkcmVuLmxlbmd0aCA+IDApIHtcXHJcXG4gICAgICAgICAgcmV0dXJuIG1hdGNoO1xcclxcbiAgICAgICAgfVxcclxcblxcclxcbiAgICAgICAgLy8gSWYgdGhlcmUgd2VyZSBubyBtYXRjaGluZyBjaGlsZHJlbiwgY2hlY2sganVzdCB0aGUgcGxhaW4gb2JqZWN0XFxyXFxuICAgICAgICByZXR1cm4gbWF0Y2hlcihwYXJhbXMsIG1hdGNoKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgdmFyIG9yaWdpbmFsID0gc3RyaXBEaWFjcml0aWNzKGRhdGEudGV4dCkudG9VcHBlckNhc2UoKTtcXHJcXG4gICAgICB2YXIgdGVybSA9IHN0cmlwRGlhY3JpdGljcyhwYXJhbXMudGVybSkudG9VcHBlckNhc2UoKTtcXHJcXG5cXHJcXG4gICAgICAvLyBDaGVjayBpZiB0aGUgdGV4dCBjb250YWlucyB0aGUgdGVybVxcclxcbiAgICAgIGlmIChvcmlnaW5hbC5pbmRleE9mKHRlcm0pID4gLTEpIHtcXHJcXG4gICAgICAgIHJldHVybiBkYXRhO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAvLyBJZiBpdCBkb2Vzbid0IGNvbnRhaW4gdGhlIHRlcm0sIGRvbid0IHJldHVybiBhbnl0aGluZ1xcclxcbiAgICAgIHJldHVybiBudWxsO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMuZGVmYXVsdHMgPSB7XFxyXFxuICAgICAgYW1kQmFzZTogJy4vJyxcXHJcXG4gICAgICBhbWRMYW5ndWFnZUJhc2U6ICcuL2kxOG4vJyxcXHJcXG4gICAgICBjbG9zZU9uU2VsZWN0OiB0cnVlLFxcclxcbiAgICAgIGRlYnVnOiBmYWxzZSxcXHJcXG4gICAgICBkcm9wZG93bkF1dG9XaWR0aDogZmFsc2UsXFxyXFxuICAgICAgZXNjYXBlTWFya3VwOiBVdGlscy5lc2NhcGVNYXJrdXAsXFxyXFxuICAgICAgbGFuZ3VhZ2U6IEVuZ2xpc2hUcmFuc2xhdGlvbixcXHJcXG4gICAgICBtYXRjaGVyOiBtYXRjaGVyLFxcclxcbiAgICAgIG1pbmltdW1JbnB1dExlbmd0aDogMCxcXHJcXG4gICAgICBtYXhpbXVtSW5wdXRMZW5ndGg6IDAsXFxyXFxuICAgICAgbWF4aW11bVNlbGVjdGlvbkxlbmd0aDogMCxcXHJcXG4gICAgICBtaW5pbXVtUmVzdWx0c0ZvclNlYXJjaDogMCxcXHJcXG4gICAgICBzZWxlY3RPbkNsb3NlOiBmYWxzZSxcXHJcXG4gICAgICBzb3J0ZXI6IGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgICAgICByZXR1cm4gZGF0YTtcXHJcXG4gICAgICB9LFxcclxcbiAgICAgIHRlbXBsYXRlUmVzdWx0OiBmdW5jdGlvbiAocmVzdWx0KSB7XFxyXFxuICAgICAgICByZXR1cm4gcmVzdWx0LnRleHQ7XFxyXFxuICAgICAgfSxcXHJcXG4gICAgICB0ZW1wbGF0ZVNlbGVjdGlvbjogZnVuY3Rpb24gKHNlbGVjdGlvbikge1xcclxcbiAgICAgICAgcmV0dXJuIHNlbGVjdGlvbi50ZXh0O1xcclxcbiAgICAgIH0sXFxyXFxuICAgICAgdGhlbWU6ICdkZWZhdWx0JyxcXHJcXG4gICAgICB3aWR0aDogJ3Jlc29sdmUnXFxyXFxuICAgIH07XFxyXFxuICB9O1xcclxcblxcclxcbiAgRGVmYXVsdHMucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XFxyXFxuICAgIHZhciBjYW1lbEtleSA9ICQuY2FtZWxDYXNlKGtleSk7XFxyXFxuXFxyXFxuICAgIHZhciBkYXRhID0ge307XFxyXFxuICAgIGRhdGFbY2FtZWxLZXldID0gdmFsdWU7XFxyXFxuXFxyXFxuICAgIHZhciBjb252ZXJ0ZWREYXRhID0gVXRpbHMuX2NvbnZlcnREYXRhKGRhdGEpO1xcclxcblxcclxcbiAgICAkLmV4dGVuZCh0aGlzLmRlZmF1bHRzLCBjb252ZXJ0ZWREYXRhKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICB2YXIgZGVmYXVsdHMgPSBuZXcgRGVmYXVsdHMoKTtcXHJcXG5cXHJcXG4gIHJldHVybiBkZWZhdWx0cztcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvb3B0aW9ucycsW1xcclxcbiAgJ3JlcXVpcmUnLFxcclxcbiAgJ2pxdWVyeScsXFxyXFxuICAnLi9kZWZhdWx0cycsXFxyXFxuICAnLi91dGlscydcXHJcXG5dLCBmdW5jdGlvbiAocmVxdWlyZSwgJCwgRGVmYXVsdHMsIFV0aWxzKSB7XFxyXFxuICBmdW5jdGlvbiBPcHRpb25zIChvcHRpb25zLCAkZWxlbWVudCkge1xcclxcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xcclxcblxcclxcbiAgICBpZiAoJGVsZW1lbnQgIT0gbnVsbCkge1xcclxcbiAgICAgIHRoaXMuZnJvbUVsZW1lbnQoJGVsZW1lbnQpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMub3B0aW9ucyA9IERlZmF1bHRzLmFwcGx5KHRoaXMub3B0aW9ucyk7XFxyXFxuXFxyXFxuICAgIGlmICgkZWxlbWVudCAmJiAkZWxlbWVudC5pcygnaW5wdXQnKSkge1xcclxcbiAgICAgIHZhciBJbnB1dENvbXBhdCA9IHJlcXVpcmUodGhpcy5nZXQoJ2FtZEJhc2UnKSArICdjb21wYXQvaW5wdXREYXRhJyk7XFxyXFxuXFxyXFxuICAgICAgdGhpcy5vcHRpb25zLmRhdGFBZGFwdGVyID0gVXRpbHMuRGVjb3JhdGUoXFxyXFxuICAgICAgICB0aGlzLm9wdGlvbnMuZGF0YUFkYXB0ZXIsXFxyXFxuICAgICAgICBJbnB1dENvbXBhdFxcclxcbiAgICAgICk7XFxyXFxuICAgIH1cXHJcXG4gIH1cXHJcXG5cXHJcXG4gIE9wdGlvbnMucHJvdG90eXBlLmZyb21FbGVtZW50ID0gZnVuY3Rpb24gKCRlKSB7XFxyXFxuICAgIHZhciBleGNsdWRlZERhdGEgPSBbJ3NlbGVjdDInXTtcXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMub3B0aW9ucy5tdWx0aXBsZSA9PSBudWxsKSB7XFxyXFxuICAgICAgdGhpcy5vcHRpb25zLm11bHRpcGxlID0gJGUucHJvcCgnbXVsdGlwbGUnKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAodGhpcy5vcHRpb25zLmRpc2FibGVkID09IG51bGwpIHtcXHJcXG4gICAgICB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgPSAkZS5wcm9wKCdkaXNhYmxlZCcpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLm9wdGlvbnMubGFuZ3VhZ2UgPT0gbnVsbCkge1xcclxcbiAgICAgIGlmICgkZS5wcm9wKCdsYW5nJykpIHtcXHJcXG4gICAgICAgIHRoaXMub3B0aW9ucy5sYW5ndWFnZSA9ICRlLnByb3AoJ2xhbmcnKS50b0xvd2VyQ2FzZSgpO1xcclxcbiAgICAgIH0gZWxzZSBpZiAoJGUuY2xvc2VzdCgnW2xhbmddJykucHJvcCgnbGFuZycpKSB7XFxyXFxuICAgICAgICB0aGlzLm9wdGlvbnMubGFuZ3VhZ2UgPSAkZS5jbG9zZXN0KCdbbGFuZ10nKS5wcm9wKCdsYW5nJyk7XFxyXFxuICAgICAgfVxcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLm9wdGlvbnMuZGlyID09IG51bGwpIHtcXHJcXG4gICAgICBpZiAoJGUucHJvcCgnZGlyJykpIHtcXHJcXG4gICAgICAgIHRoaXMub3B0aW9ucy5kaXIgPSAkZS5wcm9wKCdkaXInKTtcXHJcXG4gICAgICB9IGVsc2UgaWYgKCRlLmNsb3Nlc3QoJ1tkaXJdJykucHJvcCgnZGlyJykpIHtcXHJcXG4gICAgICAgIHRoaXMub3B0aW9ucy5kaXIgPSAkZS5jbG9zZXN0KCdbZGlyXScpLnByb3AoJ2RpcicpO1xcclxcbiAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICB0aGlzLm9wdGlvbnMuZGlyID0gJ2x0cic7XFxyXFxuICAgICAgfVxcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgICRlLnByb3AoJ2Rpc2FibGVkJywgdGhpcy5vcHRpb25zLmRpc2FibGVkKTtcXHJcXG4gICAgJGUucHJvcCgnbXVsdGlwbGUnLCB0aGlzLm9wdGlvbnMubXVsdGlwbGUpO1xcclxcblxcclxcbiAgICBpZiAoJGUuZGF0YSgnc2VsZWN0MlRhZ3MnKSkge1xcclxcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZGVidWcgJiYgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS53YXJuKSB7XFxyXFxuICAgICAgICBjb25zb2xlLndhcm4oXFxyXFxuICAgICAgICAgICdTZWxlY3QyOiBUaGUgYGRhdGEtc2VsZWN0Mi10YWdzYCBhdHRyaWJ1dGUgaGFzIGJlZW4gY2hhbmdlZCB0byAnICtcXHJcXG4gICAgICAgICAgJ3VzZSB0aGUgYGRhdGEtZGF0YWAgYW5kIGBkYXRhLXRhZ3M9XFxcInRydWVcXFwiYCBhdHRyaWJ1dGVzIGFuZCB3aWxsIGJlICcgK1xcclxcbiAgICAgICAgICAncmVtb3ZlZCBpbiBmdXR1cmUgdmVyc2lvbnMgb2YgU2VsZWN0Mi4nXFxyXFxuICAgICAgICApO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICAkZS5kYXRhKCdkYXRhJywgJGUuZGF0YSgnc2VsZWN0MlRhZ3MnKSk7XFxyXFxuICAgICAgJGUuZGF0YSgndGFncycsIHRydWUpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmICgkZS5kYXRhKCdhamF4VXJsJykpIHtcXHJcXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmRlYnVnICYmIHdpbmRvdy5jb25zb2xlICYmIGNvbnNvbGUud2Fybikge1xcclxcbiAgICAgICAgY29uc29sZS53YXJuKFxcclxcbiAgICAgICAgICAnU2VsZWN0MjogVGhlIGBkYXRhLWFqYXgtdXJsYCBhdHRyaWJ1dGUgaGFzIGJlZW4gY2hhbmdlZCB0byAnICtcXHJcXG4gICAgICAgICAgJ2BkYXRhLWFqYXgtLXVybGAgYW5kIHN1cHBvcnQgZm9yIHRoZSBvbGQgYXR0cmlidXRlIHdpbGwgYmUgcmVtb3ZlZCcgK1xcclxcbiAgICAgICAgICAnIGluIGZ1dHVyZSB2ZXJzaW9ucyBvZiBTZWxlY3QyLidcXHJcXG4gICAgICAgICk7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgICRlLmF0dHIoJ2FqYXgtLXVybCcsICRlLmRhdGEoJ2FqYXhVcmwnKSk7XFxyXFxuICAgICAgJGUuZGF0YSgnYWpheC0tdXJsJywgJGUuZGF0YSgnYWpheFVybCcpKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB2YXIgZGF0YXNldCA9IHt9O1xcclxcblxcclxcbiAgICAvLyBQcmVmZXIgdGhlIGVsZW1lbnQncyBgZGF0YXNldGAgYXR0cmlidXRlIGlmIGl0IGV4aXN0c1xcclxcbiAgICAvLyBqUXVlcnkgMS54IGRvZXMgbm90IGNvcnJlY3RseSBoYW5kbGUgZGF0YSBhdHRyaWJ1dGVzIHdpdGggbXVsdGlwbGUgZGFzaGVzXFxyXFxuICAgIGlmICgkLmZuLmpxdWVyeSAmJiAkLmZuLmpxdWVyeS5zdWJzdHIoMCwgMikgPT0gJzEuJyAmJiAkZVswXS5kYXRhc2V0KSB7XFxyXFxuICAgICAgZGF0YXNldCA9ICQuZXh0ZW5kKHRydWUsIHt9LCAkZVswXS5kYXRhc2V0LCAkZS5kYXRhKCkpO1xcclxcbiAgICB9IGVsc2Uge1xcclxcbiAgICAgIGRhdGFzZXQgPSAkZS5kYXRhKCk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyIGRhdGEgPSAkLmV4dGVuZCh0cnVlLCB7fSwgZGF0YXNldCk7XFxyXFxuXFxyXFxuICAgIGRhdGEgPSBVdGlscy5fY29udmVydERhdGEoZGF0YSk7XFxyXFxuXFxyXFxuICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7XFxyXFxuICAgICAgaWYgKCQuaW5BcnJheShrZXksIGV4Y2x1ZGVkRGF0YSkgPiAtMSkge1xcclxcbiAgICAgICAgY29udGludWU7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIGlmICgkLmlzUGxhaW5PYmplY3QodGhpcy5vcHRpb25zW2tleV0pKSB7XFxyXFxuICAgICAgICAkLmV4dGVuZCh0aGlzLm9wdGlvbnNba2V5XSwgZGF0YVtrZXldKTtcXHJcXG4gICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgdGhpcy5vcHRpb25zW2tleV0gPSBkYXRhW2tleV07XFxyXFxuICAgICAgfVxcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHJldHVybiB0aGlzO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIE9wdGlvbnMucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcXHJcXG4gICAgcmV0dXJuIHRoaXMub3B0aW9uc1trZXldO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIE9wdGlvbnMucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbCkge1xcclxcbiAgICB0aGlzLm9wdGlvbnNba2V5XSA9IHZhbDtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICByZXR1cm4gT3B0aW9ucztcXHJcXG59KTtcXHJcXG5cXG5TMi5kZWZpbmUoJ3NlbGVjdDIvY29yZScsW1xcclxcbiAgJ2pxdWVyeScsXFxyXFxuICAnLi9vcHRpb25zJyxcXHJcXG4gICcuL3V0aWxzJyxcXHJcXG4gICcuL2tleXMnXFxyXFxuXSwgZnVuY3Rpb24gKCQsIE9wdGlvbnMsIFV0aWxzLCBLRVlTKSB7XFxyXFxuICB2YXIgU2VsZWN0MiA9IGZ1bmN0aW9uICgkZWxlbWVudCwgb3B0aW9ucykge1xcclxcbiAgICBpZiAoJGVsZW1lbnQuZGF0YSgnc2VsZWN0MicpICE9IG51bGwpIHtcXHJcXG4gICAgICAkZWxlbWVudC5kYXRhKCdzZWxlY3QyJykuZGVzdHJveSgpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMuJGVsZW1lbnQgPSAkZWxlbWVudDtcXHJcXG5cXHJcXG4gICAgdGhpcy5pZCA9IHRoaXMuX2dlbmVyYXRlSWQoJGVsZW1lbnQpO1xcclxcblxcclxcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcXHJcXG5cXHJcXG4gICAgdGhpcy5vcHRpb25zID0gbmV3IE9wdGlvbnMob3B0aW9ucywgJGVsZW1lbnQpO1xcclxcblxcclxcbiAgICBTZWxlY3QyLl9fc3VwZXJfXy5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMpO1xcclxcblxcclxcbiAgICAvLyBTZXQgdXAgdGhlIHRhYmluZGV4XFxyXFxuXFxyXFxuICAgIHZhciB0YWJpbmRleCA9ICRlbGVtZW50LmF0dHIoJ3RhYmluZGV4JykgfHwgMDtcXHJcXG4gICAgJGVsZW1lbnQuZGF0YSgnb2xkLXRhYmluZGV4JywgdGFiaW5kZXgpO1xcclxcbiAgICAkZWxlbWVudC5hdHRyKCd0YWJpbmRleCcsICctMScpO1xcclxcblxcclxcbiAgICAvLyBTZXQgdXAgY29udGFpbmVycyBhbmQgYWRhcHRlcnNcXHJcXG5cXHJcXG4gICAgdmFyIERhdGFBZGFwdGVyID0gdGhpcy5vcHRpb25zLmdldCgnZGF0YUFkYXB0ZXInKTtcXHJcXG4gICAgdGhpcy5kYXRhQWRhcHRlciA9IG5ldyBEYXRhQWRhcHRlcigkZWxlbWVudCwgdGhpcy5vcHRpb25zKTtcXHJcXG5cXHJcXG4gICAgdmFyICRjb250YWluZXIgPSB0aGlzLnJlbmRlcigpO1xcclxcblxcclxcbiAgICB0aGlzLl9wbGFjZUNvbnRhaW5lcigkY29udGFpbmVyKTtcXHJcXG5cXHJcXG4gICAgdmFyIFNlbGVjdGlvbkFkYXB0ZXIgPSB0aGlzLm9wdGlvbnMuZ2V0KCdzZWxlY3Rpb25BZGFwdGVyJyk7XFxyXFxuICAgIHRoaXMuc2VsZWN0aW9uID0gbmV3IFNlbGVjdGlvbkFkYXB0ZXIoJGVsZW1lbnQsIHRoaXMub3B0aW9ucyk7XFxyXFxuICAgIHRoaXMuJHNlbGVjdGlvbiA9IHRoaXMuc2VsZWN0aW9uLnJlbmRlcigpO1xcclxcblxcclxcbiAgICB0aGlzLnNlbGVjdGlvbi5wb3NpdGlvbih0aGlzLiRzZWxlY3Rpb24sICRjb250YWluZXIpO1xcclxcblxcclxcbiAgICB2YXIgRHJvcGRvd25BZGFwdGVyID0gdGhpcy5vcHRpb25zLmdldCgnZHJvcGRvd25BZGFwdGVyJyk7XFxyXFxuICAgIHRoaXMuZHJvcGRvd24gPSBuZXcgRHJvcGRvd25BZGFwdGVyKCRlbGVtZW50LCB0aGlzLm9wdGlvbnMpO1xcclxcbiAgICB0aGlzLiRkcm9wZG93biA9IHRoaXMuZHJvcGRvd24ucmVuZGVyKCk7XFxyXFxuXFxyXFxuICAgIHRoaXMuZHJvcGRvd24ucG9zaXRpb24odGhpcy4kZHJvcGRvd24sICRjb250YWluZXIpO1xcclxcblxcclxcbiAgICB2YXIgUmVzdWx0c0FkYXB0ZXIgPSB0aGlzLm9wdGlvbnMuZ2V0KCdyZXN1bHRzQWRhcHRlcicpO1xcclxcbiAgICB0aGlzLnJlc3VsdHMgPSBuZXcgUmVzdWx0c0FkYXB0ZXIoJGVsZW1lbnQsIHRoaXMub3B0aW9ucywgdGhpcy5kYXRhQWRhcHRlcik7XFxyXFxuICAgIHRoaXMuJHJlc3VsdHMgPSB0aGlzLnJlc3VsdHMucmVuZGVyKCk7XFxyXFxuXFxyXFxuICAgIHRoaXMucmVzdWx0cy5wb3NpdGlvbih0aGlzLiRyZXN1bHRzLCB0aGlzLiRkcm9wZG93bik7XFxyXFxuXFxyXFxuICAgIC8vIEJpbmQgZXZlbnRzXFxyXFxuXFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgLy8gQmluZCB0aGUgY29udGFpbmVyIHRvIGFsbCBvZiB0aGUgYWRhcHRlcnNcXHJcXG4gICAgdGhpcy5fYmluZEFkYXB0ZXJzKCk7XFxyXFxuXFxyXFxuICAgIC8vIFJlZ2lzdGVyIGFueSBET00gZXZlbnQgaGFuZGxlcnNcXHJcXG4gICAgdGhpcy5fcmVnaXN0ZXJEb21FdmVudHMoKTtcXHJcXG5cXHJcXG4gICAgLy8gUmVnaXN0ZXIgYW55IGludGVybmFsIGV2ZW50IGhhbmRsZXJzXFxyXFxuICAgIHRoaXMuX3JlZ2lzdGVyRGF0YUV2ZW50cygpO1xcclxcbiAgICB0aGlzLl9yZWdpc3RlclNlbGVjdGlvbkV2ZW50cygpO1xcclxcbiAgICB0aGlzLl9yZWdpc3RlckRyb3Bkb3duRXZlbnRzKCk7XFxyXFxuICAgIHRoaXMuX3JlZ2lzdGVyUmVzdWx0c0V2ZW50cygpO1xcclxcbiAgICB0aGlzLl9yZWdpc3RlckV2ZW50cygpO1xcclxcblxcclxcbiAgICAvLyBTZXQgdGhlIGluaXRpYWwgc3RhdGVcXHJcXG4gICAgdGhpcy5kYXRhQWRhcHRlci5jdXJyZW50KGZ1bmN0aW9uIChpbml0aWFsRGF0YSkge1xcclxcbiAgICAgIHNlbGYudHJpZ2dlcignc2VsZWN0aW9uOnVwZGF0ZScsIHtcXHJcXG4gICAgICAgIGRhdGE6IGluaXRpYWxEYXRhXFxyXFxuICAgICAgfSk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICAvLyBIaWRlIHRoZSBvcmlnaW5hbCBzZWxlY3RcXHJcXG4gICAgJGVsZW1lbnQuYWRkQ2xhc3MoJ3NlbGVjdDItaGlkZGVuLWFjY2Vzc2libGUnKTtcXHJcXG4gICAgJGVsZW1lbnQuYXR0cignYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xcclxcblxcclxcbiAgICAvLyBTeW5jaHJvbml6ZSBhbnkgbW9uaXRvcmVkIGF0dHJpYnV0ZXNcXHJcXG4gICAgdGhpcy5fc3luY0F0dHJpYnV0ZXMoKTtcXHJcXG5cXHJcXG4gICAgJGVsZW1lbnQuZGF0YSgnc2VsZWN0MicsIHRoaXMpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFV0aWxzLkV4dGVuZChTZWxlY3QyLCBVdGlscy5PYnNlcnZhYmxlKTtcXHJcXG5cXHJcXG4gIFNlbGVjdDIucHJvdG90eXBlLl9nZW5lcmF0ZUlkID0gZnVuY3Rpb24gKCRlbGVtZW50KSB7XFxyXFxuICAgIHZhciBpZCA9ICcnO1xcclxcblxcclxcbiAgICBpZiAoJGVsZW1lbnQuYXR0cignaWQnKSAhPSBudWxsKSB7XFxyXFxuICAgICAgaWQgPSAkZWxlbWVudC5hdHRyKCdpZCcpO1xcclxcbiAgICB9IGVsc2UgaWYgKCRlbGVtZW50LmF0dHIoJ25hbWUnKSAhPSBudWxsKSB7XFxyXFxuICAgICAgaWQgPSAkZWxlbWVudC5hdHRyKCduYW1lJykgKyAnLScgKyBVdGlscy5nZW5lcmF0ZUNoYXJzKDIpO1xcclxcbiAgICB9IGVsc2Uge1xcclxcbiAgICAgIGlkID0gVXRpbHMuZ2VuZXJhdGVDaGFycyg0KTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZCA9IGlkLnJlcGxhY2UoLyg6fFxcXFwufFxcXFxbfFxcXFxdfCwpL2csICcnKTtcXHJcXG4gICAgaWQgPSAnc2VsZWN0Mi0nICsgaWQ7XFxyXFxuXFxyXFxuICAgIHJldHVybiBpZDtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5fcGxhY2VDb250YWluZXIgPSBmdW5jdGlvbiAoJGNvbnRhaW5lcikge1xcclxcbiAgICAkY29udGFpbmVyLmluc2VydEFmdGVyKHRoaXMuJGVsZW1lbnQpO1xcclxcblxcclxcbiAgICB2YXIgd2lkdGggPSB0aGlzLl9yZXNvbHZlV2lkdGgodGhpcy4kZWxlbWVudCwgdGhpcy5vcHRpb25zLmdldCgnd2lkdGgnKSk7XFxyXFxuXFxyXFxuICAgIGlmICh3aWR0aCAhPSBudWxsKSB7XFxyXFxuICAgICAgJGNvbnRhaW5lci5jc3MoJ3dpZHRoJywgd2lkdGgpO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuX3Jlc29sdmVXaWR0aCA9IGZ1bmN0aW9uICgkZWxlbWVudCwgbWV0aG9kKSB7XFxyXFxuICAgIHZhciBXSURUSCA9IC9ed2lkdGg6KChbLStdPyhbMC05XSpcXFxcLik/WzAtOV0rKShweHxlbXxleHwlfGlufGNtfG1tfHB0fHBjKSkvaTtcXHJcXG5cXHJcXG4gICAgaWYgKG1ldGhvZCA9PSAncmVzb2x2ZScpIHtcXHJcXG4gICAgICB2YXIgc3R5bGVXaWR0aCA9IHRoaXMuX3Jlc29sdmVXaWR0aCgkZWxlbWVudCwgJ3N0eWxlJyk7XFxyXFxuXFxyXFxuICAgICAgaWYgKHN0eWxlV2lkdGggIT0gbnVsbCkge1xcclxcbiAgICAgICAgcmV0dXJuIHN0eWxlV2lkdGg7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHJldHVybiB0aGlzLl9yZXNvbHZlV2lkdGgoJGVsZW1lbnQsICdlbGVtZW50Jyk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKG1ldGhvZCA9PSAnZWxlbWVudCcpIHtcXHJcXG4gICAgICB2YXIgZWxlbWVudFdpZHRoID0gJGVsZW1lbnQub3V0ZXJXaWR0aChmYWxzZSk7XFxyXFxuXFxyXFxuICAgICAgaWYgKGVsZW1lbnRXaWR0aCA8PSAwKSB7XFxyXFxuICAgICAgICByZXR1cm4gJ2F1dG8nO1xcclxcbiAgICAgIH1cXHJcXG5cXHJcXG4gICAgICByZXR1cm4gZWxlbWVudFdpZHRoICsgJ3B4JztcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAobWV0aG9kID09ICdzdHlsZScpIHtcXHJcXG4gICAgICB2YXIgc3R5bGUgPSAkZWxlbWVudC5hdHRyKCdzdHlsZScpO1xcclxcblxcclxcbiAgICAgIGlmICh0eXBlb2Yoc3R5bGUpICE9PSAnc3RyaW5nJykge1xcclxcbiAgICAgICAgcmV0dXJuIG51bGw7XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHZhciBhdHRycyA9IHN0eWxlLnNwbGl0KCc7Jyk7XFxyXFxuXFxyXFxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpID0gaSArIDEpIHtcXHJcXG4gICAgICAgIHZhciBhdHRyID0gYXR0cnNbaV0ucmVwbGFjZSgvXFxcXHMvZywgJycpO1xcclxcbiAgICAgICAgdmFyIG1hdGNoZXMgPSBhdHRyLm1hdGNoKFdJRFRIKTtcXHJcXG5cXHJcXG4gICAgICAgIGlmIChtYXRjaGVzICE9PSBudWxsICYmIG1hdGNoZXMubGVuZ3RoID49IDEpIHtcXHJcXG4gICAgICAgICAgcmV0dXJuIG1hdGNoZXNbMV07XFxyXFxuICAgICAgICB9XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHJldHVybiBudWxsO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHJldHVybiBtZXRob2Q7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuX2JpbmRBZGFwdGVycyA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdGhpcy5kYXRhQWRhcHRlci5iaW5kKHRoaXMsIHRoaXMuJGNvbnRhaW5lcik7XFxyXFxuICAgIHRoaXMuc2VsZWN0aW9uLmJpbmQodGhpcywgdGhpcy4kY29udGFpbmVyKTtcXHJcXG5cXHJcXG4gICAgdGhpcy5kcm9wZG93bi5iaW5kKHRoaXMsIHRoaXMuJGNvbnRhaW5lcik7XFxyXFxuICAgIHRoaXMucmVzdWx0cy5iaW5kKHRoaXMsIHRoaXMuJGNvbnRhaW5lcik7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuX3JlZ2lzdGVyRG9tRXZlbnRzID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIHRoaXMuJGVsZW1lbnQub24oJ2NoYW5nZS5zZWxlY3QyJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHNlbGYuZGF0YUFkYXB0ZXIuY3VycmVudChmdW5jdGlvbiAoZGF0YSkge1xcclxcbiAgICAgICAgc2VsZi50cmlnZ2VyKCdzZWxlY3Rpb246dXBkYXRlJywge1xcclxcbiAgICAgICAgICBkYXRhOiBkYXRhXFxyXFxuICAgICAgICB9KTtcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJGVsZW1lbnQub24oJ2ZvY3VzLnNlbGVjdDInLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgc2VsZi50cmlnZ2VyKCdmb2N1cycsIGV2dCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLl9zeW5jQSA9IFV0aWxzLmJpbmQodGhpcy5fc3luY0F0dHJpYnV0ZXMsIHRoaXMpO1xcclxcbiAgICB0aGlzLl9zeW5jUyA9IFV0aWxzLmJpbmQodGhpcy5fc3luY1N1YnRyZWUsIHRoaXMpO1xcclxcblxcclxcbiAgICBpZiAodGhpcy4kZWxlbWVudFswXS5hdHRhY2hFdmVudCkge1xcclxcbiAgICAgIHRoaXMuJGVsZW1lbnRbMF0uYXR0YWNoRXZlbnQoJ29ucHJvcGVydHljaGFuZ2UnLCB0aGlzLl9zeW5jQSk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyIG9ic2VydmVyID0gd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIgfHxcXHJcXG4gICAgICB3aW5kb3cuV2ViS2l0TXV0YXRpb25PYnNlcnZlciB8fFxcclxcbiAgICAgIHdpbmRvdy5Nb3pNdXRhdGlvbk9ic2VydmVyXFxyXFxuICAgIDtcXHJcXG5cXHJcXG4gICAgaWYgKG9ic2VydmVyICE9IG51bGwpIHtcXHJcXG4gICAgICB0aGlzLl9vYnNlcnZlciA9IG5ldyBvYnNlcnZlcihmdW5jdGlvbiAobXV0YXRpb25zKSB7XFxyXFxuICAgICAgICAkLmVhY2gobXV0YXRpb25zLCBzZWxmLl9zeW5jQSk7XFxyXFxuICAgICAgICAkLmVhY2gobXV0YXRpb25zLCBzZWxmLl9zeW5jUyk7XFxyXFxuICAgICAgfSk7XFxyXFxuICAgICAgdGhpcy5fb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLiRlbGVtZW50WzBdLCB7XFxyXFxuICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxcclxcbiAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxcclxcbiAgICAgICAgc3VidHJlZTogZmFsc2VcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfSBlbHNlIGlmICh0aGlzLiRlbGVtZW50WzBdLmFkZEV2ZW50TGlzdGVuZXIpIHtcXHJcXG4gICAgICB0aGlzLiRlbGVtZW50WzBdLmFkZEV2ZW50TGlzdGVuZXIoXFxyXFxuICAgICAgICAnRE9NQXR0ck1vZGlmaWVkJyxcXHJcXG4gICAgICAgIHNlbGYuX3N5bmNBLFxcclxcbiAgICAgICAgZmFsc2VcXHJcXG4gICAgICApO1xcclxcbiAgICAgIHRoaXMuJGVsZW1lbnRbMF0uYWRkRXZlbnRMaXN0ZW5lcihcXHJcXG4gICAgICAgICdET01Ob2RlSW5zZXJ0ZWQnLFxcclxcbiAgICAgICAgc2VsZi5fc3luY1MsXFxyXFxuICAgICAgICBmYWxzZVxcclxcbiAgICAgICk7XFxyXFxuICAgICAgdGhpcy4kZWxlbWVudFswXS5hZGRFdmVudExpc3RlbmVyKFxcclxcbiAgICAgICAgJ0RPTU5vZGVSZW1vdmVkJyxcXHJcXG4gICAgICAgIHNlbGYuX3N5bmNTLFxcclxcbiAgICAgICAgZmFsc2VcXHJcXG4gICAgICApO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuX3JlZ2lzdGVyRGF0YUV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICB0aGlzLmRhdGFBZGFwdGVyLm9uKCcqJywgZnVuY3Rpb24gKG5hbWUsIHBhcmFtcykge1xcclxcbiAgICAgIHNlbGYudHJpZ2dlcihuYW1lLCBwYXJhbXMpO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5fcmVnaXN0ZXJTZWxlY3Rpb25FdmVudHMgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG4gICAgdmFyIG5vblJlbGF5RXZlbnRzID0gWyd0b2dnbGUnLCAnZm9jdXMnXTtcXHJcXG5cXHJcXG4gICAgdGhpcy5zZWxlY3Rpb24ub24oJ3RvZ2dsZScsIGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICBzZWxmLnRvZ2dsZURyb3Bkb3duKCk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLnNlbGVjdGlvbi5vbignZm9jdXMnLCBmdW5jdGlvbiAocGFyYW1zKSB7XFxyXFxuICAgICAgc2VsZi5mb2N1cyhwYXJhbXMpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgdGhpcy5zZWxlY3Rpb24ub24oJyonLCBmdW5jdGlvbiAobmFtZSwgcGFyYW1zKSB7XFxyXFxuICAgICAgaWYgKCQuaW5BcnJheShuYW1lLCBub25SZWxheUV2ZW50cykgIT09IC0xKSB7XFxyXFxuICAgICAgICByZXR1cm47XFxyXFxuICAgICAgfVxcclxcblxcclxcbiAgICAgIHNlbGYudHJpZ2dlcihuYW1lLCBwYXJhbXMpO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5fcmVnaXN0ZXJEcm9wZG93bkV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xcclxcblxcclxcbiAgICB0aGlzLmRyb3Bkb3duLm9uKCcqJywgZnVuY3Rpb24gKG5hbWUsIHBhcmFtcykge1xcclxcbiAgICAgIHNlbGYudHJpZ2dlcihuYW1lLCBwYXJhbXMpO1xcclxcbiAgICB9KTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5fcmVnaXN0ZXJSZXN1bHRzRXZlbnRzID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIHRoaXMucmVzdWx0cy5vbignKicsIGZ1bmN0aW9uIChuYW1lLCBwYXJhbXMpIHtcXHJcXG4gICAgICBzZWxmLnRyaWdnZXIobmFtZSwgcGFyYW1zKTtcXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuX3JlZ2lzdGVyRXZlbnRzID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB2YXIgc2VsZiA9IHRoaXM7XFxyXFxuXFxyXFxuICAgIHRoaXMub24oJ29wZW4nLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi4kY29udGFpbmVyLmFkZENsYXNzKCdzZWxlY3QyLWNvbnRhaW5lci0tb3BlbicpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgdGhpcy5vbignY2xvc2UnLCBmdW5jdGlvbiAoKSB7XFxyXFxuICAgICAgc2VsZi4kY29udGFpbmVyLnJlbW92ZUNsYXNzKCdzZWxlY3QyLWNvbnRhaW5lci0tb3BlbicpO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgdGhpcy5vbignZW5hYmxlJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHNlbGYuJGNvbnRhaW5lci5yZW1vdmVDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLWRpc2FibGVkJyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLm9uKCdkaXNhYmxlJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHNlbGYuJGNvbnRhaW5lci5hZGRDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLWRpc2FibGVkJyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLm9uKCdibHVyJywgZnVuY3Rpb24gKCkge1xcclxcbiAgICAgIHNlbGYuJGNvbnRhaW5lci5yZW1vdmVDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLWZvY3VzJyk7XFxyXFxuICAgIH0pO1xcclxcblxcclxcbiAgICB0aGlzLm9uKCdxdWVyeScsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICBpZiAoIXNlbGYuaXNPcGVuKCkpIHtcXHJcXG4gICAgICAgIHNlbGYudHJpZ2dlcignb3BlbicsIHt9KTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgdGhpcy5kYXRhQWRhcHRlci5xdWVyeShwYXJhbXMsIGZ1bmN0aW9uIChkYXRhKSB7XFxyXFxuICAgICAgICBzZWxmLnRyaWdnZXIoJ3Jlc3VsdHM6YWxsJywge1xcclxcbiAgICAgICAgICBkYXRhOiBkYXRhLFxcclxcbiAgICAgICAgICBxdWVyeTogcGFyYW1zXFxyXFxuICAgICAgICB9KTtcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfSk7XFxyXFxuXFxyXFxuICAgIHRoaXMub24oJ3F1ZXJ5OmFwcGVuZCcsIGZ1bmN0aW9uIChwYXJhbXMpIHtcXHJcXG4gICAgICB0aGlzLmRhdGFBZGFwdGVyLnF1ZXJ5KHBhcmFtcywgZnVuY3Rpb24gKGRhdGEpIHtcXHJcXG4gICAgICAgIHNlbGYudHJpZ2dlcigncmVzdWx0czphcHBlbmQnLCB7XFxyXFxuICAgICAgICAgIGRhdGE6IGRhdGEsXFxyXFxuICAgICAgICAgIHF1ZXJ5OiBwYXJhbXNcXHJcXG4gICAgICAgIH0pO1xcclxcbiAgICAgIH0pO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgdGhpcy5vbigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZXZ0KSB7XFxyXFxuICAgICAgdmFyIGtleSA9IGV2dC53aGljaDtcXHJcXG5cXHJcXG4gICAgICBpZiAoc2VsZi5pc09wZW4oKSkge1xcclxcbiAgICAgICAgaWYgKGtleSA9PT0gS0VZUy5FU0MgfHwga2V5ID09PSBLRVlTLlRBQiB8fFxcclxcbiAgICAgICAgICAgIChrZXkgPT09IEtFWVMuVVAgJiYgZXZ0LmFsdEtleSkpIHtcXHJcXG4gICAgICAgICAgc2VsZi5jbG9zZSgpO1xcclxcblxcclxcbiAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcXHJcXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBLRVlTLkVOVEVSKSB7XFxyXFxuICAgICAgICAgIHNlbGYudHJpZ2dlcigncmVzdWx0czpzZWxlY3QnLCB7fSk7XFxyXFxuXFxyXFxuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICAgICAgfSBlbHNlIGlmICgoa2V5ID09PSBLRVlTLlNQQUNFICYmIGV2dC5jdHJsS2V5KSkge1xcclxcbiAgICAgICAgICBzZWxmLnRyaWdnZXIoJ3Jlc3VsdHM6dG9nZ2xlJywge30pO1xcclxcblxcclxcbiAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcXHJcXG4gICAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSBLRVlTLlVQKSB7XFxyXFxuICAgICAgICAgIHNlbGYudHJpZ2dlcigncmVzdWx0czpwcmV2aW91cycsIHt9KTtcXHJcXG5cXHJcXG4gICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XFxyXFxuICAgICAgICB9IGVsc2UgaWYgKGtleSA9PT0gS0VZUy5ET1dOKSB7XFxyXFxuICAgICAgICAgIHNlbGYudHJpZ2dlcigncmVzdWx0czpuZXh0Jywge30pO1xcclxcblxcclxcbiAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICB9IGVsc2Uge1xcclxcbiAgICAgICAgaWYgKGtleSA9PT0gS0VZUy5FTlRFUiB8fCBrZXkgPT09IEtFWVMuU1BBQ0UgfHxcXHJcXG4gICAgICAgICAgICAoa2V5ID09PSBLRVlTLkRPV04gJiYgZXZ0LmFsdEtleSkpIHtcXHJcXG4gICAgICAgICAgc2VsZi5vcGVuKCk7XFxyXFxuXFxyXFxuICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xcclxcbiAgICAgICAgfVxcclxcbiAgICAgIH1cXHJcXG4gICAgfSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuX3N5bmNBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICB0aGlzLm9wdGlvbnMuc2V0KCdkaXNhYmxlZCcsIHRoaXMuJGVsZW1lbnQucHJvcCgnZGlzYWJsZWQnKSk7XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLm9wdGlvbnMuZ2V0KCdkaXNhYmxlZCcpKSB7XFxyXFxuICAgICAgaWYgKHRoaXMuaXNPcGVuKCkpIHtcXHJcXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcXHJcXG4gICAgICB9XFxyXFxuXFxyXFxuICAgICAgdGhpcy50cmlnZ2VyKCdkaXNhYmxlJywge30pO1xcclxcbiAgICB9IGVsc2Uge1xcclxcbiAgICAgIHRoaXMudHJpZ2dlcignZW5hYmxlJywge30pO1xcclxcbiAgICB9XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuX3N5bmNTdWJ0cmVlID0gZnVuY3Rpb24gKGV2dCwgbXV0YXRpb25zKSB7XFxyXFxuICAgIHZhciBjaGFuZ2VkID0gZmFsc2U7XFxyXFxuICAgIHZhciBzZWxmID0gdGhpcztcXHJcXG5cXHJcXG4gICAgLy8gSWdub3JlIGFueSBtdXRhdGlvbiBldmVudHMgcmFpc2VkIGZvciBlbGVtZW50cyB0aGF0IGFyZW4ndCBvcHRpb25zIG9yXFxyXFxuICAgIC8vIG9wdGdyb3Vwcy4gVGhpcyBoYW5kbGVzIHRoZSBjYXNlIHdoZW4gdGhlIHNlbGVjdCBlbGVtZW50IGlzIGRlc3Ryb3llZFxcclxcbiAgICBpZiAoXFxyXFxuICAgICAgZXZ0ICYmIGV2dC50YXJnZXQgJiYgKFxcclxcbiAgICAgICAgZXZ0LnRhcmdldC5ub2RlTmFtZSAhPT0gJ09QVElPTicgJiYgZXZ0LnRhcmdldC5ub2RlTmFtZSAhPT0gJ09QVEdST1VQJ1xcclxcbiAgICAgIClcXHJcXG4gICAgKSB7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmICghbXV0YXRpb25zKSB7XFxyXFxuICAgICAgLy8gSWYgbXV0YXRpb24gZXZlbnRzIGFyZW4ndCBzdXBwb3J0ZWQsIHRoZW4gd2UgY2FuIG9ubHkgYXNzdW1lIHRoYXQgdGhlXFxyXFxuICAgICAgLy8gY2hhbmdlIGFmZmVjdGVkIHRoZSBzZWxlY3Rpb25zXFxyXFxuICAgICAgY2hhbmdlZCA9IHRydWU7XFxyXFxuICAgIH0gZWxzZSBpZiAobXV0YXRpb25zLmFkZGVkTm9kZXMgJiYgbXV0YXRpb25zLmFkZGVkTm9kZXMubGVuZ3RoID4gMCkge1xcclxcbiAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgbXV0YXRpb25zLmFkZGVkTm9kZXMubGVuZ3RoOyBuKyspIHtcXHJcXG4gICAgICAgIHZhciBub2RlID0gbXV0YXRpb25zLmFkZGVkTm9kZXNbbl07XFxyXFxuXFxyXFxuICAgICAgICBpZiAobm9kZS5zZWxlY3RlZCkge1xcclxcbiAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcXHJcXG4gICAgICAgIH1cXHJcXG4gICAgICB9XFxyXFxuICAgIH0gZWxzZSBpZiAobXV0YXRpb25zLnJlbW92ZWROb2RlcyAmJiBtdXRhdGlvbnMucmVtb3ZlZE5vZGVzLmxlbmd0aCA+IDApIHtcXHJcXG4gICAgICBjaGFuZ2VkID0gdHJ1ZTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICAvLyBPbmx5IHJlLXB1bGwgdGhlIGRhdGEgaWYgd2UgdGhpbmsgdGhlcmUgaXMgYSBjaGFuZ2VcXHJcXG4gICAgaWYgKGNoYW5nZWQpIHtcXHJcXG4gICAgICB0aGlzLmRhdGFBZGFwdGVyLmN1cnJlbnQoZnVuY3Rpb24gKGN1cnJlbnREYXRhKSB7XFxyXFxuICAgICAgICBzZWxmLnRyaWdnZXIoJ3NlbGVjdGlvbjp1cGRhdGUnLCB7XFxyXFxuICAgICAgICAgIGRhdGE6IGN1cnJlbnREYXRhXFxyXFxuICAgICAgICB9KTtcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfVxcclxcbiAgfTtcXHJcXG5cXHJcXG4gIC8qKlxcclxcbiAgICogT3ZlcnJpZGUgdGhlIHRyaWdnZXIgbWV0aG9kIHRvIGF1dG9tYXRpY2FsbHkgdHJpZ2dlciBwcmUtZXZlbnRzIHdoZW5cXHJcXG4gICAqIHRoZXJlIGFyZSBldmVudHMgdGhhdCBjYW4gYmUgcHJldmVudGVkLlxcclxcbiAgICovXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS50cmlnZ2VyID0gZnVuY3Rpb24gKG5hbWUsIGFyZ3MpIHtcXHJcXG4gICAgdmFyIGFjdHVhbFRyaWdnZXIgPSBTZWxlY3QyLl9fc3VwZXJfXy50cmlnZ2VyO1xcclxcbiAgICB2YXIgcHJlVHJpZ2dlck1hcCA9IHtcXHJcXG4gICAgICAnb3Blbic6ICdvcGVuaW5nJyxcXHJcXG4gICAgICAnY2xvc2UnOiAnY2xvc2luZycsXFxyXFxuICAgICAgJ3NlbGVjdCc6ICdzZWxlY3RpbmcnLFxcclxcbiAgICAgICd1bnNlbGVjdCc6ICd1bnNlbGVjdGluZydcXHJcXG4gICAgfTtcXHJcXG5cXHJcXG4gICAgaWYgKGFyZ3MgPT09IHVuZGVmaW5lZCkge1xcclxcbiAgICAgIGFyZ3MgPSB7fTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAobmFtZSBpbiBwcmVUcmlnZ2VyTWFwKSB7XFxyXFxuICAgICAgdmFyIHByZVRyaWdnZXJOYW1lID0gcHJlVHJpZ2dlck1hcFtuYW1lXTtcXHJcXG4gICAgICB2YXIgcHJlVHJpZ2dlckFyZ3MgPSB7XFxyXFxuICAgICAgICBwcmV2ZW50ZWQ6IGZhbHNlLFxcclxcbiAgICAgICAgbmFtZTogbmFtZSxcXHJcXG4gICAgICAgIGFyZ3M6IGFyZ3NcXHJcXG4gICAgICB9O1xcclxcblxcclxcbiAgICAgIGFjdHVhbFRyaWdnZXIuY2FsbCh0aGlzLCBwcmVUcmlnZ2VyTmFtZSwgcHJlVHJpZ2dlckFyZ3MpO1xcclxcblxcclxcbiAgICAgIGlmIChwcmVUcmlnZ2VyQXJncy5wcmV2ZW50ZWQpIHtcXHJcXG4gICAgICAgIGFyZ3MucHJldmVudGVkID0gdHJ1ZTtcXHJcXG5cXHJcXG4gICAgICAgIHJldHVybjtcXHJcXG4gICAgICB9XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgYWN0dWFsVHJpZ2dlci5jYWxsKHRoaXMsIG5hbWUsIGFyZ3MpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdDIucHJvdG90eXBlLnRvZ2dsZURyb3Bkb3duID0gZnVuY3Rpb24gKCkge1xcclxcbiAgICBpZiAodGhpcy5vcHRpb25zLmdldCgnZGlzYWJsZWQnKSkge1xcclxcbiAgICAgIHJldHVybjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICBpZiAodGhpcy5pc09wZW4oKSkge1xcclxcbiAgICAgIHRoaXMuY2xvc2UoKTtcXHJcXG4gICAgfSBlbHNlIHtcXHJcXG4gICAgICB0aGlzLm9wZW4oKTtcXHJcXG4gICAgfVxcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdDIucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIGlmICh0aGlzLmlzT3BlbigpKSB7XFxyXFxuICAgICAgcmV0dXJuO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMudHJpZ2dlcigncXVlcnknLCB7fSk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuY2xvc2UgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIGlmICghdGhpcy5pc09wZW4oKSkge1xcclxcbiAgICAgIHJldHVybjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLnRyaWdnZXIoJ2Nsb3NlJywge30pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdDIucHJvdG90eXBlLmlzT3BlbiA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgcmV0dXJuIHRoaXMuJGNvbnRhaW5lci5oYXNDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLW9wZW4nKTtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5oYXNGb2N1cyA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgcmV0dXJuIHRoaXMuJGNvbnRhaW5lci5oYXNDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLWZvY3VzJyk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuZm9jdXMgPSBmdW5jdGlvbiAoZGF0YSkge1xcclxcbiAgICAvLyBObyBuZWVkIHRvIHJlLXRyaWdnZXIgZm9jdXMgZXZlbnRzIGlmIHdlIGFyZSBhbHJlYWR5IGZvY3VzZWRcXHJcXG4gICAgaWYgKHRoaXMuaGFzRm9jdXMoKSkge1xcclxcbiAgICAgIHJldHVybjtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLiRjb250YWluZXIuYWRkQ2xhc3MoJ3NlbGVjdDItY29udGFpbmVyLS1mb2N1cycpO1xcclxcbiAgICB0aGlzLnRyaWdnZXIoJ2ZvY3VzJywge30pO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdDIucHJvdG90eXBlLmVuYWJsZSA9IGZ1bmN0aW9uIChhcmdzKSB7XFxyXFxuICAgIGlmICh0aGlzLm9wdGlvbnMuZ2V0KCdkZWJ1ZycpICYmIHdpbmRvdy5jb25zb2xlICYmIGNvbnNvbGUud2Fybikge1xcclxcbiAgICAgIGNvbnNvbGUud2FybihcXHJcXG4gICAgICAgICdTZWxlY3QyOiBUaGUgYHNlbGVjdDIoXFxcImVuYWJsZVxcXCIpYCBtZXRob2QgaGFzIGJlZW4gZGVwcmVjYXRlZCBhbmQgd2lsbCcgK1xcclxcbiAgICAgICAgJyBiZSByZW1vdmVkIGluIGxhdGVyIFNlbGVjdDIgdmVyc2lvbnMuIFVzZSAkZWxlbWVudC5wcm9wKFxcXCJkaXNhYmxlZFxcXCIpJyArXFxyXFxuICAgICAgICAnIGluc3RlYWQuJ1xcclxcbiAgICAgICk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKGFyZ3MgPT0gbnVsbCB8fCBhcmdzLmxlbmd0aCA9PT0gMCkge1xcclxcbiAgICAgIGFyZ3MgPSBbdHJ1ZV07XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgdmFyIGRpc2FibGVkID0gIWFyZ3NbMF07XFxyXFxuXFxyXFxuICAgIHRoaXMuJGVsZW1lbnQucHJvcCgnZGlzYWJsZWQnLCBkaXNhYmxlZCk7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUuZGF0YSA9IGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgaWYgKHRoaXMub3B0aW9ucy5nZXQoJ2RlYnVnJykgJiZcXHJcXG4gICAgICAgIGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIHdpbmRvdy5jb25zb2xlICYmIGNvbnNvbGUud2Fybikge1xcclxcbiAgICAgIGNvbnNvbGUud2FybihcXHJcXG4gICAgICAgICdTZWxlY3QyOiBEYXRhIGNhbiBubyBsb25nZXIgYmUgc2V0IHVzaW5nIGBzZWxlY3QyKFxcXCJkYXRhXFxcIilgLiBZb3UgJyArXFxyXFxuICAgICAgICAnc2hvdWxkIGNvbnNpZGVyIHNldHRpbmcgdGhlIHZhbHVlIGluc3RlYWQgdXNpbmcgYCRlbGVtZW50LnZhbCgpYC4nXFxyXFxuICAgICAgKTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB2YXIgZGF0YSA9IFtdO1xcclxcblxcclxcbiAgICB0aGlzLmRhdGFBZGFwdGVyLmN1cnJlbnQoZnVuY3Rpb24gKGN1cnJlbnREYXRhKSB7XFxyXFxuICAgICAgZGF0YSA9IGN1cnJlbnREYXRhO1xcclxcbiAgICB9KTtcXHJcXG5cXHJcXG4gICAgcmV0dXJuIGRhdGE7XFxyXFxuICB9O1xcclxcblxcclxcbiAgU2VsZWN0Mi5wcm90b3R5cGUudmFsID0gZnVuY3Rpb24gKGFyZ3MpIHtcXHJcXG4gICAgaWYgKHRoaXMub3B0aW9ucy5nZXQoJ2RlYnVnJykgJiYgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS53YXJuKSB7XFxyXFxuICAgICAgY29uc29sZS53YXJuKFxcclxcbiAgICAgICAgJ1NlbGVjdDI6IFRoZSBgc2VsZWN0MihcXFwidmFsXFxcIilgIG1ldGhvZCBoYXMgYmVlbiBkZXByZWNhdGVkIGFuZCB3aWxsIGJlJyArXFxyXFxuICAgICAgICAnIHJlbW92ZWQgaW4gbGF0ZXIgU2VsZWN0MiB2ZXJzaW9ucy4gVXNlICRlbGVtZW50LnZhbCgpIGluc3RlYWQuJ1xcclxcbiAgICAgICk7XFxyXFxuICAgIH1cXHJcXG5cXHJcXG4gICAgaWYgKGFyZ3MgPT0gbnVsbCB8fCBhcmdzLmxlbmd0aCA9PT0gMCkge1xcclxcbiAgICAgIHJldHVybiB0aGlzLiRlbGVtZW50LnZhbCgpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHZhciBuZXdWYWwgPSBhcmdzWzBdO1xcclxcblxcclxcbiAgICBpZiAoJC5pc0FycmF5KG5ld1ZhbCkpIHtcXHJcXG4gICAgICBuZXdWYWwgPSAkLm1hcChuZXdWYWwsIGZ1bmN0aW9uIChvYmopIHtcXHJcXG4gICAgICAgIHJldHVybiBvYmoudG9TdHJpbmcoKTtcXHJcXG4gICAgICB9KTtcXHJcXG4gICAgfVxcclxcblxcclxcbiAgICB0aGlzLiRlbGVtZW50LnZhbChuZXdWYWwpLnRyaWdnZXIoJ2NoYW5nZScpO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIFNlbGVjdDIucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHRoaXMuJGNvbnRhaW5lci5yZW1vdmUoKTtcXHJcXG5cXHJcXG4gICAgaWYgKHRoaXMuJGVsZW1lbnRbMF0uZGV0YWNoRXZlbnQpIHtcXHJcXG4gICAgICB0aGlzLiRlbGVtZW50WzBdLmRldGFjaEV2ZW50KCdvbnByb3BlcnR5Y2hhbmdlJywgdGhpcy5fc3luY0EpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIGlmICh0aGlzLl9vYnNlcnZlciAhPSBudWxsKSB7XFxyXFxuICAgICAgdGhpcy5fb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xcclxcbiAgICAgIHRoaXMuX29ic2VydmVyID0gbnVsbDtcXHJcXG4gICAgfSBlbHNlIGlmICh0aGlzLiRlbGVtZW50WzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIpIHtcXHJcXG4gICAgICB0aGlzLiRlbGVtZW50WzBdXFxyXFxuICAgICAgICAucmVtb3ZlRXZlbnRMaXN0ZW5lcignRE9NQXR0ck1vZGlmaWVkJywgdGhpcy5fc3luY0EsIGZhbHNlKTtcXHJcXG4gICAgICB0aGlzLiRlbGVtZW50WzBdXFxyXFxuICAgICAgICAucmVtb3ZlRXZlbnRMaXN0ZW5lcignRE9NTm9kZUluc2VydGVkJywgdGhpcy5fc3luY1MsIGZhbHNlKTtcXHJcXG4gICAgICB0aGlzLiRlbGVtZW50WzBdXFxyXFxuICAgICAgICAucmVtb3ZlRXZlbnRMaXN0ZW5lcignRE9NTm9kZVJlbW92ZWQnLCB0aGlzLl9zeW5jUywgZmFsc2UpO1xcclxcbiAgICB9XFxyXFxuXFxyXFxuICAgIHRoaXMuX3N5bmNBID0gbnVsbDtcXHJcXG4gICAgdGhpcy5fc3luY1MgPSBudWxsO1xcclxcblxcclxcbiAgICB0aGlzLiRlbGVtZW50Lm9mZignLnNlbGVjdDInKTtcXHJcXG4gICAgdGhpcy4kZWxlbWVudC5hdHRyKCd0YWJpbmRleCcsIHRoaXMuJGVsZW1lbnQuZGF0YSgnb2xkLXRhYmluZGV4JykpO1xcclxcblxcclxcbiAgICB0aGlzLiRlbGVtZW50LnJlbW92ZUNsYXNzKCdzZWxlY3QyLWhpZGRlbi1hY2Nlc3NpYmxlJyk7XFxyXFxuICAgIHRoaXMuJGVsZW1lbnQuYXR0cignYXJpYS1oaWRkZW4nLCAnZmFsc2UnKTtcXHJcXG4gICAgdGhpcy4kZWxlbWVudC5yZW1vdmVEYXRhKCdzZWxlY3QyJyk7XFxyXFxuXFxyXFxuICAgIHRoaXMuZGF0YUFkYXB0ZXIuZGVzdHJveSgpO1xcclxcbiAgICB0aGlzLnNlbGVjdGlvbi5kZXN0cm95KCk7XFxyXFxuICAgIHRoaXMuZHJvcGRvd24uZGVzdHJveSgpO1xcclxcbiAgICB0aGlzLnJlc3VsdHMuZGVzdHJveSgpO1xcclxcblxcclxcbiAgICB0aGlzLmRhdGFBZGFwdGVyID0gbnVsbDtcXHJcXG4gICAgdGhpcy5zZWxlY3Rpb24gPSBudWxsO1xcclxcbiAgICB0aGlzLmRyb3Bkb3duID0gbnVsbDtcXHJcXG4gICAgdGhpcy5yZXN1bHRzID0gbnVsbDtcXHJcXG4gIH07XFxyXFxuXFxyXFxuICBTZWxlY3QyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XFxyXFxuICAgIHZhciAkY29udGFpbmVyID0gJChcXHJcXG4gICAgICAnPHNwYW4gY2xhc3M9XFxcInNlbGVjdDIgc2VsZWN0Mi1jb250YWluZXJcXFwiPicgK1xcclxcbiAgICAgICAgJzxzcGFuIGNsYXNzPVxcXCJzZWxlY3Rpb25cXFwiPjwvc3Bhbj4nICtcXHJcXG4gICAgICAgICc8c3BhbiBjbGFzcz1cXFwiZHJvcGRvd24td3JhcHBlclxcXCIgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiPjwvc3Bhbj4nICtcXHJcXG4gICAgICAnPC9zcGFuPidcXHJcXG4gICAgKTtcXHJcXG5cXHJcXG4gICAgJGNvbnRhaW5lci5hdHRyKCdkaXInLCB0aGlzLm9wdGlvbnMuZ2V0KCdkaXInKSk7XFxyXFxuXFxyXFxuICAgIHRoaXMuJGNvbnRhaW5lciA9ICRjb250YWluZXI7XFxyXFxuXFxyXFxuICAgIHRoaXMuJGNvbnRhaW5lci5hZGRDbGFzcygnc2VsZWN0Mi1jb250YWluZXItLScgKyB0aGlzLm9wdGlvbnMuZ2V0KCd0aGVtZScpKTtcXHJcXG5cXHJcXG4gICAgJGNvbnRhaW5lci5kYXRhKCdlbGVtZW50JywgdGhpcy4kZWxlbWVudCk7XFxyXFxuXFxyXFxuICAgIHJldHVybiAkY29udGFpbmVyO1xcclxcbiAgfTtcXHJcXG5cXHJcXG4gIHJldHVybiBTZWxlY3QyO1xcclxcbn0pO1xcclxcblxcblMyLmRlZmluZSgnanF1ZXJ5LW1vdXNld2hlZWwnLFtcXHJcXG4gICdqcXVlcnknXFxyXFxuXSwgZnVuY3Rpb24gKCQpIHtcXHJcXG4gIC8vIFVzZWQgdG8gc2hpbSBqUXVlcnkubW91c2V3aGVlbCBmb3Igbm9uLWZ1bGwgYnVpbGRzLlxcclxcbiAgcmV0dXJuICQ7XFxyXFxufSk7XFxyXFxuXFxuUzIuZGVmaW5lKCdqcXVlcnkuc2VsZWN0MicsW1xcclxcbiAgJ2pxdWVyeScsXFxyXFxuICAnanF1ZXJ5LW1vdXNld2hlZWwnLFxcclxcblxcclxcbiAgJy4vc2VsZWN0Mi9jb3JlJyxcXHJcXG4gICcuL3NlbGVjdDIvZGVmYXVsdHMnXFxyXFxuXSwgZnVuY3Rpb24gKCQsIF8sIFNlbGVjdDIsIERlZmF1bHRzKSB7XFxyXFxuICBpZiAoJC5mbi5zZWxlY3QyID09IG51bGwpIHtcXHJcXG4gICAgLy8gQWxsIG1ldGhvZHMgdGhhdCBzaG91bGQgcmV0dXJuIHRoZSBlbGVtZW50XFxyXFxuICAgIHZhciB0aGlzTWV0aG9kcyA9IFsnb3BlbicsICdjbG9zZScsICdkZXN0cm95J107XFxyXFxuXFxyXFxuICAgICQuZm4uc2VsZWN0MiA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XFxyXFxuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XFxyXFxuXFxyXFxuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0Jykge1xcclxcbiAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcXHJcXG4gICAgICAgICAgdmFyIGluc3RhbmNlT3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBvcHRpb25zKTtcXHJcXG5cXHJcXG4gICAgICAgICAgdmFyIGluc3RhbmNlID0gbmV3IFNlbGVjdDIoJCh0aGlzKSwgaW5zdGFuY2VPcHRpb25zKTtcXHJcXG4gICAgICAgIH0pO1xcclxcblxcclxcbiAgICAgICAgcmV0dXJuIHRoaXM7XFxyXFxuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpIHtcXHJcXG4gICAgICAgIHZhciByZXQ7XFxyXFxuICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XFxyXFxuXFxyXFxuICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xcclxcbiAgICAgICAgICB2YXIgaW5zdGFuY2UgPSAkKHRoaXMpLmRhdGEoJ3NlbGVjdDInKTtcXHJcXG5cXHJcXG4gICAgICAgICAgaWYgKGluc3RhbmNlID09IG51bGwgJiYgd2luZG93LmNvbnNvbGUgJiYgY29uc29sZS5lcnJvcikge1xcclxcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXFxyXFxuICAgICAgICAgICAgICAnVGhlIHNlbGVjdDIoXFxcXCcnICsgb3B0aW9ucyArICdcXFxcJykgbWV0aG9kIHdhcyBjYWxsZWQgb24gYW4gJyArXFxyXFxuICAgICAgICAgICAgICAnZWxlbWVudCB0aGF0IGlzIG5vdCB1c2luZyBTZWxlY3QyLidcXHJcXG4gICAgICAgICAgICApO1xcclxcbiAgICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICAgIHJldCA9IGluc3RhbmNlW29wdGlvbnNdLmFwcGx5KGluc3RhbmNlLCBhcmdzKTtcXHJcXG4gICAgICAgIH0pO1xcclxcblxcclxcbiAgICAgICAgLy8gQ2hlY2sgaWYgd2Ugc2hvdWxkIGJlIHJldHVybmluZyBgdGhpc2BcXHJcXG4gICAgICAgIGlmICgkLmluQXJyYXkob3B0aW9ucywgdGhpc01ldGhvZHMpID4gLTEpIHtcXHJcXG4gICAgICAgICAgcmV0dXJuIHRoaXM7XFxyXFxuICAgICAgICB9XFxyXFxuXFxyXFxuICAgICAgICByZXR1cm4gcmV0O1xcclxcbiAgICAgIH0gZWxzZSB7XFxyXFxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgYXJndW1lbnRzIGZvciBTZWxlY3QyOiAnICsgb3B0aW9ucyk7XFxyXFxuICAgICAgfVxcclxcbiAgICB9O1xcclxcbiAgfVxcclxcblxcclxcbiAgaWYgKCQuZm4uc2VsZWN0Mi5kZWZhdWx0cyA9PSBudWxsKSB7XFxyXFxuICAgICQuZm4uc2VsZWN0Mi5kZWZhdWx0cyA9IERlZmF1bHRzO1xcclxcbiAgfVxcclxcblxcclxcbiAgcmV0dXJuIFNlbGVjdDI7XFxyXFxufSk7XFxyXFxuXFxuICAvLyBSZXR1cm4gdGhlIEFNRCBsb2FkZXIgY29uZmlndXJhdGlvbiBzbyBpdCBjYW4gYmUgdXNlZCBvdXRzaWRlIG9mIHRoaXMgZmlsZVxcclxcbiAgcmV0dXJuIHtcXHJcXG4gICAgZGVmaW5lOiBTMi5kZWZpbmUsXFxyXFxuICAgIHJlcXVpcmU6IFMyLnJlcXVpcmVcXHJcXG4gIH07XFxyXFxufSgpKTtcXHJcXG5cXHJcXG4gIC8vIEF1dG9sb2FkIHRoZSBqUXVlcnkgYmluZGluZ3NcXHJcXG4gIC8vIFdlIGtub3cgdGhhdCBhbGwgb2YgdGhlIG1vZHVsZXMgZXhpc3QgYWJvdmUgdGhpcywgc28gd2UncmUgc2FmZVxcclxcbiAgdmFyIHNlbGVjdDIgPSBTMi5yZXF1aXJlKCdqcXVlcnkuc2VsZWN0MicpO1xcclxcblxcclxcbiAgLy8gSG9sZCB0aGUgQU1EIG1vZHVsZSByZWZlcmVuY2VzIG9uIHRoZSBqUXVlcnkgZnVuY3Rpb24gdGhhdCB3YXMganVzdCBsb2FkZWRcXHJcXG4gIC8vIFRoaXMgYWxsb3dzIFNlbGVjdDIgdG8gdXNlIHRoZSBpbnRlcm5hbCBsb2FkZXIgb3V0c2lkZSBvZiB0aGlzIGZpbGUsIHN1Y2hcXHJcXG4gIC8vIGFzIGluIHRoZSBsYW5ndWFnZSBmaWxlcy5cXHJcXG4gIGpRdWVyeS5mbi5zZWxlY3QyLmFtZCA9IFMyO1xcclxcblxcclxcbiAgLy8gUmV0dXJuIHRoZSBTZWxlY3QyIGluc3RhbmNlIGZvciBhbnlvbmUgd2hvIGlzIGltcG9ydGluZyBpdC5cXHJcXG4gIHJldHVybiBzZWxlY3QyO1xcclxcbn0pKTtcXHJcXG5cIlxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Jhdy1sb2FkZXIhLi9+L3NvdXJjZS1tYXAtbG9hZGVyIS4vfi9zZWxlY3QyL2Rpc3QvanMvc2VsZWN0Mi5qc1xuICoqIG1vZHVsZSBpZCA9IDgwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJpbXBvcnQge1dQQXR0YWNobWVudEZvcm1JbnB1dH0gZnJvbSBcIi4uL3dwL2Zvcm0vaW5wdXRzL1dQQXR0YWNobWVudEZvcm1JbnB1dFwiO1xualF1ZXJ5KCBkb2N1bWVudCApLnJlYWR5KCBmdW5jdGlvbiAoKVxue1xuXHRqUXVlcnkoIFwiLndwYXR0YWNobWVudGZvcm1pbnB1dFwiICkuZWFjaCggZnVuY3Rpb24gKClcblx0e1xuXHRcdG5ldyBXUEF0dGFjaG1lbnRGb3JtSW5wdXQoIGpRdWVyeSggdGhpcyApLCBqUXVlcnkoIHRoaXMgKS5kYXRhKCkgKTtcblx0fSApO1xuLy9cdGpRdWVyeSggXCIud3BhdHRhY2htZW50Zm9ybWlucHV0IC5idG4tcmVtb3ZlXCIgKS5jbGljayggZnVuY3Rpb24gKCBlIClcbi8vXHR7XG4vL1x0XHRlLnByZXZlbnREZWZhdWx0KCk7XG4vL1x0XHR2YXIgJGVsID0gJCggdGhpcyApO1xuLy9cdFx0JGVsLmNsb3Nlc3QoIFwiLmxpc3QtZ3JvdXAtaXRlbVwiICkucmVtb3ZlKCk7XG4vL1xuLy9cdFx0bmV3IFdQQXR0YWNobWVudEZvcm1JbnB1dCggJCggJCggdGhpcyApLmRhdGEoIFwidGFyZ2V0XCIgKSApLCBcInJlbmRlclwiICk7XG4vL1x0fSApO1xuLy9cdGpRdWVyeSggXCIud3BhdHRhY2htZW50Zm9ybWlucHV0IC5idG4tYWRkXCIgKS5jbGljayggZnVuY3Rpb24gKCBlIClcbi8vXHR7XG4vL1x0XHRuZXcgV1BBdHRhY2htZW50Rm9ybUlucHV0KCAkKCAkKCB0aGlzICkuZGF0YSggXCJ0YXJnZXRcIiApICksIFwib3BlblwiICk7XG4vL1x0fSApO1xufSApO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL3RzYy9wbHVnaW5zL2pRdWVyeVdQQXR0YWNobWVudEZvcm1JbnB1dC50c1xuICoqLyIsImV4cG9ydCBjbGFzcyBXUEF0dGFjaG1lbnRGb3JtSW5wdXRcbntcblx0cHVibGljICRlbDogSlF1ZXJ5O1xuXHRwdWJsaWMgb3B0aW9uczogSVdQQXR0YWNobWVudEZvcm1JbnB1dE9wdGlvbnMgPSB7XG5cdFx0bWF4OiAgICAgICAtMSxcblx0XHR0aXRsZTogICAgIFwiXCIsXG5cdFx0YnV0dG9uVGV4dDpcIlwiLFxuXHRcdHR5cGU6ICAgICAgbnVsbCxcblx0XHRmcmFtZTogICAgIFwic2VsZWN0XCJcblx0fTtcblx0cHVibGljIHdwTWVkaWE6IGFueTtcblx0cHVibGljIHRlbXBsYXRlOiBhbnk7XG5cblx0Y29uc3RydWN0b3IoICRlbDogSlF1ZXJ5LCBvcHRpb25zOiBPYmplY3QgKVxuXHR7XG5cdFx0dGhpcy4kZWwgICAgICA9ICRlbDtcblx0XHQvLyBNb2RlbFxuXHRcdHRoaXMub3B0aW9ucyAgPSBqUXVlcnkuZXh0ZW5kKCB7fSwgdGhpcy5vcHRpb25zLCBvcHRpb25zICk7XG5cdFx0Ly8gVmlld1xuXHRcdHRoaXMudGVtcGxhdGUgPSBfLnRlbXBsYXRlKCB0aGlzLiRlbC5maW5kKCBcInRleHRhcmVhLnVuZGVyc2NvcmUtdGVtcGxhdGVcIiApLnZhbCgpICk7XG5cdFx0dGhpcy53cE1lZGlhICA9IHdwLm1lZGlhKCB7XG5cdFx0XHR0aXRsZTogICB0aGlzLm9wdGlvbnMudGl0bGUsXG5cdFx0XHRtdWx0aXBsZTp0aGlzLm9wdGlvbnMubWF4IDwgMCB8fCB0aGlzLm9wdGlvbnMubWF4ID4gMSA/IHRydWUgOiBmYWxzZSxcblx0XHRcdGxpYnJhcnk6IHRoaXMub3B0aW9ucy50eXBlID8ge3R5cGU6dGhpcy5vcHRpb25zLnR5cGV9IDogdW5kZWZpbmVkLFxuXHRcdFx0YnV0dG9uOiAge3RleHQ6dGhpcy5vcHRpb25zLmJ1dHRvblRleHR9LFxuXHRcdFx0ZnJhbWU6ICAgdGhpcy5vcHRpb25zLmZyYW1lXG5cdFx0fSApO1xuXHRcdC8vIENvbnRyb2xsZXJcblx0XHR0aGlzLndwTWVkaWEub24oIFwic2VsZWN0XCIsICgpID0+IHRoaXMub25XUE1lZGlhU2VsZWN0KCkgKTtcblx0XHR0aGlzLiRlbC5vbiggXCJjbGlja1wiLCBcIi5idG4tYWRkXCIsICgpID0+IHRoaXMub3BlbigpICk7XG5cdFx0dGhpcy4kZWwub24oIFwiY2xpY2tcIiwgXCIuYnRuLXJlbW92ZVwiLCAoIGUgKSA9PiB0aGlzLm9uUmVtb3ZlQ2xpY2soIGUgKSApO1xuXG5cdFx0dGhpcy5yZW5kZXIoKTtcblx0fVxuXG5cdHB1YmxpYyByZW5kZXIoKVxuXHR7XG5cdFx0aWYoIHRoaXMuY291bnQgPj0gdGhpcy5vcHRpb25zLm1heCAmJiB0aGlzLm9wdGlvbnMubWF4ID49IDAgKSB0aGlzLiRlbC5maW5kKCBcIi5idG4tYWRkXCIgKS5wcm9wKCBcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIiApO1xuXHRcdGVsc2UgdGhpcy4kZWwuZmluZCggXCIuYnRuLWFkZFwiICkucHJvcCggXCJkaXNhYmxlZFwiLCBudWxsICk7XG5cdH1cblxuXHRwdWJsaWMgb3BlbigpXG5cdHtcblx0XHR0aGlzLndwTWVkaWEub3BlbigpO1xuXHR9O1xuXG5cdHB1YmxpYyBhZGQoIGF0dGFjaG1lbnRNb2RlbDogV1BNZWRpYUF0dGFjaG1lbnRNb2RlbCApXG5cdHtcblx0XHR2YXIgX190aGlzICAgICAgICAgID0gdGhpcztcblx0XHRhdHRhY2htZW50TW9kZWwuc3JjID0gYXR0YWNobWVudE1vZGVsLmljb247XG5cdFx0aWYoICFhdHRhY2htZW50TW9kZWwud2lkdGggKSBhdHRhY2htZW50TW9kZWwud2lkdGggPSBcIlwiO1xuXHRcdGlmKCAhYXR0YWNobWVudE1vZGVsLmhlaWdodCApIGF0dGFjaG1lbnRNb2RlbC5oZWlnaHQgPSBcIlwiO1xuXHRcdGlmKCBhdHRhY2htZW50TW9kZWwuc2l6ZXMgKVxuXHRcdHtcblx0XHRcdGlmKCBhdHRhY2htZW50TW9kZWwuc2l6ZXMudGh1bWJuYWlsICYmIGF0dGFjaG1lbnRNb2RlbC5zaXplcy50aHVtYm5haWwudXJsIClcblx0XHRcdHtcblx0XHRcdFx0YXR0YWNobWVudE1vZGVsLnNyYyA9IGF0dGFjaG1lbnRNb2RlbC5zaXplcy50aHVtYm5haWwudXJsO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBpZiggYXR0YWNobWVudE1vZGVsLnNpemVzLmZ1bGwgJiYgYXR0YWNobWVudE1vZGVsLnNpemVzLmZ1bGwudXJsIClcblx0XHRcdHtcblx0XHRcdFx0YXR0YWNobWVudE1vZGVsLnNyYyA9IGF0dGFjaG1lbnRNb2RlbC5zaXplcy5mdWxsLnVybDtcblx0XHRcdH1cblx0XHR9XG5cdFx0dmFyICRlbCA9IGpRdWVyeSggdGhpcy50ZW1wbGF0ZSggYXR0YWNobWVudE1vZGVsICkgKTtcblx0XHR0aGlzLiRlbC5maW5kKCBcIi5saXN0LWdyb3VwXCIgKS5hcHBlbmQoICRlbCApO1xuXHR9O1xuXG5cdC8qIFNFVCBBTkQgR0VUICovXG5cdHB1YmxpYyBnZXQgY291bnQoKVxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuJGVsLmZpbmQoIFwiLmxpc3QtZ3JvdXAtaXRlbVwiICkubGVuZ3RoO1xuXHR9XG5cblx0LyogRVZFTlQgSEFORExFUlMgKi9cblx0cHJpdmF0ZSBvbldQTWVkaWFTZWxlY3QoKVxuXHR7XG5cdFx0dmFyIHNlbGVjdGlvbiA9IHRoaXMud3BNZWRpYS5zdGF0ZSgpLmdldCggJ3NlbGVjdGlvbicgKTtcblx0XHR2YXIgX190aGlzICAgID0gdGhpcztcblx0XHRzZWxlY3Rpb24uZWFjaCggZnVuY3Rpb24oIGF0dGFjaG1lbnQgKVxuXHRcdHtcblx0XHRcdGlmKCBfX3RoaXMub3B0aW9ucy5tYXggPCAwIHx8IF9fdGhpcy5jb3VudCA8IF9fdGhpcy5vcHRpb25zLm1heCApXG5cdFx0XHR7XG5cdFx0XHRcdF9fdGhpcy5hZGQoIGF0dGFjaG1lbnQudG9KU09OKCkgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cblx0XHR0aGlzLnJlbmRlcigpO1xuXHR9O1xuXG5cdHByaXZhdGUgb25SZW1vdmVDbGljayggZSApXG5cdHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0dmFyICRlbCA9IGpRdWVyeSggZS5jdXJyZW50VGFyZ2V0ICk7XG5cdFx0JGVsLmNsb3Nlc3QoIFwiLmxpc3QtZ3JvdXAtaXRlbVwiICkucmVtb3ZlKCk7XG5cdFx0dGhpcy5yZW5kZXIoKTtcblx0fVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElXUEF0dGFjaG1lbnRGb3JtSW5wdXRPcHRpb25zXG57XG5cdG1heDogbnVtYmVyO1xuXHR0aXRsZTogc3RyaW5nO1xuXHRidXR0b25UZXh0OiBzdHJpbmc7XG5cdHR5cGU6IHN0cmluZztcblx0ZnJhbWU6IHN0cmluZztcbn1cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy90c2Mvd3AvZm9ybS9pbnB1dHMvV1BBdHRhY2htZW50Rm9ybUlucHV0LnRzXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==