define("com/tutomvc/core/model/Model",[],function(){function e(t){var n=this,r,i=[];this.registerProxy=function(e){return e.initializeFacadefacadeKey(n.getFacadefacadeKey()),i[e.getName()]=e,e.onRegister(),e},this.retrieveProxy=function(e){return i[e]},this.getFacadefacadeKey=function(){return r},function(t){r=t,e.instanceMap[r]=n}(t)}return e.instanceMap=[],e.getInstance=function(t){return t?e.instanceMap[t]?e.instanceMap[t]:new e(t):console.log("Model::getInstance - no facadeKey")},e}),define("com/tutomvc/core/controller/event/EventDispatcher",[],function(){function e(){var e=this,t=[];this.dispatchEvent=function(e){if(t[e.getName()])for(var n in t[e.getName()]){var r=t[e.getName()][n];r(e)}},this.getEventMap=function(){return t},this.addEventListener=function(e,n){return t[e]||(t[e]=[]),t[e].push(n),!0},this.removeEventListener=function(e,n){if(t[e])for(var r in t[e]){var i=t[e.getName()][r];i==n&&(t[e.getName()][r]=null,delete t[e.getName()][r])}return!0}}return e}),define("com/tutomvc/core/view/View",["com/tutomvc/core/controller/event/EventDispatcher"],function(e){function t(e){var n=this,r=e,i=[],s=[];this.registerMediator=function(e,t){return s[t.getName()]=e,t.initializeFacadeKey(n.getFacadeKey()),i[t.getName()]=t,t.onRegister(),t},this.retrieveMediator=function(e){return i[e]},this.retrieveViewComponent=function(e){return s[e]},this.getFacadeKey=function(){return r},function(e){r=e,t.instanceMap[r]=n}(e)}function n(e){return t.getInstance(e)}return n.instanceMap=t.instanceMap=[],n.getInstance=t.getInstance=function(n){return n?t.instanceMap[n]?t.instanceMap[n]:(t.prototype=new e,t.prototype.constructor=t,new t(n)):console.log("View::getInstance - no facadeKey")},n}),define("com/tutomvc/core/controller/Controller",["com/tutomvc/core/view/View"],function(e){function t(n){var r=this,i,s=[],o;this.executeCommand=function(e){if(s[e.getName()]){var t=new(s[e.getName()]);t.initializeFacadeKey(r.getFacadeKey()),t.execute(e)}},this.registerCommand=function(e,t){s[e]=t,o.addEventListener(e,r.executeCommand)},this.getFacadeKey=function(){return i},function(n){i=n,o=e.getInstance(i),t.instanceMap[i]=r}(n)}return t.instanceMap=[],t.getInstance=function(e){return e?t.instanceMap[e]?t.instanceMap[e]:new t(e):console.log("Controller::getInstance - no facadeKey")},t}),define("com/tutomvc/core/controller/event/Event",[],function(){function e(e,t){var n=e,r=t;this.setName=function(e){n=e},this.getName=function(){return n},this.setBody=function(e){r=e},this.getBody=function(){return r}}return e}),define("com/tutomvc/core/facade/Facade",["com/tutomvc/core/model/Model","com/tutomvc/core/view/View","com/tutomvc/core/controller/Controller","com/tutomvc/core/controller/event/Event"],function(e,t,n,r){function i(s){var o=this,u;this.model,this.view,this.controller;var a=function(e){if(!e)return console.log("Facade::error(need key)");u=e,i.instanceMap[e]=o,f(),l(),c()},f=function(){o.model=e.getInstance(o.getKey())},l=function(){o.controller=n.getInstance(o.getKey())},c=function(){o.view=t.getInstance(o.getKey())};this.dispatch=function(e,t){o.view.dispatchEvent(new r(e,t))},this.getKey=function(){return u},this.onRegister=function(){console.log("Facade")},a(s)}return i.instanceMap=[],i.getInstance=function(e){return e?i.instanceMap[e]?i.instanceMap[e]:new i(e):console.log("Facade::getInstance - no key")},i.extend=function(e,t){return e.prototype=new i(t),e.prototype.constructor=e,e},i}),define("com/tutomvc/core/CoreClass",["com/tutomvc/core/facade/Facade"],function(e){function t(){var t=this,n;this.initializeFacadeKey=function(e){return n=e,n},this.getFacadeKey=function(){return n},this.getFacade=function(){return e.getInstance(n)},this.onRegister=function(){}}return t}),define("com/tutomvc/core/controller/command/Command",["com/tutomvc/core/CoreClass"],function(e){function t(){this.execute=function(e){}}return t.extend=function(n){return t.prototype=new e,t.prototype.constructor=t,n.prototype=new t,n.prototype.constructor=n,n},t}),define("com/tutomvc/core/view/mediator/Mediator",["com/tutomvc/core/CoreClass","com/tutomvc/core/controller/event/Event"],function(e,t){function n(e){var n=this,r=e,i;this.dispatch=function(e,r){n.getFacade().view.dispatchEvent(new t(e,r))},this.addEventListener=function(e,t){n.getFacade().view.addEventListener(e,t)},this.getViewComponent=function(){return n.getFacade().view.retrieveViewComponent(n.getName())},this.getName=function(){return r},this.onRegister=function(){}}return n.extend=function(t,r){return n.prototype=new e,n.prototype.constructor=n,t.prototype=new n(r),t.prototype.constructor=t,t},n}),define("com/tutomvc/core/model/proxy/Proxy",["com/tutomvc/core/CoreClass"],function(e){function t(e){var t=this,n=e,r=[];this.add=function(e,t){t?r[t]=e:r.push(e)},this.has=function(e){return r[e]!=undefined},this.get=function(e){return r[e]},this.getMap=function(){return r},this.getName=function(){return n}}return t.extend=function(n,r){return t.prototype=new e,t.prototype.constructor=t,n.prototype=new t(r),n.prototype.constructor=n,n},t});